<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="第1章 Hadoop概述1.1 Hadoop是什么 1.2 Hadoop发展历史（了解）">
<meta property="og:type" content="article">
<meta property="og:title" content="Hadoop入门">
<meta property="og:url" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="没有尾巴的小驴">
<meta property="og:description" content="第1章 Hadoop概述1.1 Hadoop是什么 1.2 Hadoop发展历史（了解）">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111626122.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111633253.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111643700.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230112718689.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111732209.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111740524.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111747873.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111803845.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111846915.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111858689.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111906909.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111924744.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111951907.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229201718776.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229201725625.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229195826236.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229200100123.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229200421131.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125112103197.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230113618434.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229203019881.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229203032281.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229203041582.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230113643329.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230113729633.png">
<meta property="og:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/27a573d90eac7cbabd2384b162d3eb3.jpg">
<meta property="article:published_time" content="2021-12-29T11:07:13.000Z">
<meta property="article:modified_time" content="2025-06-25T08:08:45.593Z">
<meta property="article:author" content="Rui Zhang">
<meta property="article:tag" content="Hadoop">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111626122.png">

<link rel="canonical" href="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>Hadoop入门 | 没有尾巴的小驴</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">没有尾巴的小驴</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">记录生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">22</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">22</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">52</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Rui Zhang">
      <meta itemprop="description" content="不在沉默中爆发，就在沉默中灭亡">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="没有尾巴的小驴">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hadoop入门
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-29 19:07:13" itemprop="dateCreated datePublished" datetime="2021-12-29T19:07:13+08:00">2021-12-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-25 16:08:45" itemprop="dateModified" datetime="2025-06-25T16:08:45+08:00">2025-06-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop/" itemprop="url" rel="index"><span itemprop="name">Hadoop</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>25k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>22 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="第1章-Hadoop概述"><a href="#第1章-Hadoop概述" class="headerlink" title="第1章 Hadoop概述"></a>第1章 Hadoop概述</h1><h2 id="1-1-Hadoop是什么"><a href="#1-1-Hadoop是什么" class="headerlink" title="1.1 Hadoop是什么"></a>1.1 Hadoop是什么</h2><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111626122.png" alt="image-20220125111626122"></p>
<h2 id="1-2-Hadoop发展历史（了解）"><a href="#1-2-Hadoop发展历史（了解）" class="headerlink" title="1.2 Hadoop发展历史（了解）"></a>1.2 Hadoop发展历史（了解）</h2><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111633253.png" alt="image-20220125111633253"></p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111643700.png" alt="image-20220125111643700"></p>
<h2 id="1-3-Hadoop三大发行版本（了解）"><a href="#1-3-Hadoop三大发行版本（了解）" class="headerlink" title="1.3 Hadoop三大发行版本（了解）"></a>1.3 Hadoop三大发行版本（了解）</h2><p>Hadoop三大发行版本：Apache、Cloudera、Hortonworks。</p>
<p>​        Apache版本最原始（最基础）的版本，对于入门学习最好。2006</p>
<p>​        Cloudera内部集成了很多大数据框架，对应产品CDH。2008</p>
<p>​        Hortonworks文档较好，对应产品HDP。2011</p>
<p>​        Hortonworks现在已经被Cloudera公司收购，推出新的品牌CDP。</p>
<p>​    <img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230112718689.png" alt="image-20211230112718689"></p>
<h3 id="1）Apache-Hadoop"><a href="#1）Apache-Hadoop" class="headerlink" title="1）Apache Hadoop"></a>1）Apache Hadoop</h3><p>官网地址：<a href="http://hadoop.apache.org" target="_blank" rel="noopener">http://hadoop.apache.org</a></p>
<p>下载地址：<a href="https://hadoop.apache.org/releases.html" target="_blank" rel="noopener">https://hadoop.apache.org/releases.html</a></p>
<h3 id="2）Cloudera-Hadoop"><a href="#2）Cloudera-Hadoop" class="headerlink" title="2）Cloudera Hadoop"></a>2）Cloudera Hadoop</h3><p>官网地址：<a href="https://www.cloudera.com/downloads/cdh" target="_blank" rel="noopener">https://www.cloudera.com/downloads/cdh</a></p>
<p>下载地址：<a href="https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_download.html" target="_blank" rel="noopener">https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_6_download.html</a></p>
<p>（1）2008年成立的Cloudera是最早将Hadoop商用的公司，为合作伙伴提供Hadoop的商用解决方案，主要是包括支持、咨询服务、培训。</p>
<p>（2）2009年Hadoop的创始人Doug Cutting也加盟Cloudera公司。Cloudera产品主要为CDH，Cloudera Manager，Cloudera Support</p>
<p>（3）CDH是Cloudera的Hadoop发行版，完全开源，比Apache Hadoop在兼容性，安全性，稳定性上有所增强。Cloudera的标价为每年每个节点10000美元。</p>
<p>（4）Cloudera Manager是集群的软件分发及管理监控平台，可以在几个小时内部署好一个Hadoop集群，并对集群的节点及服务进行实时监控。</p>
<h3 id="3）Hortonworks-Hadoop"><a href="#3）Hortonworks-Hadoop" class="headerlink" title="3）Hortonworks Hadoop"></a>3）Hortonworks Hadoop</h3><p>官网地址：<a href="https://hortonworks.com/products/data-center/hdp/" target="_blank" rel="noopener">https://hortonworks.com/products/data-center/hdp/</a></p>
<p>下载地址：<a href="https://hortonworks.com/downloads/#data-platform" target="_blank" rel="noopener">https://hortonworks.com/downloads/#data-platform</a></p>
<p>（1）2011年成立的Hortonworks是雅虎与硅谷风投公司Benchmark Capital合资组建。</p>
<p>（2）公司成立之初就吸纳了大约25名至30名专门研究Hadoop的雅虎工程师，上述工程师均在2005年开始协助雅虎开发Hadoop，贡献了Hadoop80%的代码。</p>
<p>（3）Hortonworks的主打产品是Hortonworks Data Platform（HDP），也同样是100%开源的产品，HDP除常见的项目外还包括了Ambari，一款开源的安装和管理系统。</p>
<p>（4）2018年Hortonworks目前已经被Cloudera公司收购。</p>
<h2 id="1-4-Hadoop优势（4高）"><a href="#1-4-Hadoop优势（4高）" class="headerlink" title="1.4 Hadoop优势（4高）"></a>1.4 Hadoop优势（4高）</h2><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111732209.png" alt="image-20220125111732209"></p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111740524.png" alt="image-20220125111740524"></p>
<h2 id="1-5-Hadoop组成（面试重点）"><a href="#1-5-Hadoop组成（面试重点）" class="headerlink" title="1.5 Hadoop组成（面试重点）"></a>1.5 Hadoop组成（面试重点）</h2><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111747873.png" alt="image-20220125111747873"></p>
<h3 id="1-5-1-HDFS架构概述"><a href="#1-5-1-HDFS架构概述" class="headerlink" title="1.5.1 HDFS架构概述"></a>1.5.1 HDFS架构概述</h3><p>Hadoop Distributed File System，简称HDFS，是一个分布式文件系统。</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111803845.png" alt="image-20220125111803845"></p>
<h3 id="1-5-2-YARN架构概述"><a href="#1-5-2-YARN架构概述" class="headerlink" title="1.5.2 YARN架构概述"></a>1.5.2 YARN架构概述</h3><p>Yet Another Resource Negotiator简称YARN ，另一种资源协调者，是Hadoop的资源管理器。</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111846915.png" alt="image-20220125111846915"></p>
<h3 id="1-5-3-MapReduce架构概述"><a href="#1-5-3-MapReduce架构概述" class="headerlink" title="1.5.3 MapReduce架构概述"></a>1.5.3 MapReduce架构概述</h3><p>MapReduce将计算过程分为两个阶段：Map和Reduce</p>
<p>1）Map阶段并行处理输入数据</p>
<p>2）Reduce阶段对Map结果进行汇总</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111858689.png" alt="image-20220125111858689"></p>
<h3 id="1-5-4-HDFS、YARN、MapReduce三者关系"><a href="#1-5-4-HDFS、YARN、MapReduce三者关系" class="headerlink" title="1.5.4 HDFS、YARN、MapReduce三者关系"></a>1.5.4 HDFS、YARN、MapReduce三者关系</h3><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111906909.png" alt="image-20220125111906909"></p>
<h2 id="1-6-大数据技术生态体系"><a href="#1-6-大数据技术生态体系" class="headerlink" title="1.6 大数据技术生态体系"></a>1.6 大数据技术生态体系</h2><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111924744.png" alt="image-20220125111924744"></p>
<p>图中涉及的技术名词解释如下：</p>
<p>1）<strong>Sqoop</strong>：Sqoop是一款开源的工具，主要用于在Hadoop、Hive与传统的数据库（MySQL）间进行数据的传递，可以将一个关系型数据库（例如 ：MySQL，Oracle 等）中的数据导进到Hadoop的HDFS中，也可以将HDFS的数据导进到关系型数据库中。</p>
<p>2）<strong>Flume</strong>：Flume是一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据； </p>
<p>3）<strong>Kafka</strong>：Kafka是一种高吞吐量的分布式发布订阅消息系统； </p>
<p>4）<strong>Spark</strong>：Spark是当前最流行的开源大数据内存计算框架。可以基于Hadoop上存储的大数据进行计算。</p>
<p>5）<strong>Flink</strong>：Flink是当前最流行的开源大数据内存计算框架。用于实时计算的场景较多。</p>
<p>6）<strong>Oozie</strong>：Oozie是一个管理Hadoop作业（job）的工作流程调度管理系统。</p>
<p>7）<strong>Hbase</strong>：HBase是一个分布式的、面向列的开源数据库。HBase不同于一般的关系数据库，它是一个适合于非结构化数据存储的数据库。</p>
<p>8）<strong>Hive</strong>：Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供简单的SQL查询功能，可以将SQL语句转换为MapReduce任务进行运行。其优点是学习成本低，可以通过类SQL语句快速实现简单的MapReduce统计，不必开发专门的MapReduce应用，十分适合数据仓库的统计分析。</p>
<p>9）<strong>ZooKeeper</strong>：它是一个针对大型分布式系统的可靠协调系统，提供的功能包括：配置维护、名字服务、分布式同步、组服务等。</p>
<h2 id="1-7-推荐系统框架图"><a href="#1-7-推荐系统框架图" class="headerlink" title="1.7 推荐系统框架图"></a>1.7 推荐系统框架图</h2><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125111951907.png" alt="image-20220125111951907"></p>
<h1 id="第2章-Hadoop运行环境搭建（开发重点）"><a href="#第2章-Hadoop运行环境搭建（开发重点）" class="headerlink" title="第2章 Hadoop运行环境搭建（开发重点）"></a>第2章 Hadoop运行环境搭建（开发重点）</h1><h2 id="2-1-模板虚拟机环境准备"><a href="#2-1-模板虚拟机环境准备" class="headerlink" title="2.1 模板虚拟机环境准备"></a>2.1 模板虚拟机环境准备</h2><p><strong>0）安装模板虚拟机</strong></p>
<p>​    IP地址192.168.10.100、主机名称hadoop100、内存4G、硬盘50G</p>
<p><strong>1）hadoop100虚拟机配置要求如下（本文Linux系统全部以CentOS-7.5-x86-1804为例）</strong></p>
<p>（1）使用yum安装需要虚拟机可以正常上网，yum安装前可以先测试下虚拟机联网情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# ping www.baidu.com</span><br><span class="line">PING www.baidu.com (14.215.177.39) 56(84) bytes of data.</span><br><span class="line">64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=1 ttl=128 time=8.60 ms</span><br><span class="line">64 bytes from 14.215.177.39 (14.215.177.39): icmp_seq=2 ttl=128 time=7.72 ms</span><br></pre></td></tr></table></figure>

<p>（2）安装epel-release</p>
<p>注：Extra Packages for Enterprise Linux是为“红帽系”的操作系统提供额外的软件包，适用于RHEL、CentOS和Scientific Linux。相当于是一个软件仓库，大多数rpm包在官方 repository 中是找不到的）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# yum install -y epel-release</span><br></pre></td></tr></table></figure>

<p>（3）注意：如果Linux安装的是最小系统版，还需要安装如下工具；如果安装的是Linux桌面标准版，不需要执行如下操作</p>
<blockquote>
<p>net-tool：工具包集合，包含ifconfig等命令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# yum install -y net-tools</span><br></pre></td></tr></table></figure>

<blockquote>
<p>vim：编辑器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# yum install -y vim</span><br></pre></td></tr></table></figure>

<p><strong>2）关闭防火墙，关闭防火墙开机自启</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# systemctl stop firewalld</span><br><span class="line">[root@hadoop100 ~]# systemctl disable firewalld.service</span><br></pre></td></tr></table></figure>

<p>​    注意：在企业开发时，通常单个服务器的防火墙时关闭的。公司整体对外会设置非常安全的防火墙</p>
<p><strong>3）创建atguigu用户，并修改atguigu用户的密码</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# useradd atguigu</span><br><span class="line">[root@hadoop100 ~]# passwd atguigu</span><br></pre></td></tr></table></figure>

<p><strong>4）配置atguigu用户具有root权限，方便后期加sudo执行root权限的命令</strong></p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@hadoop100</span> ~]<span class="meta"># vim /etc/sudoers</span></span><br></pre></td></tr></table></figure>

<p>修改/etc/sudoers文件，在%wheel这行下面添加一行，如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Allow root to run any commands anywhere</span><br><span class="line">root   ALL=(ALL)   ALL</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Allows people in group wheel to run all commands</span></span></span><br><span class="line"><span class="meta">%</span><span class="bash">wheel  ALL=(ALL)    ALL</span></span><br><span class="line">atguigu  ALL=(ALL)   NOPASSWD:ALL</span><br></pre></td></tr></table></figure>

<p>注意：atguigu这一行不要直接放到root行下面，因为所有用户都属于wheel组，你先配置了atguigu具有免密功能，但是程序执行到%wheel行时，该功能又被覆盖回需要密码。所以atguigu要放到%wheel这行下面。</p>
<p><strong>5）在/opt目录下创建文件夹，并修改所属主和所属组</strong></p>
<p>（1）在/opt目录下创建module、software文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# mkdir /opt/module</span><br><span class="line">[root@hadoop100 ~]# mkdir /opt/software</span><br></pre></td></tr></table></figure>

<p>（2）修改module、software文件夹的所有者和所属组均为atguigu用户 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# chown atguigu:atguigu /opt/module </span><br><span class="line">[root@hadoop100 ~]# chown atguigu:atguigu /opt/software</span><br></pre></td></tr></table></figure>

<p>（3）查看module、software文件夹的所有者和所属组</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# cd /opt/</span><br><span class="line">[root@hadoop100 opt]# ll</span><br><span class="line">总用量 12</span><br><span class="line">drwxr-xr-x. 2 atguigu atguigu 4096 5月  28 17:18 module</span><br><span class="line">drwxr-xr-x. 2 root   root   4096 9月  7 2017 rh</span><br><span class="line">drwxr-xr-x. 2 atguigu atguigu 4096 5月  28 17:18 software</span><br></pre></td></tr></table></figure>

<p><strong>6）卸载虚拟机自带的JDK</strong></p>
<p>​    注意：如果你的虚拟机是最小化安装不需要执行这一步。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps</span><br></pre></td></tr></table></figure>

<p>rpm -qa：查询所安装的所有rpm软件包</p>
<p>grep -i：忽略大小写</p>
<p>xargs -n1：表示每次只传递一个参数</p>
<p>rpm -e –nodeps：强制卸载软件</p>
<p><strong>7）重启虚拟机</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# reboot</span><br></pre></td></tr></table></figure>

<h2 id="2-2-克隆虚拟机"><a href="#2-2-克隆虚拟机" class="headerlink" title="2.2 克隆虚拟机"></a>2.2 克隆虚拟机</h2><p><strong>1）利用模板机hadoop100，克隆三台虚拟机：hadoop102 hadoop103 hadoop104</strong></p>
<p>​    注意：克隆时，要先关闭hadoop100</p>
<p><strong>2）修改克隆机IP，以下以hadoop102举例说明</strong></p>
<p>（1）修改克隆虚拟机的静态IP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></table></figure>

<p>改成</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=ens33</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">NAME="ens33"</span><br><span class="line">IPADDR=192.168.10.102</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.10.2</span><br><span class="line">DNS1=192.168.10.2</span><br></pre></td></tr></table></figure>

<p>（2）查看Linux虚拟机的虚拟网络编辑器，编辑-&gt;虚拟网络编辑器-&gt;VMnet8</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229201718776.png" alt="image-20211229201718776"></p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229201725625.png" alt="image-20211229201725625"></p>
<p>（3）查看Windows系统适配器VMware Network Adapter VMnet8的IP地址</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229195826236.png" alt="image-20211229195826236"></p>
<p>（4）保证Linux系统ifcfg-ens33文件中IP地址、虚拟网络编辑器地址和Windows系统VM8网络IP地址相同。</p>
<p>3）修改克隆机主机名，以下以hadoop102举例说明</p>
<p>​    （1）修改主机名称</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# vim /etc/hostname  hadoop102</span><br></pre></td></tr></table></figure>

<p>（2）配置Linux克隆机主机名称映射hosts文件，打开/etc/hosts</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# vim /etc/hosts</span><br></pre></td></tr></table></figure>

<p>添加如下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">192.168.10.100 hadoop100</span><br><span class="line">192.168.10.101 hadoop101</span><br><span class="line">192.168.10.102 hadoop102</span><br><span class="line">192.168.10.103 hadoop103</span><br><span class="line">192.168.10.104 hadoop104</span><br><span class="line">192.168.10.105 hadoop105</span><br><span class="line">192.168.10.106 hadoop106</span><br><span class="line">192.168.10.107 hadoop107</span><br><span class="line">192.168.10.108 hadoop108</span><br></pre></td></tr></table></figure>

<p>4）重启克隆机hadoop102 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop100 ~]# reboot</span><br></pre></td></tr></table></figure>

<p>5）修改windows的主机映射文件（hosts文件）</p>
<p>（1）如果操作系统是window7，可以直接修改 </p>
<p>​        （a）进入C:WindowsSystem32driversetc路径</p>
<p>​        （b）打开hosts文件并添加如下内容，然后保存</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">192.168.10.100 hadoop100</span><br><span class="line">192.168.10.101 hadoop101</span><br><span class="line">192.168.10.102 hadoop102</span><br><span class="line">192.168.10.103 hadoop103</span><br><span class="line">192.168.10.104 hadoop104</span><br><span class="line">192.168.10.105 hadoop105</span><br><span class="line">192.168.10.106 hadoop106</span><br><span class="line">192.168.10.107 hadoop107</span><br><span class="line">192.168.10.108 hadoop108</span><br></pre></td></tr></table></figure>

<p>（2）如果操作系统是window10，先拷贝出来，修改保存以后，再覆盖即可</p>
<p>​        （a）进入C:WindowsSystem32driversetc路径</p>
<p>​        （b）拷贝hosts文件到桌面</p>
<p>​        （c）打开桌面hosts文件并添加如下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">192.168.10.100 hadoop100</span><br><span class="line">192.168.10.101 hadoop101</span><br><span class="line">192.168.10.102 hadoop102</span><br><span class="line">192.168.10.103 hadoop103</span><br><span class="line">192.168.10.104 hadoop104</span><br><span class="line">192.168.10.105 hadoop105</span><br><span class="line">192.168.10.106 hadoop106</span><br><span class="line">192.168.10.107 hadoop107</span><br><span class="line">192.168.10.108 hadoop108</span><br></pre></td></tr></table></figure>

<p>（d）将桌面hosts文件覆盖C:WindowsSystem32driversetc路径hosts文件</p>
<h2 id="2-3-在hadoop102安装JDK"><a href="#2-3-在hadoop102安装JDK" class="headerlink" title="2.3 在hadoop102安装JDK"></a>2.3 在hadoop102安装JDK</h2><p><strong>1）卸载现有JDK</strong></p>
<p>注意：安装JDK前，一定确保提前删除了虚拟机自带的JDK。详细步骤见问文档3.1节中卸载JDK步骤。</p>
<p><strong>2）用XShell传输工具将JDK导入到opt目录下面的software文件夹下面</strong></p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229200100123.png" alt="image-20211229200100123"></p>
<p><strong>3）在Linux系统下的opt目录中查看软件包是否导入成功</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ ls /opt/software/</span><br></pre></td></tr></table></figure>

<p>看到如下结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdk-8u212-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>

<p><strong>4）解压JDK到/opt/module目录下</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 software]$ tar -zxvf jdk-8u212-linux-x64.tar.gz -C /opt/module/</span><br></pre></td></tr></table></figure>

<p><strong>5）配置JDK环境变量</strong></p>
<p>​    （1）新建/etc/profile.d/my_env.sh文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo vim /etc/profile.d/my_env.sh</span><br></pre></td></tr></table></figure>

<p>添加如下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">JAVA_HOME</span></span><br><span class="line"></span><br><span class="line">export JAVA_HOME=/opt/module/jdk1.8.0_212</span><br><span class="line"></span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure>

<p>​    （2）保存后退出 :wq</p>
<p>​    （3）source一下/etc/profile文件，让新的环境变量PATH生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ source /etc/profile</span><br></pre></td></tr></table></figure>

<p><strong>6）测试JDK是否安装成功</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ java -version</span><br></pre></td></tr></table></figure>

<p>如果能看到以下结果，则代表Java安装成功。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java version "1.8.0_212"</span><br></pre></td></tr></table></figure>

<p>注意：重启（如果java -version可以用就不用重启）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo reboot</span><br></pre></td></tr></table></figure>

<h2 id="2-4-在hadoop102安装Hadoop"><a href="#2-4-在hadoop102安装Hadoop" class="headerlink" title="2.4 在hadoop102安装Hadoop"></a>2.4 在hadoop102安装Hadoop</h2><p>Hadoop下载地址：<a href="https://archive.apache.org/dist/hadoop/common/hadoop-2.7.2/" target="_blank" rel="noopener">https://archive.apache.org/dist/hadoop/common/hadoop-3.1.3/</a></p>
<p><strong>1）用XShell文件传输工具将hadoop-3.1.3.tar.gz导入到opt目录下面的software文件夹下面</strong></p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229200421131.png" alt="image-20211229200421131"></p>
<p><strong>2）进入到Hadoop安装包路径下</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ cd /opt/software/</span><br></pre></td></tr></table></figure>

<p><strong>3）解压安装文件到/opt/module下面</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 software]$ tar -zxvf hadoop-3.1.3.tar.gz -C /opt/module/</span><br></pre></td></tr></table></figure>

<p><strong>4）查看是否解压成功</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 software]$ ls /opt/module/</span><br><span class="line"></span><br><span class="line">hadoop-3.1.3</span><br></pre></td></tr></table></figure>

<p><strong>5）将Hadoop添加到环境变量</strong></p>
<p>​    （1）获取Hadoop安装路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ pwd</span><br><span class="line">/opt/module/hadoop-3.1.3</span><br></pre></td></tr></table></figure>

<p>​    （2）打开/etc/profile.d/my_env.sh文件</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">atguigu@</span>hadoop102 hadoop<span class="number">-3.1</span><span class="number">.3</span>]$ sudo vim /etc/profile.d/my_env.sh</span><br></pre></td></tr></table></figure>

<p>在my_env.sh文件末尾添加如下内容：（shift+g）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">HADOOP_HOME</span></span><br><span class="line">export HADOOP_HOME=/opt/module/hadoop-3.1.3</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/bin</span><br><span class="line">export PATH=$PATH:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure>

<p>保存并退出： :wq</p>
<p>​    （3）让修改后的文件生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ source /etc/profile</span><br></pre></td></tr></table></figure>

<p><strong>6）测试是否安装成功</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ hadoop version</span><br><span class="line">Hadoop 3.1.3</span><br></pre></td></tr></table></figure>

<p><strong>7）重启（如果Hadoop命令不能用再重启虚拟机）</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ sudo reboot</span><br></pre></td></tr></table></figure>

<h2 id="2-5-Hadoop目录结构"><a href="#2-5-Hadoop目录结构" class="headerlink" title="2.5 Hadoop目录结构"></a>2.5 Hadoop目录结构</h2><p><strong>1）查看Hadoop目录结构</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ ll</span><br><span class="line">总用量 52</span><br><span class="line">drwxr-xr-x. 2 atguigu atguigu  4096 5月  22 2017 bin</span><br><span class="line">drwxr-xr-x. 3 atguigu atguigu  4096 5月  22 2017 etc</span><br><span class="line">drwxr-xr-x. 2 atguigu atguigu  4096 5月  22 2017 include</span><br><span class="line">drwxr-xr-x. 3 atguigu atguigu  4096 5月  22 2017 lib</span><br><span class="line">drwxr-xr-x. 2 atguigu atguigu  4096 5月  22 2017 libexec</span><br><span class="line">-rw-r--r--. 1 atguigu atguigu 15429 5月  22 2017 LICENSE.txt</span><br><span class="line">-rw-r--r--. 1 atguigu atguigu  101 5月  22 2017 NOTICE.txt</span><br><span class="line">-rw-r--r--. 1 atguigu atguigu  1366 5月  22 2017 README.txt</span><br><span class="line">drwxr-xr-x. 2 atguigu atguigu  4096 5月  22 2017 sbin</span><br><span class="line">drwxr-xr-x. 4 atguigu atguigu  4096 5月  22 2017 share</span><br></pre></td></tr></table></figure>

<p><strong>2）重要目录</strong></p>
<p>（1）bin目录：存放对Hadoop相关服务（hdfs，yarn，mapred）进行操作的脚本</p>
<p>（2）etc目录：Hadoop的配置文件目录，存放Hadoop的配置文件</p>
<p>（3）lib目录：存放Hadoop的本地库（对数据进行压缩解压缩功能）</p>
<p>（4）sbin目录：存放启动或停止Hadoop相关服务的脚本</p>
<p>（5）share目录：存放Hadoop的依赖jar包、文档、和官方案例</p>
<h1 id="第3章-Hadoop运行模式"><a href="#第3章-Hadoop运行模式" class="headerlink" title="第3章 Hadoop运行模式"></a>第3章 Hadoop运行模式</h1><p>1）Hadoop官方网站：<a href="http://hadoop.apache.org/" target="_blank" rel="noopener">http://hadoop.apache.org/</a></p>
<p>2）Hadoop运行模式包括：本地模式、伪分布式模式以及完全分布式模式。</p>
<ul>
<li><p>本地模式：单机运行，只是用来演示一下官方案例。生产环境不用。</p>
</li>
<li><p>伪分布式模式：也是单机运行，但是具备Hadoop集群的所有功能，一台服务器模拟一个分布式的环境。个别缺钱的公司用来测试，生产环境不用。</p>
</li>
<li><p>完全分布式模式：多台服务器组成分布式环境。生产环境使用。</p>
</li>
</ul>
<h2 id="3-1-本地运行模式（官方WordCount）"><a href="#3-1-本地运行模式（官方WordCount）" class="headerlink" title="3.1 本地运行模式（官方WordCount）"></a>3.1 本地运行模式（官方WordCount）</h2><p><strong>1）创建在hadoop-3.1.3文件下面创建一个wcinput文件夹</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ mkdir wcinput</span><br></pre></td></tr></table></figure>

<p><strong>2）在wcinput文件下创建一个word.txt文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ cd wcinput</span><br></pre></td></tr></table></figure>

<p><strong>3）编辑word.txt文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 wcinput]$ vim word.txt</span><br></pre></td></tr></table></figure>

<p>在文件中输入如下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hadoop yarn</span><br><span class="line">hadoop mapreduce</span><br><span class="line">atguigu</span><br><span class="line">atguigu</span><br></pre></td></tr></table></figure>

<p>保存退出：:wq</p>
<p><strong>4）回到Hadoop目录/opt/module/hadoop-3.1.3</strong></p>
<p><strong>5）执行程序</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount wcinput wcoutput</span><br></pre></td></tr></table></figure>

<p><strong>6）查看结果</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ cat wcoutput/part-r-00000</span><br></pre></td></tr></table></figure>

<p>看到如下结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">atguigu 2</span><br><span class="line">hadoop  2</span><br><span class="line">mapreduce    1</span><br><span class="line">yarn   1</span><br></pre></td></tr></table></figure>

<h2 id="3-2-完全分布式运行模式（开发重点）"><a href="#3-2-完全分布式运行模式（开发重点）" class="headerlink" title="3.2 完全分布式运行模式（开发重点）"></a>3.2 完全分布式运行模式（开发重点）</h2><p>分析：</p>
<p>​    1）准备3台客户机（关闭防火墙、静态IP、主机名称）</p>
<p>​    2）安装JDK</p>
<p>​    3）配置环境变量</p>
<p>​    4）安装Hadoop</p>
<p>​    5）配置环境变量</p>
<p>6）配置集群</p>
<p>7）单点启动</p>
<p>​    8）配置ssh</p>
<p>​    9）群起并测试集群</p>
<h3 id="3-2-1-虚拟机准备"><a href="#3-2-1-虚拟机准备" class="headerlink" title="3.2.1 虚拟机准备"></a>3.2.1 虚拟机准备</h3><p>详见2.1、2.2两节。</p>
<h3 id="3-2-2-编写集群分发脚本xsync"><a href="#3-2-2-编写集群分发脚本xsync" class="headerlink" title="3.2.2 编写集群分发脚本xsync"></a>3.2.2 编写集群分发脚本xsync</h3><p><strong>1）scp（secure copy）安全拷贝</strong></p>
<p>（1）scp定义</p>
<p>scp可以实现服务器与服务器之间的数据拷贝。（from server1 to server2）</p>
<p>（2）基本语法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp  -r   $pdir/$fname    $user@$host:$pdir/$fname</span><br></pre></td></tr></table></figure>

<p>命令  递归   要拷贝的文件路径/名称  目的地用户@主机:目的地路径/名称</p>
<p>（3）案例实操</p>
<p>前提：在hadoop102、hadoop103、hadoop104都已经创建好的/opt/module、      /opt/software两个目录，并且已经把这两个目录修改为atguigu:atguigu</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo chown atguigu:atguigu -R /opt/module</span><br></pre></td></tr></table></figure>

<p>​        （a）在hadoop102上，将hadoop102中/opt/module/jdk1.8.0_212目录拷贝到hadoop103上。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ scp -r /opt/module/jdk1.8.0_212 atguigu@hadoop103:/opt/module</span><br></pre></td></tr></table></figure>

<p>​        （b）在hadoop103上，将hadoop102中/opt/module/hadoop-3.1.3目录拷贝到hadoop103上。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ scp -r atguigu@hadoop102:/opt/module/hadoop-3.1.3 /opt/module/</span><br></pre></td></tr></table></figure>

<p>​        （c）在hadoop103上操作，将hadoop102中/opt/module目录下所有目录拷贝到hadoop104上。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 opt]$ scp -r atguigu@hadoop102:/opt/module/ atguigu@hadoop104:/opt/module</span><br></pre></td></tr></table></figure>

<p><strong>2）rsync远程同步工具</strong></p>
<p>rsync主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。</p>
<p>rsync和scp区别：用rsync做文件的复制要比scp的速度快，rsync只对差异文件做更新。scp是把所有文件都复制过去。</p>
<p>​    （1）基本语法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync   -av   $pdir/$fname   $user@$host:$pdir/$fname</span><br></pre></td></tr></table></figure>

<p>命令  选项参数  要拷贝的文件路径/名称  目的地用户@主机:目的地路径/名称</p>
<p>​     选项参数说明</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-a</td>
<td>归档拷贝</td>
</tr>
<tr>
<td>-v</td>
<td>显示复制过程</td>
</tr>
</tbody></table>
<p>（2）案例实操</p>
<p>​        （a）删除hadoop103中/opt/module/hadoop-3.1.3/wcinput</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 hadoop-3.1.3]$ rm -rf wcinput/</span><br></pre></td></tr></table></figure>

<p>​        （b）同步hadoop102中的/opt/module/hadoop-3.1.3到hadoop103</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 module]$ rsync -av hadoop-3.1.3/ atguigu@hadoop103:/opt/module/hadoop-3.1.3/</span><br></pre></td></tr></table></figure>

<p><strong>3）xsync集群分发脚本</strong></p>
<p>（1）需求：循环复制文件到所有节点的相同目录下</p>
<p>（2）需求分析：</p>
<p>​        （a）rsync命令原始拷贝：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync  -av   /opt/module  	 atguigu@hadoop103:/opt/</span><br></pre></td></tr></table></figure>

<p>​        （b）期望脚本：</p>
<p>xsync要同步的文件名称</p>
<p>​        （c）期望脚本在任何路径都能使用（脚本放在声明了全局环境变量的路径）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ echo $PATH</span><br><span class="line"></span><br><span class="line">/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/atguigu/.local/bin:/home/atguigu/bin:/opt/module/jdk1.8.0_212/bin</span><br></pre></td></tr></table></figure>

<p>（3）脚本实现</p>
<p>​        （a）在/home/atguigu/bin目录下创建xsync文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 opt]$ cd /home/atguigu</span><br><span class="line">[atguigu@hadoop102 ~]$ mkdir bin</span><br><span class="line">[atguigu@hadoop102 ~]$ cd bin</span><br><span class="line">[atguigu@hadoop102 bin]$ vim xsync</span><br></pre></td></tr></table></figure>

<p>在该文件中编写如下代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">1. 判断参数个数</span></span><br><span class="line">if [ $# -lt 1 ]</span><br><span class="line">then</span><br><span class="line">    echo Not Enough Arguement!</span><br><span class="line">    exit;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">2. 遍历集群所有机器</span></span><br><span class="line">for host in hadoop102 hadoop103 hadoop104</span><br><span class="line">do</span><br><span class="line">    echo ====================  $host  ====================</span><br><span class="line">    #3. 遍历所有目录，挨个发送</span><br><span class="line"></span><br><span class="line">    for file in $@</span><br><span class="line">    do</span><br><span class="line">        #4. 判断文件是否存在</span><br><span class="line">        if [ -e $file ]</span><br><span class="line">            then</span><br><span class="line">                #5. 获取父目录</span><br><span class="line">                pdir=$(cd -P $(dirname $file); pwd)</span><br><span class="line"></span><br><span class="line">                #6. 获取当前文件的名称</span><br><span class="line">                fname=$(basename $file)</span><br><span class="line">                ssh $host "mkdir -p $pdir"</span><br><span class="line">                rsync -av $pdir/$fname $host:$pdir</span><br><span class="line">            else</span><br><span class="line">                echo $file does not exists!</span><br><span class="line">        fi</span><br><span class="line">    done</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>​        （b）修改脚本 xsync 具有执行权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 bin]$ chmod +x xsync</span><br></pre></td></tr></table></figure>

<p>​        （c）测试脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ xsync /home/atguigu/bin</span><br></pre></td></tr></table></figure>

<p>​        （d）将脚本复制到/bin中，以便全局调用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 bin]$ sudo cp xsync /bin/</span><br></pre></td></tr></table></figure>

<p>​        （e）同步环境变量配置（root所有者）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo ./bin/xsync /etc/profile.d/my_env.sh</span><br></pre></td></tr></table></figure>

<p>注意：如果用了sudo，那么xsync一定要给它的路径补全。</p>
<p>让环境变量生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 bin]$ source /etc/profile</span><br><span class="line">[atguigu@hadoop104 opt]$ source /etc/profile</span><br></pre></td></tr></table></figure>



<h3 id="3-2-3-SSH无密登录配置"><a href="#3-2-3-SSH无密登录配置" class="headerlink" title="3.2.3 SSH无密登录配置"></a>3.2.3 SSH无密登录配置</h3><p><strong>1）配置ssh</strong></p>
<p>（1）基本语法</p>
<p>ssh另一台电脑的IP地址</p>
<p>（2）ssh连接时出现Host key verification failed的解决方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ ssh hadoop103</span><br></pre></td></tr></table></figure>

<p>如果出现如下内容</p>
<p>Are you sure you want to continue connecting (yes/no)? </p>
<p>输入yes，并回车</p>
<p>（3）退回到hadoop102</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ exit</span><br></pre></td></tr></table></figure>

<p><strong>2）无密钥配置</strong></p>
<p>（1）免密登录原理 </p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20220125112103197.png" alt="image-20220125112103197"></p>
<p>（2）生成公钥和私钥</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 .ssh]$ pwd</span><br><span class="line">/home/atguigu/.ssh</span><br><span class="line">[atguigu@hadoop102 .ssh]$ ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>然后敲（三个回车），就会生成两个文件id_rsa（私钥）、id_rsa.pub（公钥）</p>
<p>（3）将公钥拷贝到要免密登录的目标机器上</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 .ssh]$ ssh-copy-id hadoop102</span><br><span class="line">[atguigu@hadoop102 .ssh]$ ssh-copy-id hadoop103</span><br><span class="line">[atguigu@hadoop102 .ssh]$ ssh-copy-id hadoop104</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>还需要在hadoop103上采用atguigu账号配置一下无密登录到hadoop102、hadoop103、hadoop104服务器上。</p>
<p>还需要在hadoop104上采用atguigu账号配置一下无密登录到hadoop102、hadoop103、hadoop104服务器上。</p>
<p>还需要在hadoop102上采用root账号，配置一下无密登录到hadoop102、hadoop103、hadoop104；</p>
<p><strong>3）.ssh文件夹下（~/.ssh）的文件功能解释</strong></p>
<table>
<thead>
<tr>
<th>known_hosts</th>
<th>记录ssh访问过计算机的公钥（public key）</th>
</tr>
</thead>
<tbody><tr>
<td>id_rsa</td>
<td>生成的私钥</td>
</tr>
<tr>
<td>id_rsa.pub</td>
<td>生成的公钥</td>
</tr>
<tr>
<td>authorized_keys</td>
<td>存放授权过的无密登录服务器公钥</td>
</tr>
</tbody></table>
<h3 id="3-2-4-集群配置"><a href="#3-2-4-集群配置" class="headerlink" title="3.2.4 集群配置"></a>3.2.4 集群配置</h3><p><strong>1）集群部署规划</strong></p>
<p>​    注意：</p>
<p>NameNode和SecondaryNameNode不要安装在同一台服务器</p>
<p>ResourceManager也很消耗内存，不要和NameNode、SecondaryNameNode配置在同一台机器上。</p>
<table>
<thead>
<tr>
<th></th>
<th>hadoop102</th>
<th>hadoop103</th>
<th>hadoop104</th>
</tr>
</thead>
<tbody><tr>
<td>HDFS</td>
<td>NameNodeDataNode</td>
<td>DataNode</td>
<td>SecondaryNameNodeDataNode</td>
</tr>
<tr>
<td>YARN</td>
<td>NodeManager</td>
<td>ResourceManagerNodeManager</td>
<td>NodeManager</td>
</tr>
</tbody></table>
<p><strong>2）配置文件说明</strong></p>
<p>Hadoop配置文件分两类：默认配置文件和自定义配置文件，只有用户想修改某一默认配置值时，才需要修改自定义配置文件，更改相应属性值。</p>
<p>（1）默认配置文件：</p>
<table>
<thead>
<tr>
<th>要获取的默认文件</th>
<th>文件存放在Hadoop的jar包中的位置</th>
</tr>
</thead>
<tbody><tr>
<td>[core-default.xml]</td>
<td>hadoop-common-3.1.3.jar/core-default.xml</td>
</tr>
<tr>
<td>[hdfs-default.xml]</td>
<td>hadoop-hdfs-3.1.3.jar/hdfs-default.xml</td>
</tr>
<tr>
<td>[yarn-default.xml]</td>
<td>hadoop-yarn-common-3.1.3.jar/yarn-default.xml</td>
</tr>
<tr>
<td>[mapred-default.xml]</td>
<td>hadoop-mapreduce-client-core-3.1.3.jar/mapred-default.xml</td>
</tr>
</tbody></table>
<p>（2）自定义配置文件：</p>
<p>​    core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml四个配置文件存放在$HADOOP_HOME/etc/hadoop这个路径上，用户可以根据项目需求重新进行修改配置。</p>
<p><strong>3）配置集群</strong></p>
<p>（1）核心配置文件</p>
<p>配置core-site.xml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ cd $HADOOP_HOME/etc/hadoop</span><br><span class="line">[atguigu@hadoop102 hadoop]$ vim core-site.xml</span><br></pre></td></tr></table></figure>

<p>文件内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定NameNode的地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop102:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 指定hadoop数据的存储目录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/module/hadoop-3.1.3/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置HDFS网页登录使用的静态用户为atguigu --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.http.staticuser.user<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>atguigu<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>（2）HDFS配置文件</p>
<p>配置hdfs-site.xml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ vim hdfs-site.xml</span><br></pre></td></tr></table></figure>

<p>文件内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- nn web端访问地址--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop102:9870<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 2nn web端访问地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop104:9868<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>（3）YARN配置文件</p>
<p>配置yarn-site.xml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ vim yarn-site.xml</span><br></pre></td></tr></table></figure>

<p>文件内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定MR走shuffle --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 指定ResourceManager的地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop103<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 环境变量的继承 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.env-whitelist<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>（4）MapReduce配置文件</p>
<p>配置mapred-site.xml</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ vim mapred-site.xml</span><br></pre></td></tr></table></figure>

<p>文件内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>4）在集群上分发配置好的Hadoop配置文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ xsync /opt/module/hadoop-3.1.3/etc/hadoop/</span><br></pre></td></tr></table></figure>

<p><strong>5）去103和104上查看文件分发情况</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml</span><br><span class="line">[atguigu@hadoop104 ~]$ cat /opt/module/hadoop-3.1.3/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure>

<h3 id="3-2-5-群起集群"><a href="#3-2-5-群起集群" class="headerlink" title="3.2.5 群起集群"></a>3.2.5 群起集群</h3><p><strong>1）配置workers</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ vim /opt/module/hadoop-3.1.3/etc/hadoop/workers</span><br></pre></td></tr></table></figure>

<p>在该文件中增加如下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop102</span><br><span class="line">hadoop103</span><br><span class="line">hadoop104</span><br></pre></td></tr></table></figure>

<p>注意：该文件中添加的内容结尾不允许有空格，文件中不允许有空行。</p>
<p>同步所有节点配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ xsync /opt/module/hadoop-3.1.3/etc</span><br></pre></td></tr></table></figure>

<p><strong>2）启动集群</strong></p>
<p>​    （1）如果集群是第一次启动，需要在hadoop102节点格式化NameNode（注意：格式化NameNode，会产生新的集群id，导致NameNode和DataNode的集群id不一致，集群找不到已往数据。如果集群在运行过程中报错，需要重新格式化NameNode的话，一定要先停止namenode和datanode进程，并且要删除所有机器的data和logs目录，然后再进行格式化。）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ hdfs namenode -format</span><br></pre></td></tr></table></figure>

<p>（2）启动HDFS</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ sbin/start-dfs.sh</span><br></pre></td></tr></table></figure>

<p>（3）在配置了ResourceManager的节点（hadoop103）启动YARN</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 hadoop-3.1.3]$ sbin/start-yarn.sh</span><br></pre></td></tr></table></figure>

<p>（4）Web端查看HDFS的NameNode</p>
<p>​        （a）浏览器中输入：<a href="http://hadoop102:9870" target="_blank" rel="noopener">http://hadoop102:9870</a></p>
<p>​        （b）查看HDFS上存储的数据信息</p>
<p>（5）Web端查看YARN的ResourceManager</p>
<p>​        （a）浏览器中输入：<a href="http://hadoop103:8088" target="_blank" rel="noopener">http://hadoop103:8088</a></p>
<p>​        （b）查看YARN上运行的Job信息</p>
<p><strong>3）集群基本测试</strong></p>
<p>（1）上传文件到集群</p>
<p>上传小文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ hadoop fs -mkdir /input</span><br><span class="line">[atguigu@hadoop102 ~]$ hadoop fs -put $HADOOP_HOME/wcinput/word.txt /input</span><br></pre></td></tr></table></figure>

<p>上传大文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ hadoop fs -put  /opt/software/jdk-8u212-linux-x64.tar.gz  /</span><br></pre></td></tr></table></figure>

<p>（2）上传文件后查看文件存放在什么位置</p>
<p>查看HDFS文件存储路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 subdir0]$ pwd</span><br><span class="line">/opt/module/hadoop-3.1.3/data/dfs/data/current/BP-1436128598-192.168.10.102-1610603650062/current/finalized/subdir0/subdir0</span><br></pre></td></tr></table></figure>

<p>查看HDFS在磁盘存储文件内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 subdir0]$ cat blk_1073741825</span><br><span class="line">hadoop yarn</span><br><span class="line">hadoop mapreduce </span><br><span class="line">atguigu</span><br><span class="line">atguigu</span><br></pre></td></tr></table></figure>

<p>（3）拼接</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-rw-rw-r--. 1 atguigu atguigu 134217728 5月 23 16:01 blk_1073741836</span><br><span class="line">-rw-rw-r--. 1 atguigu atguigu  1048583 5月 23 16:01 blk_1073741836_1012.meta</span><br><span class="line">-rw-rw-r--. 1 atguigu atguigu  63439959 5月 23 16:01 blk_1073741837</span><br><span class="line">-rw-rw-r--. 1 atguigu atguigu   495635 5月 23 16:01 blk_1073741837_1013.meta</span><br><span class="line">[atguigu@hadoop102 subdir0]$ cat blk_1073741836&gt;&gt;tmp.tar.gz</span><br><span class="line">[atguigu@hadoop102 subdir0]$ cat blk_1073741837&gt;&gt;tmp.tar.gz</span><br><span class="line">[atguigu@hadoop102 subdir0]$ tar -zxvf tmp.tar.gz</span><br></pre></td></tr></table></figure>

<p><strong>（4）下载</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop104 software]$ hadoop fs -get /jdk-8u212-linux-x64.tar.gz ./</span><br></pre></td></tr></table></figure>

<p><strong>（5）执行wordcount程序</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount /input /output</span><br></pre></td></tr></table></figure>

<h3 id="3-2-6-配置历史服务器"><a href="#3-2-6-配置历史服务器" class="headerlink" title="3.2.6 配置历史服务器"></a>3.2.6 配置历史服务器</h3><p>为了查看程序的历史运行情况，需要配置一下历史服务器。具体配置步骤如下：</p>
<p><strong>1）配置mapred-site.xml</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ vim mapred-site.xml</span><br></pre></td></tr></table></figure>

<p>在该文件里面增加如下配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 历史服务器端地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop102:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 历史服务器web端地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop102:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2）分发配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ xsync $HADOOP_HOME/etc/hadoop/mapred-site.xml</span><br></pre></td></tr></table></figure>

<p><strong>3）在hadoop102启动历史服务器</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ mapred --daemon start historyserver</span><br></pre></td></tr></table></figure>

<p><strong>4）查看历史服务器是否启动</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ jps</span><br></pre></td></tr></table></figure>

<p><strong>5）查看JobHistory</strong></p>
<p><a href="http://hadoop102:19888/jobhistory" target="_blank" rel="noopener">http://hadoop102:19888/jobhistory</a></p>
<h3 id="3-2-7-配置日志的聚集"><a href="#3-2-7-配置日志的聚集" class="headerlink" title="3.2.7 配置日志的聚集"></a>3.2.7 配置日志的聚集</h3><p>日志聚集概念：应用运行完成以后，将程序运行日志信息上传到HDFS系统上。</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230113618434.png" alt="image-20211230113618434"></p>
<p>日志聚集功能好处：可以方便的查看到程序运行详情，方便开发调试。</p>
<p>注意：开启日志聚集功能，需要重新启动NodeManager 、ResourceManager和HistoryServer。</p>
<p>开启日志聚集功能具体步骤如下：</p>
<p><strong>1）配置yarn-site.xml</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ vim yarn-site.xml</span><br></pre></td></tr></table></figure>

<p>在该文件里面增加如下配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启日志聚集功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置日志聚集服务器地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log.server.url<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://hadoop102:19888/jobhistory/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置日志保留时间为7天 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2）分发配置</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop]$ xsync $HADOOP_HOME/etc/hadoop/yarn-site.xml</span><br></pre></td></tr></table></figure>

<p><strong>3）关闭NodeManager 、ResourceManager和HistoryServer</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 hadoop-3.1.3]$ sbin/stop-yarn.sh</span><br><span class="line">[atguigu@hadoop103 hadoop-3.1.3]$ mapred --daemon stop historyserver</span><br></pre></td></tr></table></figure>

<p><strong>4）启动NodeManager 、ResourceManage和HistoryServer</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ start-yarn.sh</span><br><span class="line">[atguigu@hadoop102 ~]$ mapred --daemon start historyserver</span><br></pre></td></tr></table></figure>

<p><strong>5）删除HDFS上已经存在的输出文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ hadoop fs -rm -r /output</span><br></pre></td></tr></table></figure>

<p><strong>6）执行WordCount程序</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount /input /output</span><br></pre></td></tr></table></figure>

<p><strong>7）查看日志</strong></p>
<p>​    （1）历史服务器地址</p>
<p><a href="http://hadoop102:19888/jobhistory" target="_blank" rel="noopener">http://hadoop102:19888/jobhistory</a></p>
<p>​    （2）历史任务列表</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229203019881.png" alt="image-20211229203019881"> </p>
<p>​    （3）查看任务运行日志</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229203032281.png" alt="image-20211229203032281"> </p>
<p>​    （4）运行日志详情</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211229203041582.png" alt="image-20211229203041582"> </p>
<h3 id="3-2-8-集群启动-停止方式总结"><a href="#3-2-8-集群启动-停止方式总结" class="headerlink" title="3.2.8 集群启动/停止方式总结"></a>3.2.8 集群启动/停止方式总结</h3><p><strong>1）各个模块分开启动/停止（配置ssh是前提）常用</strong></p>
<p>​    （1）整体启动/停止HDFS</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh/stop-dfs.sh</span><br></pre></td></tr></table></figure>

<p>​    （2）整体启动/停止YARN</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start-yarn.sh/stop-yarn.sh</span><br></pre></td></tr></table></figure>

<p><strong>2）各个服务组件逐一启动/停止</strong></p>
<p>​    （1）分别启动/停止HDFS组件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs --daemon start/stop namenode/datanode/secondarynamenode</span><br></pre></td></tr></table></figure>

<p>​    （2）启动/停止YARN</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn --daemon start/stop  resourcemanager/nodemanager</span><br></pre></td></tr></table></figure>

<h3 id="3-2-9-编写Hadoop集群常用脚本"><a href="#3-2-9-编写Hadoop集群常用脚本" class="headerlink" title="3.2.9 编写Hadoop集群常用脚本"></a>3.2.9 编写Hadoop集群常用脚本</h3><p><strong>1）Hadoop集群启停脚本（包含HDFS，Yarn，Historyserver）：myhadoop.sh</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ cd /home/atguigu/bin</span><br><span class="line">[atguigu@hadoop102 bin]$ vim myhadoop.sh</span><br></pre></td></tr></table></figure>

<p>输入如下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ $# -lt 1 ]</span><br><span class="line">then</span><br><span class="line">    echo "No Args Input..."</span><br><span class="line">    exit ;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">"start")</span><br><span class="line">        echo " =================== 启动 hadoop集群 ==================="</span><br><span class="line"></span><br><span class="line">        echo " --------------- 启动 hdfs ---------------"</span><br><span class="line">        ssh hadoop102 "/opt/module/hadoop-3.1.3/sbin/start-dfs.sh"</span><br><span class="line">        echo " --------------- 启动 yarn ---------------"</span><br><span class="line">        ssh hadoop103 "/opt/module/hadoop-3.1.3/sbin/start-yarn.sh"</span><br><span class="line">        echo " --------------- 启动 historyserver ---------------"</span><br><span class="line">        ssh hadoop102 "/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver"</span><br><span class="line">;;</span><br><span class="line">"stop")</span><br><span class="line">        echo " =================== 关闭 hadoop集群 ==================="</span><br><span class="line"></span><br><span class="line">        echo " --------------- 关闭 historyserver ---------------"</span><br><span class="line">        ssh hadoop102 "/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver"</span><br><span class="line">        echo " --------------- 关闭 yarn ---------------"</span><br><span class="line">        ssh hadoop103 "/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh"</span><br><span class="line">        echo " --------------- 关闭 hdfs ---------------"</span><br><span class="line">        ssh hadoop102 "/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh"</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">    echo "Input Args Error..."</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>保存后退出，然后赋予脚本执行权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 bin]$ chmod +x myhadoop.sh</span><br></pre></td></tr></table></figure>

<p><strong>2）查看三台服务器Java进程脚本：jpsall</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ cd /home/atguigu/bin</span><br><span class="line">[atguigu@hadoop102 bin]$ vim jpsall</span><br></pre></td></tr></table></figure>

<p>输入如下内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">for host in hadoop102 hadoop103 hadoop104</span><br><span class="line">do</span><br><span class="line">        echo =============== $host ===============</span><br><span class="line">        ssh $host jps </span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>保存后退出，然后赋予脚本执行权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 bin]$ chmod +x jpsall</span><br></pre></td></tr></table></figure>

<p><strong>3）分发/home/atguigu/bin目录，保证自定义脚本在三台机器上都可以使用</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ xsync /home/atguigu/bin/</span><br></pre></td></tr></table></figure>

<h3 id="3-2-10-常用端口号说明"><a href="#3-2-10-常用端口号说明" class="headerlink" title="3.2.10 常用端口号说明"></a>3.2.10 常用端口号说明</h3><table>
<thead>
<tr>
<th>端口名称</th>
<th>Hadoop2.x</th>
<th>Hadoop3.x</th>
</tr>
</thead>
<tbody><tr>
<td>NameNode内部通信端口</td>
<td>8020 / 9000</td>
<td>8020 / 9000/9820</td>
</tr>
<tr>
<td>NameNode HTTP UI</td>
<td>50070</td>
<td>9870</td>
</tr>
<tr>
<td>MapReduce查看执行任务端口</td>
<td>8088</td>
<td>8088</td>
</tr>
<tr>
<td>历史服务器通信端口</td>
<td>19888</td>
<td>19888</td>
</tr>
</tbody></table>
<h3 id="3-2-11-集群时间同步"><a href="#3-2-11-集群时间同步" class="headerlink" title="3.2.11 集群时间同步"></a>3.2.11 集群时间同步</h3><p>如果服务器在公网环境（能连接外网），可以不采用集群时间同步，因为服务器会定期和公网时间进行校准；</p>
<p>如果服务器在内网环境，必须要配置集群时间同步，否则时间久了，会产生时间偏差，导致集群执行任务时间不同步。</p>
<p><strong>1）需求</strong></p>
<p>找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步，生产环境根据任务对时间的准确程度要求周期同步。测试环境为了尽快看到效果，采用1分钟同步一次。</p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230113643329.png" alt="image-20211230113643329"></p>
<p><strong>2）时间服务器配置（必须root用户）</strong></p>
<p>（1）查看所有节点ntpd服务状态和开机自启动状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo systemctl status ntpd</span><br><span class="line">[atguigu@hadoop102 ~]$ sudo systemctl start ntpd</span><br><span class="line">[atguigu@hadoop102 ~]$ sudo systemctl is-enabled ntpd</span><br></pre></td></tr></table></figure>

<p>（2）修改hadoop102的ntp.conf配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo vim /etc/ntp.conf</span><br></pre></td></tr></table></figure>

<p>修改内容如下</p>
<p>​        （a）修改1（授权192.168.10.0-192.168.10.255网段上的所有机器可以从这台机器上查询和同步时间）</p>
<p>#restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap</p>
<p>为restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap</p>
<p>​        （b）修改2（集群在局域网中，不使用其他互联网上的时间）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server 0.centos.pool.ntp.org iburst</span><br><span class="line">server 1.centos.pool.ntp.org iburst</span><br><span class="line">server 2.centos.pool.ntp.org iburst</span><br><span class="line">server 3.centos.pool.ntp.org iburst</span><br></pre></td></tr></table></figure>

<p>为</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">server 0.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 1.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 2.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 3.centos.pool.ntp.org iburst</span></span><br></pre></td></tr></table></figure>

<p>​        （c）添加3（当该节点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中的其他节点提供时间同步）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server 127.127.1.0</span><br><span class="line">fudge 127.127.1.0 stratum 10</span><br></pre></td></tr></table></figure>

<p>​        （d）修改hadoop102的/etc/sysconfig/ntpd 文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo vim /etc/sysconfig/ntpd</span><br></pre></td></tr></table></figure>

<p>增加内容如下（让硬件时间与系统时间一起同步）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SYNC_HWCLOCK=yes</span><br></pre></td></tr></table></figure>

<p>​        （e）重新启动ntpd服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo systemctl start ntpd</span><br></pre></td></tr></table></figure>

<p>​        （f）设置ntpd服务开机启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 ~]$ sudo systemctl enable ntpd</span><br></pre></td></tr></table></figure>

<p><strong>3）其他机器配置（必须root用户）</strong></p>
<p>（1）关闭所有节点上ntp服务和自启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ sudo systemctl stop ntpd</span><br><span class="line">[atguigu@hadoop103 ~]$ sudo systemctl disable ntpd</span><br><span class="line">[atguigu@hadoop104 ~]$ sudo systemctl stop ntpd</span><br><span class="line">[atguigu@hadoop104 ~]$ sudo systemctl disable ntpd</span><br></pre></td></tr></table></figure>

<p>（2）在其他机器配置1分钟与时间服务器同步一次</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ sudo crontab -e</span><br></pre></td></tr></table></figure>

<p>编写定时任务如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * /usr/sbin/ntpdate hadoop102</span><br></pre></td></tr></table></figure>

<p>（3）修改任意机器时间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ sudo date -s "2021-9-11 11:11:11"</span><br></pre></td></tr></table></figure>

<p>（4）1分钟后查看机器是否与时间服务器同步</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop103 ~]$ sudo date</span><br></pre></td></tr></table></figure>

<h1 id="第4章-常见错误及解决方案"><a href="#第4章-常见错误及解决方案" class="headerlink" title="第4章 常见错误及解决方案"></a>第4章 常见错误及解决方案</h1><p><strong>1）防火墙没关闭、或者没有启动YARN</strong></p>
<p>INFO client.RMProxy: Connecting to ResourceManager at hadoop108/192.168.10.108:8032</p>
<p><strong>2）主机名称配置错误</strong></p>
<p><strong>3）IP地址配置错误</strong></p>
<p><strong>4）ssh没有配置好</strong></p>
<p><strong>5）root用户和atguigu两个用户启动集群不统一</strong></p>
<p><strong>6）配置文件修改不细心</strong></p>
<p><strong>7）不识别主机名称</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java.net.UnknownHostException: hadoop102: hadoop102</span><br><span class="line">        at java.net.InetAddress.getLocalHost(InetAddress.java:<span class="number">1475</span>)</span><br><span class="line">        at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:<span class="number">146</span>)</span><br><span class="line">        at org.apache.hadoop.mapreduce.Job$<span class="number">10</span>.run(Job.java:<span class="number">1290</span>)</span><br><span class="line">        at org.apache.hadoop.mapreduce.Job$<span class="number">10</span>.run(Job.java:<span class="number">1287</span>)</span><br><span class="line">        at java.security.AccessController.doPrivileged(Native Method)</span><br><span class="line">at javax.security.auth.Subject.doAs(Subject.java:<span class="number">415</span>)</span><br></pre></td></tr></table></figure>

<p>解决办法：</p>
<p>​    （1）在/etc/hosts文件中添加192.168.10.102 hadoop102</p>
<p>​    （2）主机名称不要起hadoop  hadoop000等特殊名称</p>
<p><strong>8）DataNode和NameNode进程同时只能工作一个。</strong></p>
<p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/image-20211230113729633.png" alt="image-20211230113729633"></p>
<p><strong>9）执行命令不生效，粘贴Word中命令时，遇到-和长–没区分开。导致命令失效</strong></p>
<p>解决办法：尽量不要粘贴Word中代码。</p>
<p><strong>10）jps发现进程已经没有，但是重新启动集群，提示进程已经开启。</strong></p>
<p>原因是在Linux的根目录下/tmp目录中存在启动的进程临时文件，将集群相关进程删除掉，再重新启动集群。</p>
<p><strong>11）jps不生效</strong></p>
<p>原因：全局变量hadoop java没有生效。解决办法：需要source /etc/profile文件。</p>
<p><strong>12）8088端口连接不上</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[atguigu@hadoop102 桌面]$ cat /etc/hosts</span><br></pre></td></tr></table></figure>

<p>注释掉如下代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">127.0.0.1  localhost localhost.localdomain localhost4 localhost4.localdomain4</span></span><br><span class="line"><span class="meta">#</span><span class="bash">::1     hadoop102</span></span><br></pre></td></tr></table></figure>

<h1 id="面试重点"><a href="#面试重点" class="headerlink" title="面试重点"></a>面试重点</h1><p><img src="/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/27a573d90eac7cbabd2384b162d3eb3.jpg" alt="27a573d90eac7cbabd2384b162d3eb3"></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Rui Zhang
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yoursite.com/2021/12/29/Hadoop%E5%85%A5%E9%97%A8/" title="Hadoop入门">http://yoursite.com/2021/12/29/Hadoop入门/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Hadoop/" rel="tag"># Hadoop</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/29/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A6%82%E8%AE%BA/" rel="prev" title="大数据概论">
      <i class="fa fa-chevron-left"></i> 大数据概论
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/12/31/%E6%BC%AB%E8%B0%88%E6%8B%89%E9%93%BE%E8%A1%A8/" rel="next" title="漫谈拉链表">
      漫谈拉链表 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#第1章-Hadoop概述"><span class="nav-number">1.</span> <span class="nav-text">第1章 Hadoop概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Hadoop是什么"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 Hadoop是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Hadoop发展历史（了解）"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 Hadoop发展历史（了解）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Hadoop三大发行版本（了解）"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 Hadoop三大发行版本（了解）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1）Apache-Hadoop"><span class="nav-number">1.3.1.</span> <span class="nav-text">1）Apache Hadoop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2）Cloudera-Hadoop"><span class="nav-number">1.3.2.</span> <span class="nav-text">2）Cloudera Hadoop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3）Hortonworks-Hadoop"><span class="nav-number">1.3.3.</span> <span class="nav-text">3）Hortonworks Hadoop</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-Hadoop优势（4高）"><span class="nav-number">1.4.</span> <span class="nav-text">1.4 Hadoop优势（4高）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-Hadoop组成（面试重点）"><span class="nav-number">1.5.</span> <span class="nav-text">1.5 Hadoop组成（面试重点）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-1-HDFS架构概述"><span class="nav-number">1.5.1.</span> <span class="nav-text">1.5.1 HDFS架构概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-2-YARN架构概述"><span class="nav-number">1.5.2.</span> <span class="nav-text">1.5.2 YARN架构概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-3-MapReduce架构概述"><span class="nav-number">1.5.3.</span> <span class="nav-text">1.5.3 MapReduce架构概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-4-HDFS、YARN、MapReduce三者关系"><span class="nav-number">1.5.4.</span> <span class="nav-text">1.5.4 HDFS、YARN、MapReduce三者关系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-大数据技术生态体系"><span class="nav-number">1.6.</span> <span class="nav-text">1.6 大数据技术生态体系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-推荐系统框架图"><span class="nav-number">1.7.</span> <span class="nav-text">1.7 推荐系统框架图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第2章-Hadoop运行环境搭建（开发重点）"><span class="nav-number">2.</span> <span class="nav-text">第2章 Hadoop运行环境搭建（开发重点）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-模板虚拟机环境准备"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 模板虚拟机环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-克隆虚拟机"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 克隆虚拟机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-在hadoop102安装JDK"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 在hadoop102安装JDK</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-在hadoop102安装Hadoop"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 在hadoop102安装Hadoop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-Hadoop目录结构"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 Hadoop目录结构</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第3章-Hadoop运行模式"><span class="nav-number">3.</span> <span class="nav-text">第3章 Hadoop运行模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-本地运行模式（官方WordCount）"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 本地运行模式（官方WordCount）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-完全分布式运行模式（开发重点）"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 完全分布式运行模式（开发重点）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-虚拟机准备"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 虚拟机准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-编写集群分发脚本xsync"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 编写集群分发脚本xsync</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-3-SSH无密登录配置"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.2.3 SSH无密登录配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-4-集群配置"><span class="nav-number">3.2.4.</span> <span class="nav-text">3.2.4 集群配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-5-群起集群"><span class="nav-number">3.2.5.</span> <span class="nav-text">3.2.5 群起集群</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-6-配置历史服务器"><span class="nav-number">3.2.6.</span> <span class="nav-text">3.2.6 配置历史服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-7-配置日志的聚集"><span class="nav-number">3.2.7.</span> <span class="nav-text">3.2.7 配置日志的聚集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-8-集群启动-停止方式总结"><span class="nav-number">3.2.8.</span> <span class="nav-text">3.2.8 集群启动&#x2F;停止方式总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-9-编写Hadoop集群常用脚本"><span class="nav-number">3.2.9.</span> <span class="nav-text">3.2.9 编写Hadoop集群常用脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-10-常用端口号说明"><span class="nav-number">3.2.10.</span> <span class="nav-text">3.2.10 常用端口号说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-11-集群时间同步"><span class="nav-number">3.2.11.</span> <span class="nav-text">3.2.11 集群时间同步</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第4章-常见错误及解决方案"><span class="nav-number">4.</span> <span class="nav-text">第4章 常见错误及解决方案</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#面试重点"><span class="nav-number">5.</span> <span class="nav-text">面试重点</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Rui Zhang"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">Rui Zhang</p>
  <div class="site-description" itemprop="description">不在沉默中爆发，就在沉默中灭亡</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2021 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rui Zhang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">25:10</span>
</div>




        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":120,"height":230},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
