<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="第 1 章 概述1.1 为什么学习Scala Spark—新一代内存级大数据计算框架， 是大数据的重要内容。 Spark就是使用Scala编写的。 因此为了更好的学习Spark, 需要掌握Scala这门语言。 Spark的兴起， 带动Scala语言的发展！  1.2 Scala发展历史">
<meta property="og:type" content="article">
<meta property="og:title" content="Scala学习教程">
<meta property="og:url" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="没有尾巴的小驴">
<meta property="og:description" content="第 1 章 概述1.1 为什么学习Scala Spark—新一代内存级大数据计算框架， 是大数据的重要内容。 Spark就是使用Scala编写的。 因此为了更好的学习Spark, 需要掌握Scala这门语言。 Spark的兴起， 带动Scala语言的发展！  1.2 Scala发展历史">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812154950850.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812180747858.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812181102830.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160732086.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160757118.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160814993.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160844642.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160922749.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161055838.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161158772.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161327658.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824162524925.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161848827.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824163832093.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824163903621.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824175603546.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220825114106688.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220825181329162.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220825181409207.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220830165850776.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220830170232746.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20221024110225344.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20221026102021520.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230316155229300.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230316161917750.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230328150248105.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230328150313167.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230328150509512.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230407151053450.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230407151418075.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230420100743627.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616102350845.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616150912162.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616150942962.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616151016676.png">
<meta property="og:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616151116908.png">
<meta property="article:published_time" content="2022-08-12T07:24:00.000Z">
<meta property="article:modified_time" content="2025-06-25T08:08:45.848Z">
<meta property="article:author" content="Rui Zhang">
<meta property="article:tag" content="Scala">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812154950850.png">

<link rel="canonical" href="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>Scala学习教程 | 没有尾巴的小驴</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">没有尾巴的小驴</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">记录生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">22</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">22</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">52</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="Rui Zhang">
      <meta itemprop="description" content="不在沉默中爆发，就在沉默中灭亡">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="没有尾巴的小驴">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Scala学习教程
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-12 15:24:00" itemprop="dateCreated datePublished" datetime="2022-08-12T15:24:00+08:00">2022-08-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-25 16:08:45" itemprop="dateModified" datetime="2025-06-25T16:08:45+08:00">2025-06-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Scala/" itemprop="url" rel="index"><span itemprop="name">Scala</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>128k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:56</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="第-1-章-概述"><a href="#第-1-章-概述" class="headerlink" title="第 1 章 概述"></a>第 1 章 概述</h1><h2 id="1-1-为什么学习Scala"><a href="#1-1-为什么学习Scala" class="headerlink" title="1.1 为什么学习Scala"></a>1.1 为什么学习Scala</h2><ul>
<li>Spark—新一代内存级大数据计算框架， 是大数据的重要内容。</li>
<li>Spark就是使用Scala编写的。 因此为了更好的学习Spark, 需要掌握Scala这门语言。</li>
<li>Spark的兴起， 带动Scala语言的发展！</li>
</ul>
<h2 id="1-2-Scala发展历史"><a href="#1-2-Scala发展历史" class="headerlink" title="1.2 Scala发展历史"></a>1.2 Scala发展历史</h2><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812154950850.png" alt="image-20220812154950850"></p>
<h2 id="1-3-Scala和Java关系"><a href="#1-3-Scala和Java关系" class="headerlink" title="1.3 Scala和Java关系"></a>1.3 Scala和Java关系</h2><p>一般来说，学 Scala 的人，都会 Java，而 Scala 是基于 Java 的，因此我们需要将 Scala和 Java 以及 JVM 之间的关系搞清楚，否则学习 Scala 你会蒙圈 。</p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812180747858.png" alt="image-20220812180747858"></p>
<h2 id="1-4-Scala语言特点"><a href="#1-4-Scala语言特点" class="headerlink" title="1.4 Scala语言特点"></a>1.4 Scala语言特点</h2><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220812181102830.png" alt="image-20220812181102830"></p>
<h2 id="1-5-环境搭建"><a href="#1-5-环境搭建" class="headerlink" title="1.5 环境搭建"></a>1.5 环境搭建</h2><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160732086.png" alt="image-20220824160732086"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160757118.png" alt="image-20220824160757118"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160814993.png" alt="image-20220824160814993"></p>
<p>idea 插件安装</p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160844642.png" alt="image-20220824160844642"></p>
<h2 id="1-6-HelloWord案例"><a href="#1-6-HelloWord案例" class="headerlink" title="1.6 HelloWord案例"></a>1.6 HelloWord案例</h2><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824160922749.png" alt="image-20220824160922749"></p>
<p>默认下， Maven 不支持 Scala 的开发，需要引入 Scala 框架。  在项目上， 点击右键-&gt; Add Framework Support… -&gt;选择 Scala-&gt;点击 OK  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161055838.png" alt="image-20220824161055838"></p>
<p>创建项目的源文件目录 </p>
<p>右键点击 main 目录-&gt;New-&gt;点击 Diretory -&gt; 写个名字（比如 scala）。<br>右键点击 scala 目录-&gt;Mark Directory as-&gt;选择 Sources root， 观察文件夹颜色发生变化。  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161158772.png" alt="image-20220824161158772"></p>
<p>右键点击 scala 目录-&gt;New-&gt;Package-&gt;输入 com.atguigu.chapter01-&gt;点击 OK。<br>右键点击 com.atguigu.chapter01-&gt;New-&gt;Scala Class-&gt;Kind 项选择 Object-&gt;Name 项输入Hello。  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161327658.png" alt="image-20220824161327658"></p>
<blockquote>
<p>说明： Java 中部分代码也是可以在 Scala 中运行。  </p>
</blockquote>
<h2 id="1-7-class和object说明"><a href="#1-7-class和object说明" class="headerlink" title="1.7 class和object说明"></a>1.7 class和object说明</h2><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824162524925.png" alt="image-20220824162524925" style="zoom:80%;">

<img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824161848827.png" alt="image-20220824161848827" style="zoom:80%;">

<p><strong>概念</strong></p>
<ol>
<li>用class修饰的为伴生类，与java中的类相似，用object的修饰的为伴生对象，为的是解决scala中没有static关键字的问题。</li>
<li>scala中的类不能定义静态成员，而代之以定义单例对象来替代</li>
<li>单例对象通过object关键字来声明</li>
<li>单例对象中的属性可以直接使用类名进行调用；伴生类中的属性，需要先实例化对象，才能够进行调用。</li>
<li>一个单例对象可以绑定在一个类，当单例对象和某个类写在同一个源文件且共享一个名字，它们就产生了绑定关系。此时单例对象称之为该类的伴生对象，类称之为该对象的伴生类。</li>
<li>伴生类与伴生对象可相互访问各自私有成员</li>
<li>伴生对象可为伴生类增加静态成员</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">  <span class="keyword">val</span> school: <span class="type">String</span> = <span class="string">"atguigu"</span></span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> zs = <span class="keyword">new</span> <span class="type">Student</span>(<span class="string">"zs"</span>, <span class="number">20</span>);</span><br><span class="line">    zs.printInfo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(name + <span class="string">" "</span> + age + <span class="string">" "</span> + <span class="type">Student</span>.school)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824163832093.png" alt="image-20220824163832093"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824163903621.png" alt="image-20220824163903621"></p>
<p>如上，scala的设计者认为java中有<code>static</code>关键字，所修饰的是面向类的，而不是面向对象的，认为这不是真正的面向对象，所以在scala中将<code>static</code>关键字删掉了，但为了实现类似scala中的功能，引入了伴生对象的概念。</p>
<p><strong>注意：</strong></p>
<ul>
<li>由于 <code>static</code>定义的类和对象破坏了 面向对象编程的规范完整性，因此scala 在设计之初就没有<strong>static</strong>关键字概念，类相关的<strong>静态属性</strong>都放在伴生对象<code>object</code>中。简单理解：<code>object</code>就是java中的static部分，定义的是类中静态属性。</li>
<li><strong>当同一个文件内</strong>同时存在<code>object x</code>和<code>class x</code>的声明时：我们称<code>class x</code>称作<code>object x</code>的<strong>伴生类</strong>。其<code>object x</code>称作<code>class x</code>的<strong>伴生对象</strong>。</li>
<li>在scala里，类和伴生对象之间没有界限——它们可以互相访问彼此的<code>private</code>字段和<code>private</code>方法。</li>
<li>伴生对象不能<code>new</code>，所以也没有构造参数，可以把伴生对象当做java中可能会用到的静态方法工具类。作为程序入口的方法必须是静态的，所以main方法必须处在一个伴生对象中，而不能写在伴生类中。</li>
<li>在编译时，伴生类<code>class x</code>被编译成了<code>x.class</code>，而伴生对象<code>object x</code>被编译成了<code>x$.class</code>。</li>
<li>单例对象在第一次被访问时才会被初始化，来自于<code>scala</code>自带的predef包。</li>
</ul>
<h1 id="第-2-章-变量和数据类型"><a href="#第-2-章-变量和数据类型" class="headerlink" title="第 2 章 变量和数据类型"></a>第 2 章 变量和数据类型</h1><h2 id="2-1-注释"><a href="#2-1-注释" class="headerlink" title="2.1 注释"></a>2.1 注释</h2><p>Scala 注释使用和 Java 完全一样。  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220824175603546.png" alt="image-20220824175603546"></p>
<h2 id="2-2-变量和常量（重点）"><a href="#2-2-变量和常量（重点）" class="headerlink" title="2.2 变量和常量（重点）"></a>2.2 变量和常量（重点）</h2><p>常量：在程序执行的过程中，其值不会被改变的变量  </p>
<p>0）回顾： Java 变量和常量语法<br>    变量类型 变量名称 = 初始值 int a = 10<br>    final 常量类型 常量名称 = 初始值 final int b = 20  </p>
<p>1）基本语法<br>    var 变量名 [: 变量类型] = 初始值 var i:Int = 10<br>    val 常量名 [: 常量类型] = 初始值 val j:Int = 20</p>
<blockquote>
<p><strong>注意： 能用常量的地方不用变量</strong></p>
</blockquote>
<p>2）案例实操<br>（1）声明变量时，类型可以省略，编译器自动推导，即类型推导。<br>（2）类型确定后，就不能修改，说明 Scala 是强数据类型语言。<br>（3）变量声明时，必须要有初始值。<br>（4）在声明/定义一个变量时，可以使用 var 或者 val 来修饰， var 修饰的变量可改变，val 修饰的变量不可改。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.chapter02</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestVar</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）声明变量时，类型可以省略，编译器自动推导，即类型推导</span></span><br><span class="line">        <span class="keyword">var</span> age = <span class="number">18</span></span><br><span class="line">        age = <span class="number">30</span></span><br><span class="line">        <span class="comment">//（2）类型确定后，就不能修改，说明 Scala 是强数据类型语言。</span></span><br><span class="line">        <span class="comment">// age = "tom" // 错误</span></span><br><span class="line">        <span class="comment">//（3）变量声明时，必须要有初始值</span></span><br><span class="line">        <span class="comment">// var name //错误</span></span><br><span class="line">        <span class="comment">//（4）在声明/定义一个变量时，可以使用 var 或者 val 来修饰， var 修饰的变量可改变， val 修饰的变量不可改。</span></span><br><span class="line">        <span class="keyword">var</span> num1 = <span class="number">10</span> <span class="comment">// 可变</span></span><br><span class="line">        <span class="keyword">val</span> num2 = <span class="number">20</span> <span class="comment">// 不可变</span></span><br><span class="line">        num1 = <span class="number">30</span> <span class="comment">// 正确</span></span><br><span class="line">        <span class="comment">//num2 = 100 //错误，因为 num2 是 val 修饰的</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（5） var 修饰的对象引用可以改变， val 修饰的对象则不可改变，但对象的状态（值）却是可以改变的。（比如：自定义对象、数组、集合等等）  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestVar</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// p1 是 var 修饰的， p1 的属性可以变，而且 p1 本身也可以变</span></span><br><span class="line">        <span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">        p1.name = <span class="string">"dalang"</span></span><br><span class="line">        p1 = <span class="literal">null</span></span><br><span class="line">        <span class="comment">// p2 是 val 修饰的，那么 p2 本身就不可变（即 p2 的内存地址不能变），但是， p2 的属性是可以变，因为属性并没有用 val 修饰。</span></span><br><span class="line">        <span class="keyword">val</span> p2 = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">        p2.name=<span class="string">"jinlian"</span></span><br><span class="line">        <span class="comment">// p2 = null // 错误的，因为 p2 是 val 修饰的</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">"jinlian"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-标识符的命名规范"><a href="#2-3-标识符的命名规范" class="headerlink" title="2.3 标识符的命名规范"></a>2.3 标识符的命名规范</h2><p>Scala 对各种变量、 方法、 函数等命名时使用的字符序列称为标识符。即： 凡是自己可以起名字的地方都叫标识符。  </p>
<p>1）命名规则<br>Scala 中的标识符声明， 基本和 Java 是一致的，但是细节上会有所变化，有以下三种规则：  </p>
<p>（1）以字母或者下划线开头，后接字母、数字、下划线  </p>
<p>（2）以操作符开头，且只包含操作符（ + - * / # !等）</p>
<p>（3）用反引号<code>....</code>包括的任意字符串，即使是 Scala 关键字（ 39 个）也可以  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220825114106688.png" alt="image-20220825114106688"></p>
<p>2）案例实操  </p>
<p>需求： 判断 hello、 Hello12、 1hello、 h-b、 x h、 h_4、 _ab、 Int、 _、 +<em>-/#!、 +</em>-/#!1、 if、<code>if</code>，这些名字是否合法。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestName</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）以字母或者下划线开头，后接字母、数字、下划线</span></span><br><span class="line">        <span class="keyword">var</span> hello: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok</span></span><br><span class="line">        <span class="keyword">var</span> <span class="type">Hello12</span>: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok</span></span><br><span class="line">        <span class="keyword">var</span> <span class="number">1</span>hello: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// error 数字不能开头</span></span><br><span class="line">        <span class="keyword">var</span> h-b: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// error 不能用-</span></span><br><span class="line">        <span class="keyword">var</span> x h: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// error 不能有空格</span></span><br><span class="line">        <span class="keyword">var</span> h_4: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok</span></span><br><span class="line">        <span class="keyword">var</span> _ab: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok</span></span><br><span class="line">        <span class="keyword">var</span> <span class="type">Int</span>: <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok 因为在 Scala 中 Int 是预定义的字符,不是关键字，但不推荐</span></span><br><span class="line">        <span class="keyword">var</span> _: <span class="type">String</span> = <span class="string">"hello"</span> <span class="comment">// ok 单独一个下划线不可以作为标识符，因为_被认为是一个方法</span></span><br><span class="line">        println(_)</span><br><span class="line">        <span class="comment">//（2）以操作符开头，且只包含操作符（ + - * / # !等）</span></span><br><span class="line">        <span class="keyword">var</span> +*-/#! : <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok</span></span><br><span class="line">        <span class="keyword">var</span> +*-/#!<span class="number">1</span> : <span class="type">String</span> = <span class="string">""</span> <span class="comment">// error 以操作符开头，必须都是操作符</span></span><br><span class="line">        <span class="comment">//（3）用反引号`....`包括的任意字符串，即使是 Scala 关键字（ 39 个）也可以</span></span><br><span class="line">        <span class="keyword">var</span> <span class="keyword">if</span> : <span class="type">String</span> = <span class="string">""</span> <span class="comment">// error 不能用关键字</span></span><br><span class="line">        <span class="keyword">var</span> `<span class="keyword">if</span>` : <span class="type">String</span> = <span class="string">""</span> <span class="comment">// ok 用反引号`....`包括的任意字符串,包括关键字</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-字符串输出"><a href="#2-4-字符串输出" class="headerlink" title="2.4 字符串输出"></a>2.4 字符串输出</h2><p>1）基本语法<br>（1）字符串，通过+号连接<br>（2）printf 用法：字符串，通过%传值。</p>
<ul>
<li>%d 数值类型</li>
<li>%s 字符串类型</li>
<li>%f 浮点型</li>
</ul>
<p>（3）字符串模板（插值字符串） ： 通过$获取变量值  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.chapter02</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestCharType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"jinlian"</span></span><br><span class="line">        <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">18</span></span><br><span class="line">        <span class="comment">//（1） 字符串，通过 + 号连接</span></span><br><span class="line">        println(name + <span class="string">" "</span> + age)</span><br><span class="line">        println(name * <span class="number">3</span>)</span><br><span class="line">        <span class="comment">//（2） printf 用法字符串，通过%传值。</span></span><br><span class="line">        printf(<span class="string">"name=%s age=%d\n"</span>, name, age)</span><br><span class="line">        <span class="comment">//（3） 字符串模版，通过$引用</span></span><br><span class="line">        <span class="comment">// 文字 's'  插值器允许在处理字符串时使用变量，println语句中将String变量（$name）附加到普通字符串中,并且可以嵌入表达式</span></span><br><span class="line">        println(<span class="string">s"<span class="subst">$&#123;age&#125;</span>岁的<span class="subst">$&#123;name&#125;</span>"</span>)</span><br><span class="line">        println(<span class="string">s"<span class="subst">$&#123;age&#125;</span>岁的<span class="subst">$name</span>"</span>)</span><br><span class="line">	    <span class="keyword">val</span> num = <span class="number">2.3443252</span></span><br><span class="line">        <span class="comment">// 文字 'f' 插值器允许创建一个格式化的字符串模板, 类似c语言中的printf</span></span><br><span class="line">        <span class="comment">// 前2表示整个数的长度，超过无事，不够需要补空格 .2表示小数长度</span></span><br><span class="line">        println(<span class="string">f"The num is <span class="subst">$&#123;num&#125;</span>%2.2f"</span>)</span><br><span class="line">        <span class="comment">// 文字 'raw' 能让字符串原原本本的输出来，而不是产生控制效果</span></span><br><span class="line">    	println(<span class="string">raw"The num is <span class="subst">$&#123;num&#125;</span>%2.2f"</span>)</span><br><span class="line">        <span class="comment">// 多行字符串，在 Scala中，利用三个双引号包围多行字符串就可以实现。</span></span><br><span class="line">        <span class="comment">// 输入的内容，带有空格、 \t 之类，导致每一行的开始位置不能整洁对齐。</span></span><br><span class="line">        <span class="comment">// 应用 scala 的 stripMargin 方法，在 scala 中 stripMargin 默认是“|”作为连接符， //在多行换行的行头前面加一个“|”符号即可。</span></span><br><span class="line">        <span class="keyword">val</span> s =</span><br><span class="line">        <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        |select</span></span><br><span class="line"><span class="string">        | name,</span></span><br><span class="line"><span class="string">        | age</span></span><br><span class="line"><span class="string">        |from user</span></span><br><span class="line"><span class="string">        |where name="</span><span class="string">zhangsan"</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span>.stripMargin</span><br><span class="line">        println(s)</span><br><span class="line">        <span class="comment">// 如果需要对变量进行运算，那么可以加$&#123;&#125;</span></span><br><span class="line">        <span class="keyword">val</span> s1 =</span><br><span class="line">        <span class="string">s""</span><span class="string">"</span></span><br><span class="line"><span class="string">        |select</span></span><br><span class="line"><span class="string">        | name,</span></span><br><span class="line"><span class="string">        | age</span></span><br><span class="line"><span class="string">        |from user</span></span><br><span class="line"><span class="string">        |where name="</span>$<span class="string">name" and age=<span class="subst">$&#123;age+2&#125;</span></span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span>.stripMargin</span><br><span class="line">        println(s1)</span><br><span class="line">        <span class="keyword">val</span> s2 = <span class="string">s"name=<span class="subst">$name</span>"</span></span><br><span class="line">        println(s2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-5-键盘输入"><a href="#2-5-键盘输入" class="headerlink" title="2.5 键盘输入"></a>2.5 键盘输入</h2><p>在编程中，需要接收用户输入的数据，就可以使用键盘输入语句来获取。  </p>
<p>1）基本语法<br>    StdIn.readLine()、 StdIn.readShort()、 StdIn.readDouble()  </p>
<p>2）案例实操  </p>
<p>需求：可以从控制台接收用户信息，【姓名，年龄，薪水】  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.io.<span class="type">StdIn</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestInput</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 1 输入姓名</span></span><br><span class="line">        println(<span class="string">"input name:"</span>)</span><br><span class="line">        <span class="keyword">var</span> name = <span class="type">StdIn</span>.readLine()</span><br><span class="line">        <span class="comment">// 2 输入年龄</span></span><br><span class="line">        println(<span class="string">"input age:"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readShort()</span><br><span class="line">        <span class="comment">// 3 输入薪水</span></span><br><span class="line">        println(<span class="string">"input sal:"</span>)</span><br><span class="line">        <span class="keyword">var</span> sal = <span class="type">StdIn</span>.readDouble()</span><br><span class="line">        <span class="comment">// 4 打印</span></span><br><span class="line">        println(<span class="string">"name="</span> + name)</span><br><span class="line">        println(<span class="string">"age="</span> + age)</span><br><span class="line">        println(<span class="string">"sal="</span> + sal)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-6-读写文件"><a href="#2-6-读写文件" class="headerlink" title="2.6 读写文件"></a>2.6 读写文件</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.&#123;<span class="type">File</span>, <span class="type">PrintWriter</span>&#125;</span><br><span class="line"><span class="keyword">import</span> scala.io.<span class="type">Source</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test_FileIO</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1.从文件中读取数据</span></span><br><span class="line">    <span class="type">Source</span>.fromFile(<span class="string">"src\\main\\resources\\test.txt"</span>).foreach(print)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.将数据写入文件</span></span><br><span class="line">    <span class="keyword">val</span> writer = <span class="keyword">new</span> <span class="type">PrintWriter</span>(<span class="keyword">new</span> <span class="type">File</span>(<span class="string">"src\\main\\resources\\output.txt"</span>))</span><br><span class="line">    writer.write(<span class="string">"hello scala from java writer"</span>)</span><br><span class="line">    writer.close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-7-数据类型（重点）"><a href="#2-7-数据类型（重点）" class="headerlink" title="2.7 数据类型（重点）"></a>2.7 数据类型（重点）</h2><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220825181329162.png" alt="image-20220825181329162"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220825181409207.png" alt="image-20220825181409207"></p>
<h2 id="2-8-整数类型（Byte、-Short、-Int、-Long）"><a href="#2-8-整数类型（Byte、-Short、-Int、-Long）" class="headerlink" title="2.8 整数类型（Byte、 Short、 Int、 Long）"></a>2.8 整数类型（Byte、 Short、 Int、 Long）</h2><p>Scala 的整数类型就是用于存放整数值的，比如 12， 30， 3456 等等。  </p>
<p>1）整型分类  </p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Byte [1]</td>
<td>8 位有符号补码整数。数值区间为 -128 到 127</td>
</tr>
<tr>
<td>Short [2]</td>
<td>16 位有符号补码整数。数值区间为 -32768 到 32767</td>
</tr>
<tr>
<td>Int [4]</td>
<td>32 位有符号补码整数。数值区间为 -2147483648 到 2147483647</td>
</tr>
<tr>
<td>Long [8]</td>
<td>64 位有符号补码整数。数值区间为 -9223372036854775808 到 9223372036854775807 = 2 的(64-1)次方-1</td>
</tr>
</tbody></table>
<p>2）案例实操  </p>
<p>（1） Scala 各整数类型有固定的表示范围和字段长度，不受具体操作的影响，以保证Scala 程序的可移植性。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDataType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 正确</span></span><br><span class="line">        <span class="keyword">var</span> n1:<span class="type">Byte</span> = <span class="number">127</span></span><br><span class="line">        <span class="keyword">var</span> n2:<span class="type">Byte</span> = <span class="number">-128</span></span><br><span class="line">        <span class="comment">// 错误</span></span><br><span class="line">        <span class="comment">// var n3:Byte = 128</span></span><br><span class="line">        <span class="comment">// var n4:Byte = -129</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2） Scala 的整型，默认为 Int 型，声明 Long 型，须后加<code>l</code>或<code>L</code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDataType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> n5 = <span class="number">10</span></span><br><span class="line">        println(n5)</span><br><span class="line">        <span class="keyword">var</span> n6 = <span class="number">9223372036854775807</span>L</span><br><span class="line">        println(n6)</span><br><span class="line">        <span class="comment">// val a5: Long = 123131321323123 因为默认为Int ，Int和规定的Long不匹配还是会报错</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">val</span> b1: <span class="type">Byte</span> = <span class="number">10</span></span><br><span class="line">        <span class="keyword">val</span> b2: <span class="type">Byte</span> = <span class="number">10</span> + <span class="number">20</span> <span class="comment">// 涉及到自动类型提升，编译器可以自定判断是否超出范围</span></span><br><span class="line">        println(b2)</span><br><span class="line">        <span class="comment">// val b3: Byte = (b1 +20) //报错，编译器识别出了b1为Byte类型,要进行自动类型提升</span></span><br><span class="line">        <span class="keyword">val</span> b3: <span class="type">Byte</span> = (b1 + <span class="number">20</span>).toByte <span class="comment">// 解决类型不匹配的问题，进行强转就可以了</span></span><br><span class="line">        println(b3)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3） Scala 程序中变量常声明为 Int 型，除非不足以表示大数，才使用 Long  </p>
<h2 id="2-9-浮点类型（Float、-Double）"><a href="#2-9-浮点类型（Float、-Double）" class="headerlink" title="2.9 浮点类型（Float、 Double）"></a>2.9 浮点类型（Float、 Double）</h2><p>Scala 的浮点类型可以表示一个小数，比如 123.4f， 7.8， 0.12 等等。  </p>
<p>1）浮点型分类  </p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Float [4]</td>
<td>32 位, IEEE 754 标准的单精度浮点数</td>
</tr>
<tr>
<td>Double [8]</td>
<td>64 位 IEEE 754 标准的双精度浮点数</td>
</tr>
</tbody></table>
<p>2）案例实操  </p>
<p>Scala 的浮点型常量默认为 Double 型，声明 Float 型常量，须后加<code>f</code>或<code>F</code>。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDataType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 建议，在开发中需要高精度小数时，请选择 Double</span></span><br><span class="line">        <span class="keyword">var</span> n7 = <span class="number">2.2345678912</span>f</span><br><span class="line">        <span class="keyword">var</span> n8 = <span class="number">2.2345678912</span></span><br><span class="line">        println(<span class="string">"n7="</span> + n7)</span><br><span class="line">        println(<span class="string">"n8="</span> + n8)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行的结果 :</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">n7</span>=<span class="string">2.2345679</span></span><br><span class="line"><span class="attr">n8</span>=<span class="string">2.2345678912</span></span><br></pre></td></tr></table></figure>

<h2 id="2-10-字符类型（Char）"><a href="#2-10-字符类型（Char）" class="headerlink" title="2.10 字符类型（Char）"></a>2.10 字符类型（Char）</h2><p>1）基本说明  </p>
<p>字符类型可以表示单个字符，字符类型是 Char。  </p>
<p>2）案例实操  </p>
<p>（1）字符常量是用单引号 ‘ ‘ 括起来的单个字符。<br>（2） \t ：一个制表位，实现对齐的功能<br>（3） \n ：换行符<br>（4） \ ：表示<br>（5） &quot; ：表示”  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestCharType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 字符常量是用单引号 ' ' 括起来的单个字符。</span></span><br><span class="line">        <span class="keyword">var</span> c1: <span class="type">Char</span> = 'a'</span><br><span class="line">        println(<span class="string">"c1="</span> + c1)</span><br><span class="line">        <span class="comment">// 注意：这里涉及自动类型提升，其实编译器可以自定判断是否超出范围，</span></span><br><span class="line">        <span class="comment">// 不过 idea 提示报错</span></span><br><span class="line">        <span class="keyword">var</span> c2:<span class="type">Char</span> = 'a' + <span class="number">1</span></span><br><span class="line">        println(c2)</span><br><span class="line">        <span class="comment">// 控制字符</span></span><br><span class="line">        <span class="keyword">val</span> c3: <span class="type">Char</span> = '\t' <span class="comment">//制表符</span></span><br><span class="line">        <span class="keyword">val</span> c4: <span class="type">Char</span> = '\n' <span class="comment">//换行符</span></span><br><span class="line">        println(<span class="string">"abc"</span> + c3 + <span class="string">"def"</span>)</span><br><span class="line">        println(<span class="string">"abc"</span> + c4 + <span class="string">"def"</span>)</span><br><span class="line">        <span class="comment">// 转义字符</span></span><br><span class="line">        <span class="keyword">val</span> c5 = '\\'</span><br><span class="line">        println(c5)</span><br><span class="line">        <span class="keyword">val</span> c6 = '\<span class="string">"'</span></span><br><span class="line"><span class="string">        println(c6)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        // 字符变量底层保存ASCII码</span></span><br><span class="line"><span class="string">        val i1: Int = c1 //自动类型提升 Char -&gt; Int</span></span><br><span class="line"><span class="string">        println(i1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        val c8: Char =(i1 +1).toChar</span></span><br><span class="line"><span class="string">        println(c8)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-11-Unit类型、Null类型和Nothing类型（重点）"><a href="#2-11-Unit类型、Null类型和Nothing类型（重点）" class="headerlink" title="2.11 Unit类型、Null类型和Nothing类型（重点）"></a>2.11 Unit类型、Null类型和Nothing类型（重点）</h2><p>1）基本说明</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Unit</td>
<td>表示无值，和其他语言中 void 等同。用作不返回任何结果的方法的结果类型。 Unit 只有一个实例值，写成()。</td>
</tr>
<tr>
<td>Null</td>
<td>null , Null 类型只有一个实例值 null，是所有引用类型的子类</td>
</tr>
<tr>
<td>Nothing</td>
<td>Nothing 类型在 Scala 的类层级最低端；它是任何其他类型的子类型。 当一个函数，我们确定没有正常的返回值，可以用 Nothing 来指定返回类 型，这样有一个好处，就是我们可以把返回的值（异常）赋给其它的函数 或者变量（兼容性）</td>
</tr>
</tbody></table>
<p>2）案例实操</p>
<p>（1） Unit 类型用来标识过程，也就是没有明确返回值的函数。  </p>
<p>由此可见， Unit 类似于 Java 里的 void。 Unit 只有一个实例( )，这个实例也没有实质意义  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestSpecialType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">sayOk</span> </span>: <span class="type">Unit</span> = &#123;<span class="comment">// unit 表示没有返回值，即 void</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(sayOk)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2） Null 类只有一个实例对象， Null 类似于 Java 中的 null 引用。 Null 可以赋值给任意引用类型（ AnyRef），但是不能赋值给值类型（ AnyVal）  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDataType</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//null 可以赋值给任意引用类型（ AnyRef），但是不能赋值给值类型(AnyVal)</span></span><br><span class="line">        <span class="keyword">var</span> cat = <span class="keyword">new</span> <span class="type">Cat</span>();</span><br><span class="line">        cat = <span class="literal">null</span> <span class="comment">// 正确</span></span><br><span class="line">        <span class="keyword">var</span> n1: <span class="type">Int</span> = <span class="literal">null</span> <span class="comment">// 错误</span></span><br><span class="line">        println(<span class="string">"n1:"</span> + n1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3） Nothing，可以作为没有正常返回值的方法的返回类型，非常直观的告诉你这个方法不会正常返回，而且由于 Nothing 是其他任意类型的子类，他还能跟要求返回值的方法兼容。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestSpecialType</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(): <span class="type">Nothing</span> = &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">Exception</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        test</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-12-类型转换（重点）"><a href="#2-12-类型转换（重点）" class="headerlink" title="2.12 类型转换（重点）"></a>2.12 类型转换（重点）</h2><h3 id="2-12-1-数值类型自动转换"><a href="#2-12-1-数值类型自动转换" class="headerlink" title="2.12.1 数值类型自动转换"></a>2.12.1 数值类型自动转换</h3><p>当 Scala 程序在进行赋值或者运算时，精度小的类型自动转换为精度大的数值类型，这个就是自动类型转换（隐式转换）。数据类型按精度（容量）大小排序为：  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220830165850776.png" alt="image-20220830165850776"></p>
<p>1） 基本说明  </p>
<p>（1）自动提升原则：有多种类型的数据混合运算时，系统首先自动将所有数据转换成精度大的那种数据类型，然后再进行计算。<br>（2）把精度大的数值类型赋值给精度小的数值类型时，就会报错，反之就会进行自动类型转换。<br>（3）(byte， short)和 char 之间不会相互自动转换。<br>（4）byte，short，char 他们三者可以计算， 在计算时首先转换为 int 类型。  </p>
<p>2） 案例实操</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestValueTransfer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）自动提升原则：有多种类型的数据混合运算时，系统首先自动将所有数据转换成精度大的那种数值类型，然后再进行计算。</span></span><br><span class="line">        <span class="keyword">var</span> n = <span class="number">1</span> + <span class="number">2.0</span></span><br><span class="line">        println(n) <span class="comment">// n 就是 Double</span></span><br><span class="line">        <span class="comment">//（2）把精度大的数值类型赋值给精度小的数值类型时，就会报错，反之就会进行自动类型转换。</span></span><br><span class="line">        <span class="keyword">var</span> n2 : <span class="type">Double</span>= <span class="number">1.0</span></span><br><span class="line">        <span class="comment">//var n3: Int = n2 //错误，原因不能把高精度的数据直接赋值和低精度。</span></span><br><span class="line">        <span class="comment">//（3）（byte，short）和 char 之间不会相互自动转换。</span></span><br><span class="line">        <span class="keyword">var</span> n4 : <span class="type">Byte</span> = <span class="number">1</span></span><br><span class="line">        <span class="comment">//var c1: Char = n4 //错误</span></span><br><span class="line">        <span class="keyword">var</span> n5:<span class="type">Int</span> = n4</span><br><span class="line">        <span class="comment">//（4） byte，short， char 他们三者可以计算，在计算时首先转换为 int类型。</span></span><br><span class="line">        <span class="keyword">var</span> n6 : <span class="type">Byte</span> = <span class="number">1</span></span><br><span class="line">        <span class="keyword">var</span> c2 : <span class="type">Char</span> = <span class="number">1</span></span><br><span class="line">        <span class="comment">// var n: Short = n6 + c2 //当 n6 + c2 结果类型就是 int</span></span><br><span class="line">        <span class="comment">// var n7: Short = 10 + 90 //注意：这里涉及自动类型提升，其实编译器可以自定判断是否超出范围，不过 idea 提示报错</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-12-2-强制类型转换"><a href="#2-12-2-强制类型转换" class="headerlink" title="2.12.2 强制类型转换"></a>2.12.2 强制类型转换</h3><p>1） 基本说明  </p>
<p>自动类型转换的逆过程，将精度大的数值类型转换为精度小的数值类型。使用时要加上强制转函数，但可能造成精度降低或溢出，格外要注意。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Java</span> : int num = (int)<span class="number">2.5</span></span><br><span class="line"><span class="type">Scala</span> : <span class="keyword">var</span> num : <span class="type">Int</span> = <span class="number">2.7</span>.toInt</span><br></pre></td></tr></table></figure>

<p>2） 案例实操  </p>
<p>（1）将数据由高精度转换为低精度，就需要使用到强制转换<br>（2）强转符号只针对于最近的操作数有效，往往会使用小括号提升优先级  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestForceTransfer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）将数据由高精度转换为低精度，就需要使用到强制转换</span></span><br><span class="line">        <span class="keyword">var</span> n1: <span class="type">Int</span> = <span class="number">2.5</span>.toInt <span class="comment">// 这个存在精度损失</span></span><br><span class="line">        <span class="comment">//（2）强转符号只针对于最近的操作数有效，往往会使用小括号提升优先级</span></span><br><span class="line">        <span class="keyword">var</span> r1: <span class="type">Int</span> = <span class="number">10</span> * <span class="number">3.5</span>.toInt + <span class="number">6</span> * <span class="number">1.5</span>.toInt <span class="comment">// 10 *3 + 6*1 = 36</span></span><br><span class="line">        <span class="keyword">var</span> r2: <span class="type">Int</span> = (<span class="number">10</span> * <span class="number">3.5</span> + <span class="number">6</span> * <span class="number">1.5</span>).toInt <span class="comment">// 44.0.toInt =44</span></span><br><span class="line">        println(<span class="string">"r1="</span> + r1 + <span class="string">" r2="</span> + r2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-12-3-数值类型和-String-类型间转换"><a href="#2-12-3-数值类型和-String-类型间转换" class="headerlink" title="2.12.3 数值类型和 String 类型间转换"></a>2.12.3 数值类型和 String 类型间转换</h3><p>1） 基本说明<br>在程序开发中，我们经常需要将基本数值类型转成 String 类型。或者将 String 类型转成基本数值类型。  </p>
<p>2）案例实操  </p>
<p>（1）基本类型转 String 类型（语法： 将基本类型的值+”” 即可）<br>（2）String 类型转基本数值类型（语法： s1.toInt、 s1.toFloat、 s1.toDouble、 s1.toByte、  s1.toLong、 s1.toShort）  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestStringTransfer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）基本类型转 String 类型（语法：将基本类型的值+"" 即可）</span></span><br><span class="line">        <span class="keyword">var</span> str1 : <span class="type">String</span> = <span class="literal">true</span> + <span class="string">""</span></span><br><span class="line">        <span class="keyword">var</span> str2 : <span class="type">String</span> = <span class="number">4.5</span> + <span class="string">""</span></span><br><span class="line">        <span class="keyword">var</span> str3 : <span class="type">String</span> = <span class="number">100</span> +<span class="string">""</span></span><br><span class="line">        <span class="comment">//（2）String 类型转基本数值类型（语法：调用相关 API）</span></span><br><span class="line">        <span class="keyword">var</span> s1 : <span class="type">String</span> = <span class="string">"12"</span></span><br><span class="line">        <span class="keyword">var</span> n1 : <span class="type">Byte</span> = s1.toByte</span><br><span class="line">        <span class="keyword">var</span> n2 : <span class="type">Short</span> = s1.toShort</span><br><span class="line">        <span class="keyword">var</span> n3 : <span class="type">Int</span> = s1.toInt</span><br><span class="line">        <span class="keyword">var</span> n4 : <span class="type">Long</span> = s1.toLong</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）注意事项  </p>
<p>在将 String 类型转成基本数值类型时，要确保 String 类型能够转成有效的数据，比如我们可以把”123”，转成一个整数，但是不能把”hello”转成一个整数。  </p>
<p>var n5:Int = “12.6”.toInt 会出现 NumberFormatException 异常。  </p>
<p>拓展：</p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20220830170232746.png" alt="image-20220830170232746"></p>
<h1 id="第-3-章-运算符"><a href="#第-3-章-运算符" class="headerlink" title="第 3 章 运算符"></a>第 3 章 运算符</h1><p>Scala 运算符的使用和 Java 运算符的使用基本相同， 只有个别细节上不同。  </p>
<h2 id="3-1-算术运算符"><a href="#3-1-算术运算符" class="headerlink" title="3.1 算术运算符"></a>3.1 算术运算符</h2><p>1）基本语法  </p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>运算</th>
<th>范例</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>正号</td>
<td>+3</td>
<td>3</td>
</tr>
<tr>
<td>-</td>
<td>负号</td>
<td>b=4; -b</td>
<td>-4</td>
</tr>
<tr>
<td>+</td>
<td>加</td>
<td>5+5</td>
<td>10</td>
</tr>
<tr>
<td>-</td>
<td>减</td>
<td>6-4</td>
<td>2</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
<td>3*4</td>
<td>12</td>
</tr>
<tr>
<td>/</td>
<td>除</td>
<td>5/5</td>
<td>1</td>
</tr>
<tr>
<td>%</td>
<td>取模(取余)</td>
<td>7%5</td>
<td>2</td>
</tr>
<tr>
<td>+</td>
<td>字符串相加</td>
<td>“He”+”llo”</td>
<td>“Hello”</td>
</tr>
</tbody></table>
<p>（1）对于除号“/”，它的整数除和小数除是有区别的：整数之间做除法时，只保留整数部分而舍弃小数部分。<br>（2）对一个数取模 a%b，和 Java 的取模规则一样。  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestArithmetic</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）对于除号“/”，它的整数除和小数除是有区别的：整数之间做除法时，只保留整数部分而舍弃小数部分</span></span><br><span class="line">        <span class="keyword">var</span> r1: <span class="type">Int</span> = <span class="number">10</span> / <span class="number">3</span> <span class="comment">// 3</span></span><br><span class="line">        println(<span class="string">"r1="</span> + r1)</span><br><span class="line">        <span class="keyword">var</span> r2: <span class="type">Double</span> = <span class="number">10</span> / <span class="number">3</span> <span class="comment">// 3.0</span></span><br><span class="line">        println(<span class="string">"r2="</span> + r2)</span><br><span class="line">        <span class="keyword">var</span> r3: <span class="type">Double</span> = <span class="number">10.0</span> / <span class="number">3</span> <span class="comment">// 3.3333</span></span><br><span class="line">        println(<span class="string">"r3="</span> + r3)</span><br><span class="line">        println(<span class="string">"r3="</span> + r3.formatted(<span class="string">"%.2f"</span>)) <span class="comment">// 含义：保留小数点 2位，使用四舍五入</span></span><br><span class="line">        <span class="comment">//（2）对一个数取模 a%b，和 Java 的取模规则一样。</span></span><br><span class="line">        <span class="keyword">var</span> r4 = <span class="number">10</span> % <span class="number">3</span> <span class="comment">// 1</span></span><br><span class="line">        println(<span class="string">"r4="</span> + r4)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2-关系运算符（比较运算符）"><a href="#3-2-关系运算符（比较运算符）" class="headerlink" title="3.2 关系运算符（比较运算符）"></a>3.2 关系运算符（比较运算符）</h2><p>1）基本语法  </p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>运算</th>
<th>范例</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>==</td>
<td>相等于</td>
<td>4==3</td>
<td>false</td>
</tr>
<tr>
<td>!=</td>
<td>不等于</td>
<td>4！ =3</td>
<td>true</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
<td>4&lt;3</td>
<td>false</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
<td>4&gt;3</td>
<td>true</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
<td>4&lt;=3</td>
<td>false</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
<td>4&gt;=3</td>
<td>true</td>
</tr>
</tbody></table>
<p>2）案例实操  </p>
<p>（1）需求 1：  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestRelation</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 测试： &gt;、 &gt;=、 &lt;=、 &lt;、 ==、 !=</span></span><br><span class="line">        <span class="keyword">var</span> a: <span class="type">Int</span> = <span class="number">2</span></span><br><span class="line">        <span class="keyword">var</span> b: <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line">        println(a &gt; b) <span class="comment">// true</span></span><br><span class="line">        println(a &gt;= b) <span class="comment">// true</span></span><br><span class="line">        println(a &lt;= b) <span class="comment">// false</span></span><br><span class="line">        println(a &lt; b) <span class="comment">// false</span></span><br><span class="line">        println(<span class="string">"a==b"</span> + (a == b)) <span class="comment">// false</span></span><br><span class="line">        println(a != b) <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）需求 2： Java 和 Scala 中关于 == 的区别  </p>
<p>Java：== 比较两个变量本身的值，即两个对象在内存中的首地址；equals 比较字符串中所包含的内容是否相同。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String s1 = <span class="string">"abc"</span>;</span><br><span class="line">    String s2 = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">    System.out.println(s1 == s2);</span><br><span class="line">    System.out.println(s1.equals(s2));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出结果：</span></span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>Scala： == 更加类似于 Java 中的 equals， 参照 jd 工具  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> s1 = <span class="string">"abc"</span></span><br><span class="line">    <span class="keyword">val</span> s2 = <span class="keyword">new</span> <span class="type">String</span>(<span class="string">"abc"</span>)</span><br><span class="line">    println(s1 == s2)</span><br><span class="line">    println(s1.eq(s2))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出结果：</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-逻辑运算符"><a href="#3-3-逻辑运算符" class="headerlink" title="3.3 逻辑运算符"></a>3.3 逻辑运算符</h2><p>1）基本语法<br>用于连接多个条件（一般来讲就是关系表达式），最终的结果也是一个 Boolean 值。<br>假定：变量 A 为 true， B 为 false  </p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>&amp;&amp;</td>
<td>逻辑与</td>
<td>(A &amp;&amp; B) 运算结果为 false</td>
</tr>
<tr>
<td>||</td>
<td>逻辑或</td>
<td>(A || B) 运算结果为 true</td>
</tr>
<tr>
<td>!</td>
<td>逻辑非</td>
<td>!(A &amp;&amp; B) 运算结果为 true</td>
</tr>
</tbody></table>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestLogic</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 测试： &amp;&amp;、 ||、 !</span></span><br><span class="line">        <span class="keyword">var</span> a = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> b = <span class="literal">false</span></span><br><span class="line">        println(<span class="string">"a&amp;&amp;b="</span> + (a &amp;&amp; b)) <span class="comment">// a&amp;&amp;b=false</span></span><br><span class="line">        println(<span class="string">"a||b="</span> + (a || b)) <span class="comment">// a||b=true</span></span><br><span class="line">        println(<span class="string">"!(a&amp;&amp;b)="</span> + (!(a &amp;&amp; b))) <span class="comment">// !(a&amp;&amp;b)=true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 扩展避免逻辑与空指针异常</span></span><br><span class="line">isNotEmpty(<span class="type">String</span> s)&#123;</span><br><span class="line">    <span class="comment">// 如果按位与，s 为空，会发生空指针</span></span><br><span class="line">    <span class="keyword">return</span> s!=<span class="literal">null</span> &amp;&amp; !<span class="string">""</span>.equals(s.trim());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-4-赋值运算符"><a href="#3-4-赋值运算符" class="headerlink" title="3.4 赋值运算符"></a>3.4 赋值运算符</h2><p>1）基本语法  </p>
<p>赋值运算符就是将某个运算后的值，赋给指定的变量  </p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>简单的赋值运算符，将一个表 达式的值赋给一个左值</td>
<td>C = A + B 将 A + B 表达式结果赋 值给 C</td>
</tr>
<tr>
<td>+=</td>
<td>相加后再赋值</td>
<td>C += A 等于 C = C + A</td>
</tr>
<tr>
<td>-=</td>
<td>相减后再赋值</td>
<td>C -= A 等于 C = C - A</td>
</tr>
<tr>
<td>*=</td>
<td>相乘后再赋值</td>
<td>C *= A 等于 C = C * A</td>
</tr>
<tr>
<td>/=</td>
<td>相除后再赋值</td>
<td>C /= A 等于 C = C / A</td>
</tr>
<tr>
<td>%=</td>
<td>求余后再赋值</td>
<td>C %= A 等于 C = C % A</td>
</tr>
<tr>
<td>&lt;&lt;=</td>
<td>左移后赋值</td>
<td>C &lt;&lt;= 2 等于 C = C &lt;&lt; 2</td>
</tr>
<tr>
<td>&gt;&gt;=</td>
<td>右移后赋值</td>
<td>C &gt;&gt;= 2 等于 C = C &gt;&gt; 2</td>
</tr>
<tr>
<td>&amp;=</td>
<td>按位与后赋值</td>
<td>C &amp;= 2 等于 C = C &amp; 2</td>
</tr>
<tr>
<td>^=</td>
<td>按位异或后赋值</td>
<td>C ^= 2 等于 C = C ^ 2</td>
</tr>
<tr>
<td>|=</td>
<td>按位或后赋值</td>
<td>C |= 2 等于 C = C | 2</td>
</tr>
</tbody></table>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestAssignment</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> r1 = <span class="number">10</span></span><br><span class="line">        r1 += <span class="number">1</span> <span class="comment">// 没有++</span></span><br><span class="line">        r1 -= <span class="number">2</span> <span class="comment">// 没有--</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-5-位运算符"><a href="#3-5-位运算符" class="headerlink" title="3.5 位运算符"></a>3.5 位运算符</h2><p>1）基本语法  </p>
<p>下表中变量 a 为 60， b 为 13。  </p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>&amp;</td>
<td>按位与运算符</td>
<td>(a &amp; b) 输出结果 12 ，二进制解释： 0000 1100</td>
</tr>
<tr>
<td>|</td>
<td>按位或运算符</td>
<td>(a | b) 输出结果 61 ，二进制解释： 0011 1101</td>
</tr>
<tr>
<td>^</td>
<td>按位异或运算符</td>
<td>(a ^ b) 输出结果 49 ，二进制解释： 0011 0001</td>
</tr>
<tr>
<td>~</td>
<td>按位取反运算符</td>
<td>(~a ) 输出结果 -61 ，二进制解释： 1100 0011， 在 一个有符号二进制数的补码形式。</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>左移动运算符</td>
<td>a &lt;&lt; 2 输出结果 240 ，二进制解释： 0011 0000</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>右移动运算符</td>
<td>a &gt;&gt; 2 输出结果 15 ，二进制解释： 0000 1111</td>
</tr>
<tr>
<td>&gt;&gt;&gt;</td>
<td>无符号右移</td>
<td>a &gt;&gt;&gt;2 输出结果 15, 二进制解释: 0000 1111</td>
</tr>
</tbody></table>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestPosition</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 测试： 1000 &lt;&lt; 1 =&gt;10000</span></span><br><span class="line">        <span class="keyword">var</span> n1 :<span class="type">Int</span> =<span class="number">8</span></span><br><span class="line">        n1 = n1 &lt;&lt; <span class="number">1</span></span><br><span class="line">        println(n1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-6-Scala-运算符本质"><a href="#3-6-Scala-运算符本质" class="headerlink" title="3.6 Scala 运算符本质"></a>3.6 Scala 运算符本质</h2><p>在 Scala 中其实是没有运算符的，所有运算符都是方法。<br>1） 当调用对象的方法时，点 “.” 可以省略<br>2） 如果函数参数只有一个，或者没有参数，() 可以省略  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestOpt</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 标准的加法运算</span></span><br><span class="line">        <span class="keyword">val</span> i:<span class="type">Int</span> = <span class="number">1.</span>+(<span class="number">1</span>) <span class="comment">// 将运算法当做成方法进行计算, 合成方法, 编译器自动生成, 绕开JVM的限制</span></span><br><span class="line">        <span class="comment">//（1）当调用对象的方法时，"." 可以省略</span></span><br><span class="line">        <span class="keyword">val</span> j:<span class="type">Int</span> = <span class="number">1</span> + (<span class="number">1</span>)</span><br><span class="line">        <span class="comment">//（2）如果函数参数只有一个，或者没有参数，() 可以省略</span></span><br><span class="line">        <span class="keyword">val</span> k:<span class="type">Int</span> = <span class="number">1</span> + <span class="number">1</span></span><br><span class="line">        println(<span class="number">1.</span>toString())</span><br><span class="line">        println(<span class="number">1</span> toString())</span><br><span class="line">        println(<span class="number">1</span> toString)</span><br><span class="line">        println(<span class="number">1</span> toint)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-4-章-流程控制"><a href="#第-4-章-流程控制" class="headerlink" title="第 4 章 流程控制"></a>第 4 章 流程控制</h1><h2 id="4-1-分支控制-if-else"><a href="#4-1-分支控制-if-else" class="headerlink" title="4.1 分支控制 if-else"></a>4.1 分支控制 if-else</h2><p>让程序有选择的的执行，分支控制有三种：单分支、双分支、多分支  </p>
<h3 id="4-1-1-单分支"><a href="#4-1-1-单分支" class="headerlink" title="4.1.1 单分支"></a>4.1.1 单分支</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">	执行代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：当条件表达式为 ture 时，就会执行{ }的代码  </p>
<p>2）案例实操  </p>
<p>需求：输入人的年龄，如果该同志的年龄小于 18 岁，则输出“童年  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"input age:"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readShort()</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span>)&#123;</span><br><span class="line">        	println(<span class="string">"童年"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-2-双分支"><a href="#4-1-2-双分支" class="headerlink" title="4.1.2 双分支"></a>4.1.2 双分支</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">	执行代码块 <span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	执行代码块 <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）案例实操  </p>
<p>需求：输入年龄，如果年龄小于 18 岁，则输出“童年”。否则，输出“成年”  。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"input age:"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readShort()</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span>)&#123;</span><br><span class="line">        	println(<span class="string">"童年"</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       	 	println(<span class="string">"成年"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-3-多分支"><a href="#4-1-3-多分支" class="headerlink" title="4.1.3 多分支"></a>4.1.3 多分支</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式 <span class="number">1</span>) &#123;</span><br><span class="line">	执行代码块 <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (条件表达式 <span class="number">2</span>) &#123;</span><br><span class="line">	执行代码块 <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">……</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	执行代码块 n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）案例实操  </p>
<p>（1）需求 1： 需求：输入年龄，如果年龄小于 18 岁，则输出“童年”。如果年龄大于等于 18 且小于等于 30， 则输出“中年”，否则，输出“老年”。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"input age"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readInt()</span><br><span class="line">        <span class="keyword">if</span> (age &lt; <span class="number">18</span>)&#123;</span><br><span class="line">        	println(<span class="string">"童年"</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(age&gt;=<span class="number">18</span> &amp;&amp; age&lt;<span class="number">30</span>)&#123;</span><br><span class="line">        	println(<span class="string">"中年"</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        	println(<span class="string">"老年"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）需求 2： Scala 中 if else 表达式其实是有返回值的，<strong>具体返回值取决于满足条件的代码体的最后一行内容</strong>。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"input age"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readInt()</span><br><span class="line">        <span class="keyword">val</span> res :<span class="type">String</span> = <span class="keyword">if</span> (age &lt; <span class="number">18</span>)&#123;</span><br><span class="line">        	<span class="string">"童年"</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(age&gt;=<span class="number">18</span> &amp;&amp; age&lt;<span class="number">30</span>)&#123;</span><br><span class="line">        	<span class="string">"中年"</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        	<span class="string">"老年"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（3）需求 3： Scala 中返回值类型不一致，取它们共同的祖先类型。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"input age"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readInt()</span><br><span class="line">        <span class="keyword">val</span> res:<span class="type">Any</span> = <span class="keyword">if</span> (age &lt; <span class="number">18</span>)&#123;</span><br><span class="line">        	<span class="string">"童年"</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(age&gt;=<span class="number">18</span> &amp;&amp; age&lt;<span class="number">30</span>)&#123;</span><br><span class="line">        	<span class="string">"中年"</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        	<span class="number">100</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（4）需求 4： Java 中的三元运算符可以用 if else 实现  </p>
<p>如果大括号{}内的逻辑代码只有一行，大括号可以省略。 如果省略大括号， if 只对最近的一行逻辑代码起作用。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// Java</span></span><br><span class="line">        <span class="comment">// int result = flag?1:0</span></span><br><span class="line">        <span class="comment">// Scala</span></span><br><span class="line">        println(<span class="string">"input age"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readInt()</span><br><span class="line">        <span class="keyword">val</span> res:<span class="type">Any</span> = <span class="keyword">if</span> (age &lt; <span class="number">18</span>) <span class="string">"童年"</span> <span class="keyword">else</span> <span class="string">"成年"</span></span><br><span class="line">        <span class="string">"不起作用"</span></span><br><span class="line">        println(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-2-嵌套分支"><a href="#4-2-嵌套分支" class="headerlink" title="4.2 嵌套分支"></a>4.2 嵌套分支</h2><p>在一个分支结构中又完整的嵌套了另一个完整的分支结构，里面的分支的结构称为内层。分支外面的分支结构称为外层分支。嵌套分支不要超过 3 层。  </p>
<p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>()</span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）案例实操  </p>
<p>需求： 如果输入的年龄小于 18， 返回“童年”。 如果输入的年龄大于等于 18， 需要再判断： 如果年龄大于等于 18 且小于 30， 返回“中年”； 如果其他，返回“老年”。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestIfElse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"input age"</span>)</span><br><span class="line">        <span class="keyword">var</span> age = <span class="type">StdIn</span>.readInt()</span><br><span class="line">        <span class="keyword">val</span> res :<span class="type">String</span> = <span class="keyword">if</span> (age &lt; <span class="number">18</span>)&#123;</span><br><span class="line">        	<span class="string">"童年"</span></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(age&gt;=<span class="number">18</span> &amp;&amp; age&lt;<span class="number">30</span>)&#123;</span><br><span class="line">                <span class="string">"中年"</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="string">"老年"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        println(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-Switch-分支结构"><a href="#4-3-Switch-分支结构" class="headerlink" title="4.3 Switch 分支结构"></a>4.3 Switch 分支结构</h2><p>在 Scala 中没有 Switch，而是使用模式匹配来处理。模式匹配涉及到的知识点较为综合，因此我们放在后面讲解。  </p>
<h2 id="4-4-For-循环控制"><a href="#4-4-For-循环控制" class="headerlink" title="4.4 For 循环控制"></a>4.4 For 循环控制</h2><p>Scala 也为 for 循环这一常见的控制结构提供了非常多的特性，这些 for 循环的特性被称为 for 推导式或 for 表达式。  </p>
<h3 id="4-4-1-范围数据循环（-To）"><a href="#4-4-1-范围数据循环（-To）" class="headerlink" title="4.4.1 范围数据循环（ To）"></a>4.4.1 范围数据循环（ To）</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">3</span>)&#123;</span><br><span class="line">	print(i + <span class="string">" "</span>)</span><br><span class="line">&#125;</span><br><span class="line">println()</span><br></pre></td></tr></table></figure>

<p>（1）i 表示循环的变量， &lt;-  初始 to  终止</p>
<p>（2）i 将会从 1-3 循环， 前后闭合  </p>
<p>2）案例实操  </p>
<p>需求： 输出 5 句 “宋宋，告别海狗人参丸吧”</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">5</span>)&#123;</span><br><span class="line">        	println(<span class="string">"宋宋，告别海狗人参丸吧"</span>+i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-2-范围数据循环（-Until）"><a href="#4-4-2-范围数据循环（-Until）" class="headerlink" title="4.4.2 范围数据循环（ Until）"></a>4.4.2 范围数据循环（ Until）</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> until <span class="number">3</span>) &#123;</span><br><span class="line">	print(i + <span class="string">" "</span>)</span><br><span class="line">&#125;</span><br><span class="line">println()</span><br></pre></td></tr></table></figure>

<p>（1）这种方式和前面的区别在于 i 是从 1 到 3-1<br>（2）前闭后开</p>
<p>2）案例实操</p>
<p>需求： 输出 5 句 “宋宋，告别海狗人参丸吧”  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">for</span>(i &lt;- <span class="number">1</span> until <span class="number">5</span> + <span class="number">1</span>)&#123;</span><br><span class="line">        	println(<span class="string">"宋宋，告别海狗人参丸吧"</span> + i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-3-循环守卫"><a href="#4-4-3-循环守卫" class="headerlink" title="4.4.3 循环守卫"></a>4.4.3 循环守卫</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">3</span> <span class="keyword">if</span> i != <span class="number">2</span>) &#123;</span><br><span class="line">	print(i + <span class="string">" "</span>)</span><br><span class="line">&#125;</span><br><span class="line">println()</span><br></pre></td></tr></table></figure>

<p>说明：  </p>
<p>（1）循环守卫，即循环保护式（也称条件判断式，守卫）。保护式为 true 则进入循环体内部，为 false 则跳过，类似于 continue。<br>（2）上面的代码等价：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">3</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (i != <span class="number">2</span>) &#123;</span><br><span class="line">    	print(i + <span class="string">" "</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）案例实操  </p>
<p>需求： 输出 1 到 5 中，不等于 3 的值  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">5</span> <span class="keyword">if</span> i != <span class="number">3</span>) &#123;</span><br><span class="line">        	println(i + <span class="string">"宋宋"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-4-循环步长"><a href="#4-4-4-循环步长" class="headerlink" title="4.4.4 循环步长"></a>4.4.4 循环步长</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">10</span> by <span class="number">2</span>) &#123;</span><br><span class="line">	println(<span class="string">"i="</span> + i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明： by 表示步长  </p>
<p>2）案例实操  </p>
<p>需求：输出 1 到 10 以内的所有奇数  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">10</span> by <span class="number">2</span>) &#123;</span><br><span class="line">	println(<span class="string">"i="</span> + i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果  </p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">i</span>=<span class="string">1</span></span><br><span class="line"><span class="attr">i</span>=<span class="string">3</span></span><br><span class="line"><span class="attr">i</span>=<span class="string">5</span></span><br><span class="line"><span class="attr">i</span>=<span class="string">7</span></span><br><span class="line"><span class="attr">i</span>=<span class="string">9</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-5-嵌套循环"><a href="#4-4-5-嵌套循环" class="headerlink" title="4.4.5 嵌套循环"></a>4.4.5 嵌套循环</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">3</span>; j &lt;- <span class="number">1</span> to <span class="number">3</span>) &#123;</span><br><span class="line">	println(<span class="string">" i ="</span> + i + <span class="string">" j = "</span> + j)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明： 没有关键字，所以范围后一定要加；来隔断逻辑  </p>
<p>2）基本语法  </p>
<p>上面的代码等价：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (j &lt;- <span class="number">1</span> to <span class="number">3</span>) &#123;</span><br><span class="line">    	println(<span class="string">"i ="</span> + i + <span class="string">" j="</span> + j)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-6-引入变量"><a href="#4-4-6-引入变量" class="headerlink" title="4.4.6 引入变量"></a>4.4.6 引入变量</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">3</span>; j = <span class="number">4</span> - i) &#123;</span><br><span class="line">	println(<span class="string">"i="</span> + i + <span class="string">" j="</span> + j)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：  </p>
<p>（1） for 推导式一行中有多个表达式时，所以要加 ; 来隔断逻辑<br>（2） for 推导式有一个不成文的约定：当 for 推导式仅包含单一表达式时使用圆括号，当包含多个表达式时，一般每行一个表达式，并用花括号代替圆括号，如下  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	i &lt;- <span class="number">1</span> to <span class="number">3</span></span><br><span class="line">	j = <span class="number">4</span> - i</span><br><span class="line">&#125; &#123;</span><br><span class="line">	println(<span class="string">"i="</span> + i + <span class="string">" j="</span> + j)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）案例实操  </p>
<p>上面的代码等价于  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">3</span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> j = <span class="number">4</span> - i</span><br><span class="line">	println(<span class="string">"i="</span> + i + <span class="string">" j="</span> + j)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-7-循环返回值"><a href="#4-4-7-循环返回值" class="headerlink" title="4.4.7 循环返回值"></a>4.4.7 循环返回值</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> res = <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span>) <span class="keyword">yield</span> i</span><br><span class="line">println(res)</span><br></pre></td></tr></table></figure>

<p>说明：将遍历过程中处理的结果返回到一个新 Vector 集合中，使用 yield 关键字。<br><strong>注意：开发中很少使用。</strong>  </p>
<p>2）案例实操  </p>
<p>需求：将原数据中所有值乘以 2， 并把数据返回到一个新的集合中</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> res = <span class="keyword">for</span>(i &lt;<span class="number">-1</span> to <span class="number">10</span>) <span class="keyword">yield</span> &#123;</span><br><span class="line">        	i * <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：<br>Vector(2, 4, 6, 8, 10, 12, 14, 16, 18, 20)  </p>
<h3 id="4-4-8-倒序打印"><a href="#4-4-8-倒序打印" class="headerlink" title="4.4.8 倒序打印"></a>4.4.8 倒序打印</h3><p>1） 说明：如果想倒序打印一组数据，可以用 reverse。  </p>
<p>2） 案例实操：  </p>
<p>需求：倒序打印 10 到 1  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span> reverse)&#123;</span><br><span class="line">	println(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-5-While-和-do-While-循环控制"><a href="#4-5-While-和-do-While-循环控制" class="headerlink" title="4.5 While 和 do..While 循环控制"></a>4.5 While 和 do..While 循环控制</h2><p>While 和 do..While 的使用和 Java 语言中用法相同。  </p>
<h3 id="4-5-1-While-循环控制"><a href="#4-5-1-While-循环控制" class="headerlink" title="4.5.1 While 循环控制"></a>4.5.1 While 循环控制</h3><p>1）基本语法</p>
<p>循环变量初始化<br>while (循环条件) {<br>    循环体(语句)<br>    循环变量迭代<br>}</p>
<p>说明：<br>（1）循环条件是返回一个布尔值的表达式<br>（2）while 循环是先判断再执行语句<br>（3）与 for 语句不同， while 语句没有返回值，即整个 while 语句的结果是 Unit 类型()<br>（4）因为 while 中没有返回值，所以当要用该语句来计算并返回结果时，就不可避免的使用变量，而变量需要声明在 while 循环的外部，那么就等同于循环的内部对外部的变量造成了影响，所以不推荐使用，而是推荐使用 for 循环。  </p>
<p>2）案例实操  </p>
<p>需求： 输出 10 句 “宋宋，喜欢海狗人参丸”  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestWhile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            println(<span class="string">"宋宋，喜欢海狗人参丸"</span> + i)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-5-2-do-while-循环控制"><a href="#4-5-2-do-while-循环控制" class="headerlink" title="4.5.2 do..while 循环控制"></a>4.5.2 do..while 循环控制</h3><p>1）基本语法</p>
<p>循环变量初始化:<br>do{<br>    循环体(语句)<br>    循环变量迭代<br>} while(循环条件)</p>
<p>说明<br>（1）循环条件是返回一个布尔值的表达式<br>（2） do..while 循环是先执行，再判断  </p>
<p>2）案例实操<br>需求： 输出 10 句 “宋宋，喜欢海狗人参丸”  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestWhile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">        do &#123;</span><br><span class="line">            println(<span class="string">"宋宋，喜欢海狗人参丸"</span> + i)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (i &lt; <span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-6-循环中断"><a href="#4-6-循环中断" class="headerlink" title="4.6 循环中断"></a>4.6 循环中断</h2><p>1）基本说明</p>
<p>Scala 内置控制结构特地去掉了 break 和 continue， 是为了更好的适应函数式编程， 推荐使用函数式的风格解决break和continue的功能，而不是一个关键字。 Scala中使用breakable控制结构来实现 break 和 continue 功能。  </p>
<p>2）案例实操  </p>
<p>需求 1： 采用异常的方式退出循环  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- <span class="number">1</span> to <span class="number">10</span>) &#123;</span><br><span class="line">            println(elem)</span><br><span class="line">            <span class="keyword">if</span> (elem == <span class="number">5</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">RuntimeException</span></span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span> &#123;</span><br><span class="line">    	<span class="keyword">case</span> e =&gt;</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"正常结束循环"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需求 2： 采用 Scala 自带的函数，退出循环  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.util.control.<span class="type">Breaks</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">Breaks</span>.breakable(</span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- <span class="number">1</span> to <span class="number">10</span>) &#123;</span><br><span class="line">            println(elem)</span><br><span class="line">            <span class="keyword">if</span> (elem == <span class="number">5</span>) <span class="type">Breaks</span>.<span class="keyword">break</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    println(<span class="string">"正常结束循环"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需求 3： 对 break 进行省略  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.util.control.<span class="type">Breaks</span>._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestBreak</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        breakable &#123;</span><br><span class="line">            <span class="keyword">for</span> (elem &lt;- <span class="number">1</span> to <span class="number">10</span>) &#123;</span><br><span class="line">                println(elem)</span><br><span class="line">                <span class="keyword">if</span> (elem == <span class="number">5</span>) <span class="keyword">break</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        println(<span class="string">"正常结束循环"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需求 4：循环遍历 10 以内的所有数据，奇数打印，偶数跳过（continue）  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestBreak</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- <span class="number">1</span> to <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (elem % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            	println(elem)</span><br><span class="line">        	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        		println(<span class="string">"continue"</span>)</span><br><span class="line">        	&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-7-多重循环"><a href="#4-7-多重循环" class="headerlink" title="4.7 多重循环"></a>4.7 多重循环</h2><p>1）基本说明</p>
<p>（1）将一个循环放在另一个循环体内，就形成了嵌套循环。其中， for， while， do…while均可以作为外层循环和内层循环。【建议一般使用两层，最多不要超过 3 层】<br>（2）设外层循环次数为 m 次，内层为 n 次，则内层循环体实际上需要执行 m * n 次。</p>
<p>2）案例实操</p>
<p>需求：打印出九九乘法表</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestWhile</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">9</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (j &lt;- <span class="number">1</span> to i) &#123;</span><br><span class="line">                print(j + <span class="string">"*"</span> + i + <span class="string">"="</span> + (i * j) + <span class="string">"\t"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            println()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20221024110225344.png" alt="image-20221024110225344"></p>
<h1 id="第-5-章-函数式编程"><a href="#第-5-章-函数式编程" class="headerlink" title="第 5 章 函数式编程"></a>第 5 章 函数式编程</h1><p>1） 面向对象编程  </p>
<p>解决问题，分解对象，行为，属性，然后通过对象的关系以及行为的调用来解决问题。<br>对象： 用户<br>行为：登录、连接 JDBC、读取数据库<br>属性：用户名、密码<br>Scala 语言是一个完全面向对象编程语言。万物皆对象<br>对象的本质：对数据和行为的一个封装  </p>
<p>2）函数式编程  </p>
<p>解决问题时，将问题分解成一个一个的步骤，将每个步骤进行封装（函数），通过调用这些封装好的步骤，解决问题。<br>例如： 请求-&gt;用户名、密码-&gt;连接 JDBC-&gt;读取数据库<br>Scala 语言是一个完全函数式编程语言。 万物皆函数<br>函数的本质：函数可以当做一个值进行传递  </p>
<p>3）在 Scala 中函数式编程和面向对象编程完美融合在一起了  </p>
<h2 id="5-1-函数基础"><a href="#5-1-函数基础" class="headerlink" title="5.1 函数基础"></a>5.1 函数基础</h2><h3 id="5-1-1-函数基本语法"><a href="#5-1-1-函数基本语法" class="headerlink" title="5.1.1 函数基本语法"></a>5.1.1 函数基本语法</h3><p>1）基本语法  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20221026102021520.png" alt="image-20221026102021520"></p>
<p>2） 案例实操  </p>
<p>需求：定义一个函数，实现将传入的名称打印出来。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// （1）函数定义</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(arg: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(arg)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// （2）函数调用</span></span><br><span class="line">        <span class="comment">// 函数名（参数）</span></span><br><span class="line">        f(<span class="string">"hello world"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-2-函数和方法的区别"><a href="#5-1-2-函数和方法的区别" class="headerlink" title="5.1.2 函数和方法的区别"></a>5.1.2 函数和方法的区别</h3><p>1） 核心概念  </p>
<p>（1）为完成某一功能的程序语句的集合，称为函数。<br>（2）类中的函数称之方法。  </p>
<p>2） 案例实操  </p>
<p>（1）Scala 语言可以在任何的语法结构中声明任何的语法<br>（2）函数没有重载和重写的概念；方法可以进行重载和重写<br>（3）Scala 中函数可以嵌套定义  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="comment">// (2)方法可以进行重载和重写，程序可以执行</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// (1) Scala 语言可以在任何的语法结构中声明任何的语法</span></span><br><span class="line">        <span class="keyword">import</span> java.util.<span class="type">Date</span></span><br><span class="line">        <span class="keyword">new</span> <span class="type">Date</span>()</span><br><span class="line">        <span class="comment">// (2) 函数没有重载和重写的概念，程序报错</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">        	println(<span class="string">"无参，无返回值"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        test()</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(name:<span class="type">String</span>):<span class="type">Unit</span>=&#123;</span><br><span class="line">        	println()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// (3) Scala 中函数可以嵌套定义</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test2</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">test3</span></span>(name:<span class="type">String</span>):<span class="type">Unit</span>=&#123;</span><br><span class="line">                println(<span class="string">"函数可以嵌套定义"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test01_FunctionAndMethod</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 定义函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(name: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"hi: "</span> + name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 调用函数</span></span><br><span class="line">    sayHello(<span class="string">"ruirui"</span>) <span class="comment">//优先调用临近的,也可以调用此对象中的方法，原因是具备可见性，如果调用其他对象中的方法，则就必须用 "对象." 进行调用</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用对象方法</span></span><br><span class="line">    <span class="type">Test01_FunctionAndMethod</span>.sayHello(<span class="string">"ruirui"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> ret = <span class="type">Test01_FunctionAndMethod</span>.sayHello(<span class="string">"ruirui"</span>, <span class="number">18</span>);</span><br><span class="line">    println(ret)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义类或者对象object中，叫做方法，广义上都可以叫做函数</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(name: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"Hi: "</span> + name)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">String</span> = &#123; <span class="comment">//方法重载，并且带返回值</span></span><br><span class="line">     println(<span class="string">"Hi: "</span> + name+<span class="string">", age: "</span> + age)</span><br><span class="line">    <span class="string">"Hi: "</span> + name + <span class="string">", age: "</span> + age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-3-函数定义"><a href="#5-1-3-函数定义" class="headerlink" title="5.1.3 函数定义"></a>5.1.3 函数定义</h3><p>1） 函数定义  </p>
<p>（1）函数 1：无参，无返回值<br>（2）函数 2：无参，有返回值<br>（3）函数 3：有参，无返回值<br>（4）函数 4：有参，有返回值<br>（5）函数 5：多参，无返回值<br>（6）函数 6：多参，有返回值  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunctionDeclare</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 函数 1：无参，无返回值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test1</span></span>(): <span class="type">Unit</span> =&#123;</span><br><span class="line">        	println(<span class="string">"无参，无返回值"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        test1()</span><br><span class="line">        <span class="comment">// 函数 2：无参，有返回值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test2</span></span>():<span class="type">String</span>=&#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="string">"无参，有返回值"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(test2())</span><br><span class="line">        <span class="comment">// 函数 3：有参，无返回值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test3</span></span>(s:<span class="type">String</span>):<span class="type">Unit</span>=&#123;</span><br><span class="line">        	println(s)</span><br><span class="line">        &#125;</span><br><span class="line">        test3(<span class="string">"jinlian"</span>)</span><br><span class="line">        <span class="comment">// 函数 4：有参，有返回值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test4</span></span>(s:<span class="type">String</span>):<span class="type">String</span>=&#123;</span><br><span class="line">        	<span class="keyword">return</span> s+<span class="string">"有参，有返回值"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(test4(<span class="string">"hello "</span>))</span><br><span class="line">        <span class="comment">// 函数 5：多参，无返回值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test5</span></span>(name:<span class="type">String</span>, age:<span class="type">Int</span>):<span class="type">Unit</span>=&#123;</span><br><span class="line">        	println(<span class="string">s"<span class="subst">$name</span>, <span class="subst">$age</span>"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        test5(<span class="string">"dalang"</span>,<span class="number">40</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test02_FunctionDefine</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//    （ 1）函数 1：无参，无返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"f1"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f1()</span><br><span class="line">    println(f1())</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （ 2）函数 2：无参，有返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(): <span class="type">Int</span> = &#123;</span><br><span class="line">      println(<span class="string">"f2"</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f2()</span><br><span class="line">    println(f2())</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （ 3）函数 3：有参，无返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f3</span></span>(name: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(name)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f3(<span class="string">"rui"</span>)</span><br><span class="line">    println(f3(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （ 4）函数 4：有参，有返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f4</span></span>(name: <span class="type">String</span>): <span class="type">String</span> = &#123;</span><br><span class="line">      println(<span class="string">"f4: "</span> + name)</span><br><span class="line">      <span class="keyword">return</span> name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f4(<span class="string">"rui"</span>)</span><br><span class="line">    println(f4(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （ 5）函数 5：多参，无返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">d5</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">s"<span class="subst">$&#123;name&#125;</span>,<span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    d5(<span class="string">"rui"</span>, <span class="number">18</span>)</span><br><span class="line">    println(d5(<span class="string">"rui"</span>, <span class="number">18</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （ 6）函数 6：多参，有返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">d6</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">String</span> = &#123;</span><br><span class="line">      println(<span class="string">s"<span class="subst">$&#123;name&#125;</span>,<span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">      <span class="keyword">return</span> name + <span class="string">","</span> + age</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    d6(<span class="string">"rui"</span>, <span class="number">18</span>)</span><br><span class="line">    println(d6(<span class="string">"rui"</span>, <span class="number">18</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-4-函数参数"><a href="#5-1-4-函数参数" class="headerlink" title="5.1.4 函数参数"></a>5.1.4 函数参数</h3><p>1） 案例实操  </p>
<p>（1）可变参数<br>（2）如果参数列表中存在多个参数，那么可变参数一般放置在最后<br>（3）参数默认值，一般将有默认值的参数放置在参数列表的后面<br>（4）带名参数  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// (1)可变参数</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>( s : <span class="type">String</span>* ): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(s)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 有输入参数：输出 Array</span></span><br><span class="line">        test(<span class="string">"Hello"</span>, <span class="string">"Scala"</span>)</span><br><span class="line">        <span class="comment">// 无输入参数：输出 List()</span></span><br><span class="line">        test()</span><br><span class="line">        <span class="comment">// (2)如果参数列表中存在多个参数，那么可变参数一般放置在最后</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test2</span></span>( name : <span class="type">String</span>, s: <span class="type">String</span>* ): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(name + <span class="string">","</span> + s)</span><br><span class="line">        &#125;</span><br><span class="line">        test2(<span class="string">"jinlian"</span>, <span class="string">"dalang"</span>)</span><br><span class="line">        <span class="comment">// (3)参数默认值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test3</span></span>( name : <span class="type">String</span>, age : <span class="type">Int</span> = <span class="number">30</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(<span class="string">s"<span class="subst">$name</span>, <span class="subst">$age</span>"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果参数传递了值，那么会覆盖默认值</span></span><br><span class="line">        test3(<span class="string">"jinlian"</span>, <span class="number">20</span>)</span><br><span class="line">        <span class="comment">// 如果参数有默认值，在调用的时候，可以省略这个参数</span></span><br><span class="line">        test3(<span class="string">"dalang"</span>)</span><br><span class="line">        <span class="comment">// 一般情况下， 将有默认值的参数放置在参数列表的后面</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test4</span></span>( sex : <span class="type">String</span> = <span class="string">"男"</span>, name : <span class="type">String</span> ): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(<span class="string">s"<span class="subst">$name</span>, <span class="subst">$sex</span>"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Scala 函数中参数传递是，从左到右</span></span><br><span class="line">        <span class="comment">//test4("wusong")</span></span><br><span class="line">        <span class="comment">//(4)带名参数</span></span><br><span class="line">        test4(name=<span class="string">"ximenqing"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test03_FunctionParameter</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//    （1）可变参数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>(str: <span class="type">String</span>*): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(str)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f1(<span class="string">"1"</span>, <span class="string">"2"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （2）如果参数列表中存在多个参数，那么可变参数一般放置在最后</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(str1: <span class="type">String</span>, str2: <span class="type">String</span>*): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"str1:"</span> + str1)</span><br><span class="line">      println(<span class="string">"str2:"</span> + str2)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f2(<span class="string">"str1"</span>)</span><br><span class="line">    f2(<span class="string">"str1"</span>, <span class="string">"str2"</span>, <span class="string">"str22"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （3）参数默认值，一般将有默认值的参数放置在参数列表的后面</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f3</span></span>(name: <span class="type">String</span> = <span class="string">"atguigu"</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(name)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f3()</span><br><span class="line">    f3(<span class="string">"nihao"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    （4）带名参数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f4</span></span>(name: <span class="type">String</span> = <span class="string">"atguigu"</span>, age: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">s"<span class="subst">$&#123;name&#125;</span>,<span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f4(<span class="string">"rui"</span>, <span class="number">18</span>)</span><br><span class="line">    f4(age = <span class="number">18</span>, name = <span class="string">"rui"</span>)</span><br><span class="line">    f4(age = <span class="number">21</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-5-函数至简原则（重点）"><a href="#5-1-5-函数至简原则（重点）" class="headerlink" title="5.1.5 函数至简原则（重点）"></a>5.1.5 函数至简原则（重点）</h3><p>函数至简原则：能省则省  </p>
<p>1） 至简原则细节  </p>
<p>（1）return 可以省略， Scala 会使用函数体的最后一行代码作为返回值<br>（2）如果函数体只有一行代码，可以省略花括号<br>（3）返回值类型如果能够推断出来，那么可以省略（ :和返回值类型一起省略）<br>（4）如果有 return，则不能省略返回值类型，必须指定<br>（5）如果函数明确声明 unit，那么即使函数体中使用 return 关键字也不起作用<br>（6）Scala 如果期望是无返回值类型，可以省略等号<br>（7）如果函数无参，但是声明了参数列表，那么调用时，小括号，可加可不加<br>（8）如果函数没有参数列表，那么小括号可以省略，调用时小括号必须省略<br>（9）如果不关心名称，只关心逻辑处理，那么函数名（ def）可以省略  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// （ 0）函数标准写法</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>( s : <span class="type">String</span> ): <span class="type">String</span> = &#123;</span><br><span class="line">        	<span class="keyword">return</span> s + <span class="string">" jinlian"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(f(<span class="string">"Hello"</span>))</span><br><span class="line">        <span class="comment">// 至简原则:能省则省</span></span><br><span class="line">        <span class="comment">//（1） return 可以省略,Scala 会使用函数体的最后一行代码作为返回值</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>( s : <span class="type">String</span> ): <span class="type">String</span> = &#123;</span><br><span class="line">        	s + <span class="string">" jinlian"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(f1(<span class="string">"Hello"</span>))</span><br><span class="line">        <span class="comment">//（2）如果函数体只有一行代码，可以省略花括号</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(s:<span class="type">String</span>):<span class="type">String</span> = s + <span class="string">" jinlian"</span></span><br><span class="line">        <span class="comment">//（3）返回值类型如果能够推断出来，那么可以省略（ :和返回值类型一起省略）</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f3</span></span>( s : <span class="type">String</span> ) = s + <span class="string">" jinlian"</span></span><br><span class="line">        println(f3(<span class="string">"Hello3"</span>))</span><br><span class="line">        <span class="comment">//（4）如果有 return，则不能省略返回值类型，必须指定。</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f4</span></span>() :<span class="type">String</span> = <span class="keyword">return</span> <span class="string">"ximenqing4"</span></span><br><span class="line">        println(f4())</span><br><span class="line">        <span class="comment">//（5）如果函数明确声明 unit，那么即使函数体中使用 return 关键字也不起作用</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f5</span></span>(): <span class="type">Unit</span> = <span class="keyword">return</span> <span class="string">"dalang5"</span></span><br><span class="line">        println(f5())</span><br><span class="line">        <span class="comment">//（6） Scala 如果期望是无返回值类型,可以省略等号,但是不能省略大括号了</span></span><br><span class="line">        <span class="comment">// 将无返回值的函数称之为过程</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f6</span></span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">      		println(name)</span><br><span class="line">    	&#125;</span><br><span class="line">        println(f6(<span class="string">"rui"</span>))</span><br><span class="line">        <span class="comment">//（7）如果函数无参，但是声明了参数列表，那么调用时，小括号，可加可不加</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f7</span></span>() = println(<span class="string">"dalang7"</span>)</span><br><span class="line">        println(f7())</span><br><span class="line">        println(f7)</span><br><span class="line">        <span class="comment">//（8）如果函数没有参数列表，那么小括号可以省略,调用时小括号必须省略</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f8</span> </span>= println(<span class="string">"dalang8"</span>)</span><br><span class="line">        <span class="comment">// println(f8())</span></span><br><span class="line">        println(f8)</span><br><span class="line">        <span class="comment">//（9）如果不关心名称，只关心逻辑处理，那么函数名（def）可以省略</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f9</span> </span>= (x:<span class="type">String</span>)=&gt;&#123;println(<span class="string">"wusong"</span>)&#125;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f10</span></span>(f:<span class="type">String</span>=&gt;<span class="type">Unit</span>) = &#123;</span><br><span class="line">        	f(<span class="string">""</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        f10(f9)</span><br><span class="line">        println(f10((x:<span class="type">String</span>)=&gt;&#123;println(<span class="string">"wusong"</span>)&#125;))</span><br><span class="line">        <span class="comment">// 或者</span></span><br><span class="line">        () =&gt; println(<span class="string">"test"</span>)</span><br><span class="line">    	(name: <span class="type">String</span>) =&gt; println(<span class="string">"test"</span>) <span class="comment">// 匿名函数，lambda表达式</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test04_Simplify</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f0</span></span>(name: <span class="type">String</span>): <span class="type">String</span> = &#123;</span><br><span class="line">      <span class="keyword">return</span> name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(f0(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（1） return 可以省略， Scala 会使用函数体的最后一行代码作为返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>(name: <span class="type">String</span>): <span class="type">String</span> = &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(f1(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（2）如果函数体只有一行代码，可以省略花括号</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(name: <span class="type">String</span>): <span class="type">String</span> = name</span><br><span class="line"></span><br><span class="line">    println(f2(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（3）返回值类型如果能够推断出来，那么可以省略（ :和返回值类型一起省略）</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f3</span></span>(name: <span class="type">String</span>) = name</span><br><span class="line"></span><br><span class="line">    println(f3(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（4）如果有 return，则不能省略返回值类型，必须指定</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f4</span></span>(name: <span class="type">String</span>): <span class="type">String</span> = <span class="keyword">return</span> name</span><br><span class="line"></span><br><span class="line">    println(f4(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（5）如果函数明确声明 unit，那么即使函数体中使用 return，关键字也不起作用</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f5</span></span>(name: <span class="type">String</span>): <span class="type">Unit</span> = <span class="keyword">return</span> name</span><br><span class="line"></span><br><span class="line">    println(f5(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（6）Scala 如果期望是无返回值类型，可以省略等号,但是不能省略大括号了</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f6</span></span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">      println(name)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(f6(<span class="string">"rui"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（7）如果函数无参，但是声明了参数列表，那么调用时，小括号，可加可不加</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f7</span></span>() = println(<span class="string">"rui"</span>)</span><br><span class="line"></span><br><span class="line">    f7()</span><br><span class="line">    f7</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（8）如果函数没有参数列表，那么小括号可以省略，调用时小括号必须省略</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f8</span> </span>= println(<span class="string">"rui"</span>)</span><br><span class="line"></span><br><span class="line">    f8</span><br><span class="line"></span><br><span class="line">    <span class="comment">//（9）如果不关心名称，只关心逻辑处理，那么函数名（ def）可以省略</span></span><br><span class="line">    <span class="comment">// () =&gt; println("rui")</span></span><br><span class="line"></span><br><span class="line">    (name: <span class="type">String</span>) =&gt; println(<span class="string">"rui"</span>) <span class="comment">// 匿名函数，lambda表达式</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-2-函数高级"><a href="#5-2-函数高级" class="headerlink" title="5.2 函数高级"></a>5.2 函数高级</h2><h3 id="5-2-1-匿名函数"><a href="#5-2-1-匿名函数" class="headerlink" title="5.2.1 匿名函数"></a>5.2.1 匿名函数</h3><p>1）说明</p>
<p>没有名字的函数就是匿名函数。<br>(x: Int) =&gt; {函数体}<br>x： 表示输入参数类型； Int：表示输入参数类型； 函数体： 表示具体代码逻辑  </p>
<p>2） 案例实操</p>
<p>需求 1：传递的函数有一个参数<br>传递匿名函数至简原则：<br>（1）参数的类型可以省略，会根据形参进行自动的推导<br>（2）类型省略之后，发现只有一个参数，则圆括号可以省略； 其他情况：没有参数和参数超过 1 的永远不能省略圆括号。<br>（3）匿名函数如果只有一行， 则大括号也可以省略<br>（4）如果参数只出现一次，则参数省略且后面参数可以用_代替</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//（1）定义一个函数：参数包含数据和逻辑函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">operation</span></span>(arr: <span class="type">Array</span>[<span class="type">Int</span>], op: <span class="type">Int</span> =&gt; <span class="type">Int</span>) = &#123;</span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- arr) <span class="keyword">yield</span> op(elem)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//（2）定义逻辑函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">op</span></span>(ele: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">        ele + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//（3）标准函数调用</span></span><br><span class="line">    <span class="keyword">val</span> arr = operation(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), op)</span><br><span class="line">    println(arr.mkString(<span class="string">","</span>))</span><br><span class="line">    <span class="comment">//（4）采用匿名函数</span></span><br><span class="line">    <span class="keyword">val</span> arr1 = operation(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), (ele: <span class="type">Int</span>) =&gt; &#123;</span><br><span class="line">    	ele + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    println(arr1.mkString(<span class="string">","</span>))</span><br><span class="line">    <span class="comment">//（4.1）参数的类型可以省略，会根据形参进行自动的推导;</span></span><br><span class="line">    <span class="keyword">val</span> arr2 = operation(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), (ele) =&gt; &#123;</span><br><span class="line">    	ele + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    println(arr2.mkString(<span class="string">","</span>))</span><br><span class="line">    <span class="comment">//（4.2）类型省略之后，发现只有一个参数，则圆括号可以省略；其他情况：没有参数和参数超过 1 的永远不能省略圆括号。</span></span><br><span class="line">    <span class="keyword">val</span> arr3 = operation(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), ele =&gt; &#123;</span><br><span class="line">    	ele + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    println(arr3.mkString(<span class="string">","</span>))</span><br><span class="line">    <span class="comment">//（4.3） 匿名函数如果只有一行，则大括号也可以省略</span></span><br><span class="line">    <span class="keyword">val</span> arr4 = operation(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), ele =&gt; ele + <span class="number">1</span>)</span><br><span class="line">    println(arr4.mkString(<span class="string">","</span>))</span><br><span class="line">    <span class="comment">//（4.4）如果参数只出现一次，则参数省略且后面参数可以用_代替</span></span><br><span class="line">    <span class="keyword">val</span> arr5 = operation(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), _ + <span class="number">1</span>)</span><br><span class="line">    println(arr5.mkString(<span class="string">","</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需求 2：传递的函数有两个参数  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">calculator</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>, op: (<span class="type">Int</span>, <span class="type">Int</span>) =&gt; <span class="type">Int</span>): <span class="type">Int</span>= &#123;</span><br><span class="line">        	op(a, b)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// （1）标准版</span></span><br><span class="line">        println(calculator(<span class="number">2</span>, <span class="number">3</span>, (x: <span class="type">Int</span>, y: <span class="type">Int</span>) =&gt; &#123;x + y&#125;))</span><br><span class="line">        <span class="comment">// （2）如果只有一行，则大括号也可以省略</span></span><br><span class="line">        println(calculator(<span class="number">2</span>, <span class="number">3</span>, (x: <span class="type">Int</span>, y: <span class="type">Int</span>) =&gt; x + y))</span><br><span class="line">        <span class="comment">// （3）参数的类型可以省略，会根据形参进行自动的推导;</span></span><br><span class="line">        println(calculator(<span class="number">2</span>, <span class="number">3</span>, (x , y) =&gt; x + y))</span><br><span class="line">        <span class="comment">// （4）如果参数只出现一次，则参数省略且后面参数可以用_代替</span></span><br><span class="line">        println(calculator(<span class="number">2</span>, <span class="number">3</span>, _ + _))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test05_Lambda</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> fun = (name: <span class="type">String</span>) =&gt; println(name) <span class="comment">// 返回函数类型</span></span><br><span class="line">    fun(<span class="string">"atguigu"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个函数，以函数作为参数输入</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(func: <span class="type">String</span> =&gt; <span class="type">Unit</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      func(<span class="string">"atguigu"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f(fun)</span><br><span class="line">    f((name: <span class="type">String</span>) =&gt; &#123;</span><br><span class="line">      println(name)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 匿名函数的简化原则</span></span><br><span class="line">    <span class="comment">//（1）参数的类型可以省略，会根据形参进行自动的推导</span></span><br><span class="line">    f((name) =&gt; &#123;</span><br><span class="line">      println(name)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//（2）类型省略之后，发现只有一个参数，则圆括号可以省略； 其他情况：没有参数和参</span></span><br><span class="line">    <span class="comment">//    数超过 1 的永远不能省略圆括号。</span></span><br><span class="line">    f(name =&gt; &#123;</span><br><span class="line">      println(name)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//（3）匿名函数如果只有一行， 则大括号也可以省略</span></span><br><span class="line">    f(name =&gt; println(name))</span><br><span class="line">    <span class="comment">//（4）如果参数只出现一次，则参数省略且后面参数可以用_代替</span></span><br><span class="line">    f(println(_))</span><br><span class="line">    <span class="comment">//（5）如果可以推断出，当前传入的println是一个函数体，而不是一个调用语句，可以直接省略下划线,直接写要执行的函数名称</span></span><br><span class="line">    f(println)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实际示例，定义一个“二元运算”函数，只操作1和2两个数，但是具体运算通过参数传入</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dualFunctionOneAndTwo</span></span>(fun: (<span class="type">Int</span>, <span class="type">Int</span>) =&gt; <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      fun(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> add = (a: <span class="type">Int</span>, b: <span class="type">Int</span>) =&gt; a + b</span><br><span class="line">    <span class="keyword">val</span> minus = (a: <span class="type">Int</span>, b: <span class="type">Int</span>) =&gt; a - b</span><br><span class="line">    println(dualFunctionOneAndTwo(add))</span><br><span class="line">    println(dualFunctionOneAndTwo(minus))</span><br><span class="line">    <span class="comment">// 匿名函数简化</span></span><br><span class="line">    println(dualFunctionOneAndTwo((a: <span class="type">Int</span>, b: <span class="type">Int</span>) =&gt; a + b))</span><br><span class="line">    println(dualFunctionOneAndTwo((a: <span class="type">Int</span>, b: <span class="type">Int</span>) =&gt; a - b))</span><br><span class="line"></span><br><span class="line">    println(dualFunctionOneAndTwo((a, b) =&gt; a + b))</span><br><span class="line">    println(dualFunctionOneAndTwo((a, b) =&gt; a - b))</span><br><span class="line"></span><br><span class="line">    println(dualFunctionOneAndTwo(_ + _))</span><br><span class="line">    println(dualFunctionOneAndTwo(_ - _))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是顺序颠倒，就不能用下划线了，但是可以颠倒下划线来简化</span></span><br><span class="line">    println(dualFunctionOneAndTwo((a, b) =&gt; b - a))</span><br><span class="line">    println(dualFunctionOneAndTwo(-_ + _))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>扩展练习</p>
<p>练习 1：定义一个匿名函数，并将它作为值赋给变量 fun。函数有三个参数，类型分别为 Int， String， Char，返回值类型为 Boolean。</p>
<p>要求调用函数 fun(0, “”, ‘0’)得到返回值为 false，其它情况均返回 true。  </p>
<p>练习 2： 定义一个函数 func，它接收一个 Int 类型的参数，返回一个函数（记作 f1）。它返回的函数 f1，接收一个 String 类型的参数，同样返回一个函数（记作 f2）。函数 f2 接收一个 Char 类型的参数，返回一个 Boolean 的值。  </p>
<p>要求调用函数 func(0) (“”) (‘0’)得到返回值为 false，其它情况均返回 true。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test08_Practicec</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 练习1</span></span><br><span class="line">    <span class="keyword">val</span> fun = (a: <span class="type">Int</span>, b: <span class="type">String</span>, c: <span class="type">Char</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="number">0</span> == a &amp;&amp; <span class="string">""</span> == b &amp;&amp; '<span class="number">0</span>' == c) <span class="literal">false</span> <span class="keyword">else</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(fun(<span class="number">0</span>, <span class="string">""</span>, '<span class="number">0</span>'))</span><br><span class="line">    println(fun(<span class="number">0</span>, <span class="string">""</span>, '<span class="number">1</span>'))</span><br><span class="line">    println(fun(<span class="number">1</span>, <span class="string">""</span>, '<span class="number">0</span>'))</span><br><span class="line">    println(fun(<span class="number">0</span>, <span class="string">"hello"</span>, '<span class="number">0</span>'))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 练习2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span></span>(a: <span class="type">Int</span>) = &#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>(b: <span class="type">String</span>) = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(c: <span class="type">Char</span>) = &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="number">0</span> == a &amp;&amp; <span class="string">""</span> == b &amp;&amp; '<span class="number">0</span>' == c) <span class="literal">false</span> <span class="keyword">else</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        f2 _ <span class="comment">// 将函数直接返回</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      f1 _</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(func(<span class="number">0</span>)(<span class="string">""</span>)('<span class="number">0</span>'))</span><br><span class="line">    println(func(<span class="number">0</span>)(<span class="string">""</span>)('<span class="number">1</span>'))</span><br><span class="line">    println(func(<span class="number">1</span>)(<span class="string">""</span>)('<span class="number">0</span>'))</span><br><span class="line">    println(func(<span class="number">0</span>)(<span class="string">"hello"</span>)('<span class="number">0</span>'))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 匿名函数简写 （闭包）</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func1</span></span>(a: <span class="type">Int</span>): <span class="type">String</span> =&gt; (<span class="type">Char</span> =&gt; <span class="type">Boolean</span>) = &#123;</span><br><span class="line">      b =&gt; c =&gt; <span class="keyword">if</span> (<span class="number">0</span> == a &amp;&amp; <span class="string">""</span> == b &amp;&amp; '<span class="number">0</span>' == c) <span class="literal">false</span> <span class="keyword">else</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(func1(<span class="number">0</span>)(<span class="string">""</span>)('<span class="number">0</span>'))</span><br><span class="line">    println(func1(<span class="number">0</span>)(<span class="string">""</span>)('<span class="number">1</span>'))</span><br><span class="line">    println(func1(<span class="number">1</span>)(<span class="string">""</span>)('<span class="number">0</span>'))</span><br><span class="line">    println(func1(<span class="number">0</span>)(<span class="string">"hello"</span>)('<span class="number">0</span>'))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 柯里化，闭包的另外一种形式</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func2</span></span>(a: <span class="type">Int</span>)(b: <span class="type">String</span>)(c: <span class="type">Char</span>): <span class="type">Boolean</span> = &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="number">0</span> == a &amp;&amp; <span class="string">""</span> == b &amp;&amp; '<span class="number">0</span>' == c) <span class="literal">false</span> <span class="keyword">else</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(func2(<span class="number">0</span>)(<span class="string">""</span>)('<span class="number">0</span>'))</span><br><span class="line">    println(func2(<span class="number">0</span>)(<span class="string">""</span>)('<span class="number">1</span>'))</span><br><span class="line">    println(func2(<span class="number">1</span>)(<span class="string">""</span>)('<span class="number">0</span>'))</span><br><span class="line">    println(func2(<span class="number">0</span>)(<span class="string">"hello"</span>)('<span class="number">0</span>'))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-2-高阶函数"><a href="#5-2-2-高阶函数" class="headerlink" title="5.2.2 高阶函数"></a>5.2.2 高阶函数</h3><p>在 Scala 中，函数是一等公民。 怎么体现的呢？<br>对于一个函数我们可以： <strong>定义函数、调用函数</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 调用函数</span></span><br><span class="line">        foo()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 定义函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span></span>():<span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"foo..."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是其实函数还有更高阶的用法  </p>
<p>1）函数可以作为值进行传递  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）调用 foo 函数，把返回值给变量 f</span></span><br><span class="line">        <span class="comment">//val f = foo()</span></span><br><span class="line">        <span class="keyword">val</span> f = foo</span><br><span class="line">        println(f)</span><br><span class="line">        <span class="comment">//（2）在被调用函数 foo 后面加上 _， 相当于把函数 foo 当成一个整体，传递给变量 f1</span></span><br><span class="line">        <span class="keyword">val</span> f1 = foo _</span><br><span class="line">        foo()</span><br><span class="line">        f1()</span><br><span class="line">        <span class="comment">//（3）如果明确变量类型，那么不使用下划线也可以将函数作为整体传递给变量</span></span><br><span class="line">        <span class="keyword">var</span> f2:()=&gt;<span class="type">Int</span> = foo</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span></span>():<span class="type">Int</span> = &#123;</span><br><span class="line">        println(<span class="string">"foo..."</span>)</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）函数可以作为参数进行传递</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//（1）定义一个函数，函数参数还是一个函数签名；f 表示函数名称;(Int,Int) 表示输入两个 Int 参数； Int 表示函数返回值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>(f: (<span class="type">Int</span>, <span class="type">Int</span>) =&gt; <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    	f(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//（2）定义一个函数，参数和返回值类型和 f1 的输入参数一致</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>): <span class="type">Int</span> = a + b</span><br><span class="line">    <span class="comment">//（3）将 add 函数作为参数传递给 f1 函数， 如果能够推断出来不是调用， _ 可以省略</span></span><br><span class="line">    println(f1(add))</span><br><span class="line">    println(f1(add _))</span><br><span class="line">    <span class="comment">//可以传递匿名函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3）函数可以作为函数返回值返回  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>() = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>() = &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        f2 _</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> f = f1()</span><br><span class="line">    <span class="comment">// 因为 f1 函数的返回值依然为函数，所以可以变量 f 可以作为函数继续调用</span></span><br><span class="line">    f()</span><br><span class="line">    <span class="comment">// 上面的代码可以简化为</span></span><br><span class="line">    f1()()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test06_HighOrderFunction</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="comment">//println("f调用")</span></span><br><span class="line">      n + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fun</span></span>(): <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="comment">//println("fun调用")</span></span><br><span class="line">      <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> result: <span class="type">Int</span> = f(<span class="number">1</span>)</span><br><span class="line">    println(result)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 函数作为值(一个整体)进行传递</span></span><br><span class="line">    <span class="keyword">val</span> f1: <span class="type">Int</span> =&gt; <span class="type">Int</span> = f _</span><br><span class="line">    <span class="comment">// 简化</span></span><br><span class="line">    <span class="keyword">val</span> f2 = f _</span><br><span class="line">    <span class="comment">// 或者(如果不写_，则必须给出类型)</span></span><br><span class="line">    <span class="keyword">val</span> f3: <span class="type">Int</span> =&gt; <span class="type">Int</span> = f</span><br><span class="line">    <span class="comment">// 输出对象</span></span><br><span class="line">    println(f1)</span><br><span class="line">    println(f2)</span><br><span class="line">    println(f3)</span><br><span class="line">    <span class="comment">//调用函数，输出值</span></span><br><span class="line">    println(f1(<span class="number">1</span>))</span><br><span class="line">    println(f2(<span class="number">1</span>))</span><br><span class="line">    println(f3(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出对象</span></span><br><span class="line">    <span class="keyword">val</span> f4: () =&gt; <span class="type">Int</span> = fun _</span><br><span class="line">    <span class="comment">// 简化</span></span><br><span class="line">    <span class="keyword">val</span> f5 = fun _</span><br><span class="line">    <span class="comment">// 或者(如果不写_，则必须给出类型)</span></span><br><span class="line">    <span class="keyword">val</span> f6: () =&gt; <span class="type">Int</span> = fun</span><br><span class="line">    println(f4)</span><br><span class="line">    println(f5)</span><br><span class="line">    println(f6)</span><br><span class="line">    <span class="comment">// 调用函数，输出值</span></span><br><span class="line">    <span class="keyword">val</span> f7 = fun</span><br><span class="line">    println(f4())</span><br><span class="line">    println(f5())</span><br><span class="line">    println(f6())</span><br><span class="line">    println(fun())</span><br><span class="line">    println(fun)</span><br><span class="line">    println(f7)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 函数作为参数进行传递</span></span><br><span class="line">    <span class="comment">// 定义二元计算函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dualEval</span></span>(op: (<span class="type">Int</span>, <span class="type">Int</span>) =&gt; <span class="type">Int</span>, a: <span class="type">Int</span>, b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      op(a, b)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      a + b</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(dualEval(add, <span class="number">10</span>, <span class="number">12</span>)) <span class="comment">// 这里add 不加下划线也可以，原因是dualEval函数的参数里面已经对add参数进行了类型定义</span></span><br><span class="line">    println(dualEval(add _, <span class="number">10</span>, <span class="number">12</span>))</span><br><span class="line">    println(dualEval((a, b) =&gt; a + b, <span class="number">10</span>, <span class="number">12</span>))</span><br><span class="line">    println(dualEval(_ + _, <span class="number">10</span>, <span class="number">12</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 函数作为函数的返回值返回</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    def f8() = &#123;</span></span><br><span class="line">    <span class="comment">//      def f9(a: Int): Unit = &#123;</span></span><br><span class="line">    <span class="comment">//        println("f9调用：" + a)</span></span><br><span class="line">    <span class="comment">//      &#125;</span></span><br><span class="line">    <span class="comment">//      f9 _</span></span><br><span class="line">    <span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 或者</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f8</span></span>(): <span class="type">Int</span> =&gt; <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">f9</span></span>(a: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"f9调用："</span> + a)</span><br><span class="line">      &#125;</span><br><span class="line">      f9 <span class="comment">// 将函数直接返回</span></span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">val</span> f10 = f8()</span><br><span class="line">    f10(<span class="number">25</span>)</span><br><span class="line">    <span class="comment">// 简化为</span></span><br><span class="line">    f8()(<span class="number">25</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-3-高阶函数案例"><a href="#5-2-3-高阶函数案例" class="headerlink" title="5.2.3 高阶函数案例"></a>5.2.3 高阶函数案例</h3><p>需求：模拟 Map 映射、 Filter 过滤、 Reduce 聚合  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// （1） map 映射</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">map</span></span>(arr: <span class="type">Array</span>[<span class="type">Int</span>], op: <span class="type">Int</span> =&gt; <span class="type">Int</span>) = &#123;</span><br><span class="line">        	<span class="keyword">for</span> (elem &lt;- arr) <span class="keyword">yield</span> op(elem)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> arr = map(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>),(x: <span class="type">Int</span>) =&gt; x * x)</span><br><span class="line">        println(arr.mkString(<span class="string">","</span>))</span><br><span class="line">        <span class="comment">// （2） filter 过滤。有参数，且参数再后面只使用一次，则参数省略且后面参数用_表示</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(arr:<span class="type">Array</span>[<span class="type">Int</span>],op:<span class="type">Int</span> =&gt;<span class="type">Boolean</span>) =&#123;</span><br><span class="line">            <span class="keyword">var</span> arr1:<span class="type">ArrayBuffer</span>[<span class="type">Int</span>] = <span class="type">ArrayBuffer</span>[<span class="type">Int</span>]()</span><br><span class="line">            <span class="keyword">for</span>(elem &lt;- arr <span class="keyword">if</span> op(elem))&#123;</span><br><span class="line">            	arr1.append(elem)</span><br><span class="line">            &#125;</span><br><span class="line">            arr1.toArray</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> arr1 = filter(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), _ % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">        println(arr1.mkString(<span class="string">","</span>))</span><br><span class="line">        <span class="comment">// （3） reduce 聚合。有多个参数，且每个参数在后面只使用一次，则参数省略且后面参数用_表示，第 n 个_代表第 n 个参数</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">reduce</span></span>(arr: <span class="type">Array</span>[<span class="type">Int</span>], op: (<span class="type">Int</span>, <span class="type">Int</span>) =&gt; <span class="type">Int</span>) = &#123;</span><br><span class="line">            <span class="keyword">var</span> init: <span class="type">Int</span> = arr(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span> (elem &lt;- <span class="number">1</span> until arr.length) &#123;</span><br><span class="line">            	init = op(init, elem)</span><br><span class="line">            &#125;</span><br><span class="line">            init</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//val arr2 = reduce(Array(1, 2, 3, 4), (x, y) =&gt; x * y)</span></span><br><span class="line">        <span class="keyword">val</span> arr2 = reduce(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), _ * _)</span><br><span class="line">        println(arr2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test07_Practice_CollectionOperation</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> arr: <span class="type">Array</span>[<span class="type">Int</span>] = <span class="type">Array</span>(<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对数组进行处理，将操作抽象出来，处理完毕之后的结果返回一个新的数组</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">arrayOperation</span></span>(array: <span class="type">Array</span>[<span class="type">Int</span>], op: <span class="type">Int</span> =&gt; <span class="type">Int</span>): <span class="type">Array</span>[<span class="type">Int</span>] = &#123;</span><br><span class="line">      <span class="keyword">for</span> (elem &lt;- array) <span class="keyword">yield</span> op(elem)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addOne</span></span>(elem: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      elem + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> array = arrayOperation(arr, addOne);</span><br><span class="line">    println(array.mkString(<span class="string">","</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//传入匿名函数，实现元素翻倍</span></span><br><span class="line">    <span class="keyword">val</span> array1 = arrayOperation(arr, _ * <span class="number">2</span>);</span><br><span class="line">    println(array1.mkString(<span class="string">","</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-4-函数柯里化-amp-闭包"><a href="#5-2-4-函数柯里化-amp-闭包" class="headerlink" title="5.2.4 函数柯里化&amp;闭包"></a>5.2.4 函数柯里化&amp;闭包</h3><p>闭包：函数式编程的标配  </p>
<p>1） 说明  </p>
<p>闭包：如果一个函数，访问到了它的外部（ 局部） 变量的值，那么这个函数和他所处的环境，称为闭包。</p>
<p>函数柯里化：把一个参数列表的多个参数，变成多个参数列表。  </p>
<p>2） 案例实操</p>
<p>（1）闭包  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>()=&#123;</span><br><span class="line">            <span class="keyword">var</span> a:<span class="type">Int</span> = <span class="number">10</span></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(b:<span class="type">Int</span>)=&#123;</span><br><span class="line">            	a + b</span><br><span class="line">        	&#125;</span><br><span class="line">        	f2 _</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 在调用时， f1 函数执行完毕后，局部变量 a 应该随着栈空间释放掉</span></span><br><span class="line">        <span class="keyword">val</span> f = f1()</span><br><span class="line">        <span class="comment">// 但是在此处，变量 a 其实并没有释放，而是包含在了 f2 函数的内部，形成了闭合的效果</span></span><br><span class="line">        println(f(<span class="number">3</span>))</span><br><span class="line">        println(f1()(<span class="number">3</span>))</span><br><span class="line">        <span class="comment">// 函数柯里化，其实就是将复杂的参数逻辑变得简单化, 函数柯里化一定存在闭包</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f3</span></span>()(b:<span class="type">Int</span>)=&#123;</span><br><span class="line">        	a + b</span><br><span class="line">        &#125;</span><br><span class="line">        println(f3()(<span class="number">3</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test09_ClosureAndCurrying</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      a + b</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 考虑固定一个加数的场景</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByFour</span></span>(b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="number">4</span> + b</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 扩展固定加数改变的情况</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByFive</span></span>(b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="number">5</span> + b</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 将固定加数作为另一个参数传入，但是是作为“第一层参数”传入</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByFour1</span></span>(): <span class="type">Int</span> =&gt; <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="keyword">val</span> a = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">addB</span></span>(b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">        a + b</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      addB</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByA</span></span>(a: <span class="type">Int</span>): <span class="type">Int</span> =&gt; <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">addB</span></span>(b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">        a + b</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      addB</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(addByA(<span class="number">35</span>)(<span class="number">24</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> addByFour2 = addByA(<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">val</span> addByFive2 = addByA(<span class="number">5</span>)</span><br><span class="line">    println(addByFour2(<span class="number">13</span>))</span><br><span class="line">    println(addByFive2(<span class="number">25</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. lambda表达式的简写（闭包）</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByA1</span></span>(a: <span class="type">Int</span>): <span class="type">Int</span> =&gt; <span class="type">Int</span> = &#123;</span><br><span class="line">      (b: <span class="type">Int</span>) =&gt; &#123;</span><br><span class="line">        a + b</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByA2</span></span>(a: <span class="type">Int</span>): <span class="type">Int</span> =&gt; <span class="type">Int</span> = &#123;</span><br><span class="line">      b =&gt; a + b</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addByA3</span></span>(a: <span class="type">Int</span>): <span class="type">Int</span> =&gt; <span class="type">Int</span> = a + _</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> addByFour3 = addByA3(<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">val</span> addByFive3 = addByA3(<span class="number">5</span>)</span><br><span class="line">    println(addByFour3(<span class="number">13</span>))</span><br><span class="line">    println(addByFive3(<span class="number">25</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. 柯里化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addCurrying</span></span>(a: <span class="type">Int</span>)(b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      a + b</span><br><span class="line">    &#125;</span><br><span class="line">    println(addCurrying(<span class="number">35</span>)(<span class="number">24</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-5-递归"><a href="#5-2-5-递归" class="headerlink" title="5.2.5 递归"></a>5.2.5 递归</h3><p>1） 说明  </p>
<p>一个函数/方法在函数/方法体内又调用了本身，我们称之为递归调用  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 阶乘</span></span><br><span class="line">        <span class="comment">// 递归算法</span></span><br><span class="line">        <span class="comment">// 1) 方法调用自身</span></span><br><span class="line">        <span class="comment">// 2) 方法必须要有跳出的逻辑</span></span><br><span class="line">        <span class="comment">// 3) 方法调用自身时，传递的参数应该有规律</span></span><br><span class="line">        <span class="comment">// 4) scala 中的递归必须声明函数返回值类型</span></span><br><span class="line">        println(test(<span class="number">5</span>))	</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(i : <span class="type">Int</span>) : <span class="type">Int</span> = &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            i * test(i - <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="keyword">import</span> scala.annotation.tailrec</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test10_Recursion</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(fact(<span class="number">5</span>))</span><br><span class="line">    println(tailFact(<span class="number">5</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 递归实现计算阶乘</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fact</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    fact(n - <span class="number">1</span>) * n</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 尾递归实现，栈帧覆盖，节省空间，对于Java无效</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">tailFact</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    <span class="meta">@tailrec</span> <span class="comment">// 此注解保证写的尾递归符合标准</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">loop</span></span>(n: <span class="type">Int</span>, currRes: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> currRes</span><br><span class="line">      loop(n - <span class="number">1</span>, currRes * n)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    loop(n, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-6-控制抽象"><a href="#5-2-6-控制抽象" class="headerlink" title="5.2.6 控制抽象"></a>5.2.6 控制抽象</h3><p>1）值调用： 把计算后的值传递过去  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestControl</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span> </span>= ()=&gt;&#123;</span><br><span class="line">            println(<span class="string">"f..."</span>)</span><br><span class="line">            <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">        foo(f())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span></span>(a: <span class="type">Int</span>):<span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(a)</span><br><span class="line">    	println(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）名调用： 把代码传递过去  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestControl</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span> </span>= ()=&gt;&#123;</span><br><span class="line">        	println(<span class="string">"f..."</span>)</span><br><span class="line">        	<span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">        foo(f())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//def foo(a: Int):Unit = &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span></span>(a: =&gt;<span class="type">Int</span>):<span class="type">Unit</span> = &#123;<span class="comment">//注意这里变量 a 没有小括号了</span></span><br><span class="line">        println(a)</span><br><span class="line">        println(a)	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出结果：</span></span><br><span class="line"><span class="comment">// f...</span></span><br><span class="line"><span class="comment">// 10</span></span><br><span class="line"><span class="comment">// f...</span></span><br><span class="line"><span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>注意： Java 只有值调用； Scala 既有值调用，又有名调用。  </p>
<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test11_ControlAbstraction</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 传值参数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f0</span></span>(a: <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"a: "</span> + a)</span><br><span class="line">      println(<span class="string">"a: "</span> + a)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f0(<span class="number">23</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span></span>(): <span class="type">Int</span> = &#123;</span><br><span class="line">      println(<span class="string">"f1调用"</span>)</span><br><span class="line">      <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f0(f1)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传名参数,传递的不再是具体的值，而是代码块 。 =&gt;Int 代表代码块，Int表示代码块返回类型</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span></span>(a: =&gt; <span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"a: "</span> + a)</span><br><span class="line">      println(<span class="string">"a: "</span> + a)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    f2(<span class="number">23</span>) <span class="comment">//相当于f2(&#123;23&#125;)</span></span><br><span class="line">    f2(f1())</span><br><span class="line">    f2(&#123;</span><br><span class="line">      println(<span class="string">"this is a my code"</span>)</span><br><span class="line">      <span class="number">29</span></span><br><span class="line">    &#125;)</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）传递代码块</span></span><br><span class="line">        foo(&#123;</span><br><span class="line">        	println(<span class="string">"aaa"</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//（2） 小括号可以省略</span></span><br><span class="line">        foo&#123;</span><br><span class="line">        	println(<span class="string">"aaa"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span></span>(a: =&gt;<span class="type">Unit</span>):<span class="type">Unit</span> = &#123;</span><br><span class="line">        println(a)</span><br><span class="line">        println(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义一个 While 循环  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFunction</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> i:<span class="type">Int</span> = <span class="number">1</span></span><br><span class="line">        myWhile(i &lt;= <span class="number">10</span>)&#123;</span><br><span class="line">        	println(i)</span><br><span class="line">        	i += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myWhile</span></span>(condition: =&gt;<span class="type">Boolean</span>)(op: =&gt;<span class="type">Unit</span>):<span class="type">Unit</span>=&#123;</span><br><span class="line">        <span class="keyword">if</span> (condition)&#123;</span><br><span class="line">            op</span><br><span class="line">            myWhile(condition)(op)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test12_MyWhile</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 常规的while循环</span></span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">10</span></span><br><span class="line">    <span class="keyword">while</span> (n &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">      println(n)</span><br><span class="line">      n -= <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 用闭包实现一个函数，将代码块作为参数传入，递归调用</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myWhile</span></span>(condition: =&gt; <span class="type">Boolean</span>): (=&gt; <span class="type">Unit</span>) =&gt; <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="comment">// 内层函数需要递归调用，参数就是循环体</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">doLoop</span></span>(op: =&gt; <span class="type">Unit</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">          op</span><br><span class="line">          myWhile(condition)(op)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      doLoop _</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    n = <span class="number">10</span></span><br><span class="line"><span class="comment">//    myWhile(&#123;n &gt;= 1&#125;)(&#123;&#125;) // 如果是代码块，外面的小括号也是可以省略的</span></span><br><span class="line"><span class="comment">//    myWhile(n &gt;=1)(&#123;</span></span><br><span class="line"><span class="comment">//      println(n)</span></span><br><span class="line"><span class="comment">//      n -= 1</span></span><br><span class="line"><span class="comment">//    &#125;)</span></span><br><span class="line">    myWhile(n &gt;=<span class="number">1</span>)&#123;</span><br><span class="line">      println(n)</span><br><span class="line">      n -= <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 用匿名函数实现简化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myWhile2</span></span>(condition: =&gt; <span class="type">Boolean</span>): (=&gt; <span class="type">Unit</span>) =&gt; <span class="type">Unit</span> = &#123;</span><br><span class="line">       op =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">          op</span><br><span class="line">          myWhile2(condition)(op)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    n = <span class="number">10</span></span><br><span class="line">    <span class="comment">//myWhile2(n &gt;= 1) (&#123;&#125;)</span></span><br><span class="line">    myWhile2(n &gt;=<span class="number">1</span>)&#123;</span><br><span class="line">      println(n)</span><br><span class="line">      n -= <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 用柯里化实现简化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myWhile3</span></span>(condition: =&gt;<span class="type">Boolean</span>)(op: =&gt; <span class="type">Unit</span>): <span class="type">Unit</span> =&#123;</span><br><span class="line">      <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        op</span><br><span class="line">        myWhile(condition)(op)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    n = <span class="number">10</span></span><br><span class="line">    <span class="comment">//myWhile2(n &gt;= 1) (&#123;&#125;)</span></span><br><span class="line">    myWhile3(n &gt;=<span class="number">1</span>)&#123;</span><br><span class="line">      println(n)</span><br><span class="line">      n -= <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-7-惰性加载"><a href="#5-2-7-惰性加载" class="headerlink" title="5.2.7 惰性加载"></a>5.2.7 惰性加载</h3><p>1） 说明  </p>
<p>当函数返回值被声明为 lazy 时，函数的执行将被推迟，直到我们首次对此取值，该函数才会执行。这种函数我们称之为惰性函数。  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">val</span> res = sum(<span class="number">10</span>, <span class="number">30</span>)</span><br><span class="line">    println(<span class="string">"----------------"</span>)</span><br><span class="line">    println(<span class="string">"res="</span> + res)</span><br><span class="line">&#125;	</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n1: <span class="type">Int</span>, n2: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    println(<span class="string">"sum 被执行。。。 "</span>)</span><br><span class="line">    <span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：  </p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">------------------</span></span><br><span class="line"><span class="attr">sum</span> <span class="string">被执行。。。</span></span><br><span class="line"><span class="attr">res</span>=<span class="string">40</span></span><br></pre></td></tr></table></figure>

<p>注意： lazy 不能修饰 var 类型的变量。</p>
<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter05</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test13_Lazy</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">val</span> result: <span class="type">Int</span> = sum(<span class="number">13</span>, <span class="number">47</span>)</span><br><span class="line">    println(<span class="string">"1. 函数调用"</span>)</span><br><span class="line">    println(<span class="string">"2. result = "</span> + result) <span class="comment">// 第一次使用调用函数</span></span><br><span class="line">    println(<span class="string">"4. result = "</span> + result) <span class="comment">// 只会调用一次函数，不会再次调用</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(a: <span class="type">Int</span>, b: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    println(<span class="string">"3. sum调用"</span>)</span><br><span class="line">    a + b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-6-章-面向对象"><a href="#第-6-章-面向对象" class="headerlink" title="第 6 章 面向对象"></a>第 6 章 面向对象</h1><p>Scala 的面向对象思想和 Java 的面向对象思想和概念是一致的  </p>
<p>Scala 中语法和 Java 不同，补充了更多的功能。  </p>
<h2 id="6-1-Scala-包"><a href="#6-1-Scala-包" class="headerlink" title="6.1 Scala 包"></a>6.1 Scala 包</h2><p><strong>1）基本语法</strong></p>
<p>package 包名</p>
<p><strong>2） Scala 包的三大作用（和 Java 一样）</strong></p>
<p>（1）区分相同名字的类<br>（2）当类很多时，可以很好的管理类<br>（3）控制访问范围  </p>
<h3 id="6-1-1-包的命名"><a href="#6-1-1-包的命名" class="headerlink" title="6.1.1 包的命名"></a>6.1.1 包的命名</h3><p><strong>1）命名规则</strong>  </p>
<p>只能包含数字、字母、下划线、小圆点.，但不能用数字开头，也不要使用关键字。  </p>
<p><strong>2） 案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">demo<span class="class">.<span class="keyword">class</span>.<span class="title">exec1</span> <span class="title">//错误，因为</span> <span class="title">class</span> <span class="title">关键字</span></span></span><br><span class="line"><span class="class"><span class="title">demo</span>.12<span class="title">a</span> <span class="title">//错误，</span> <span class="title">数字开头</span></span></span><br></pre></td></tr></table></figure>

<p><strong>3）命名规范</strong>  </p>
<p>一般是小写字母+小圆点<br>com.公司名.项目名.业务模块名  </p>
<p><strong>4） 案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">com.test.oa.model</span><br><span class="line">com.test.oa.controller</span><br><span class="line">com.sohu.bank.order</span><br></pre></td></tr></table></figure>

<h3 id="6-1-2-包说明（包语句）"><a href="#6-1-2-包说明（包语句）" class="headerlink" title="6.1.2 包说明（包语句）"></a>6.1.2 包说明（包语句）</h3><p><strong>1）说明</strong>  </p>
<p>Scala 有两种包的管理风格，一种方式和 Java 的包管理风格相同，每个源文件一个包（ 包名和源文件所在路径不要求必须一致），包名用 “.” 进行分隔以表示包的层级关系，如com.atguigu.scala。另一种风格，通过嵌套的风格表示层级关系，如下  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com&#123;</span><br><span class="line">    <span class="keyword">package</span> test&#123;</span><br><span class="line">        <span class="keyword">package</span> scala&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第二种风格有以下特点：  </p>
<p>（1）一个源文件中可以声明多个 package<br>（2）子包中的类可以直接访问父包中的内容，而无需导包</p>
<p><strong>2） 案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com &#123;</span><br><span class="line">    <span class="keyword">import</span> com.test.<span class="type">Inner</span> <span class="comment">//父包访问子包需要导包</span></span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">        <span class="keyword">val</span> out: <span class="type">String</span> = <span class="string">"out"</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(<span class="type">Inner</span>.in)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">package</span> test &#123;</span><br><span class="line">        <span class="class"><span class="keyword">object</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">            <span class="keyword">val</span> in: <span class="type">String</span> = <span class="string">"in"</span></span><br><span class="line">            <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">                println(<span class="type">Outer</span>.out) <span class="comment">//子包访问父包无需导包</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> other &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用嵌套风格定义包</span></span><br><span class="line"><span class="keyword">package</span> com &#123;</span><br><span class="line">  <span class="keyword">import</span> com.atguigu.scala.<span class="type">Inner</span></span><br><span class="line">  <span class="comment">// 在外层包中定义单例对象</span></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> out: <span class="type">String</span> = <span class="string">"out"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="comment">// 外层访问内层对象，必须导包</span></span><br><span class="line">      println(<span class="type">Inner</span>.in)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">package</span> atguigu &#123;</span><br><span class="line">    <span class="keyword">package</span> scala &#123;</span><br><span class="line">      <span class="comment">// 内层包中定义单例对象</span></span><br><span class="line">      <span class="class"><span class="keyword">object</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">val</span> in: <span class="type">String</span> = <span class="string">"in"</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">          println(<span class="type">Outer</span>.out)</span><br><span class="line">          <span class="type">Outer</span>.out = <span class="string">"outer"</span></span><br><span class="line">          println(<span class="type">Outer</span>.out)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在同一文件中定义多个包</span></span><br><span class="line"><span class="keyword">package</span> aaa &#123;</span><br><span class="line">  <span class="keyword">package</span> bbb &#123;</span><br><span class="line">    <span class="keyword">import</span> com.atguigu.scala.<span class="type">Inner</span></span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">Test01_Package</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 不同包下，必须导包</span></span><br><span class="line">        println(<span class="type">Inner</span>.in)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-3-包对象"><a href="#6-1-3-包对象" class="headerlink" title="6.1.3 包对象"></a>6.1.3 包对象</h3><p>在 Scala 中可以为每个包定义一个同名的包对象， 定义在包对象中的成员， 作为其对应包下所有 class 和 object 的共享变量， 可以被直接访问。  </p>
<p><strong>1）定义</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="class"><span class="keyword">object</span> <span class="title">com</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> shareValue=<span class="string">"share"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shareMethod</span></span>()=&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2） 说明</strong>  </p>
<p>（1）若使用 Java 的包管理风格，则包对象一般定义在其对应包下的 package.scala文件中，包对象名与包名保持一致。  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230316155229300.png" alt="image-20230316155229300"></p>
<p>（2）如采用嵌套方式管理包，则包对象可与包定义在同一文件中，但是要保证包对象与包声明在同一作用域中。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com &#123;</span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">        <span class="keyword">val</span> out: <span class="type">String</span> = <span class="string">"out"</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(name)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> <span class="class"><span class="keyword">object</span> <span class="title">com</span> </span>&#123;</span><br><span class="line">	<span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"com"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test02_PackageObject</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    commonMethod()</span><br><span class="line">    println(commonValue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> ccc &#123;</span><br><span class="line">  <span class="keyword">package</span> ddd&#123;</span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">Test02_PackageObject</span></span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(school)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 包对象必须放在当前包的同一层级下</span></span><br><span class="line">  <span class="keyword">package</span> <span class="class"><span class="keyword">object</span> <span class="title">ddd</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> school: <span class="type">String</span> = <span class="string">"atguigu1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个包对象</span></span><br><span class="line"><span class="comment">//package object ddd &#123;</span></span><br><span class="line"><span class="comment">//  val school: String = "atguigu"</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="keyword">package</span> <span class="class"><span class="keyword">object</span> <span class="title">ccc</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> school: <span class="type">String</span> = <span class="string">"atguigu2"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="class"><span class="keyword">object</span> <span class="title">chapter06</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 定义当前包共享的属性和方法</span></span><br><span class="line">  <span class="keyword">val</span> commonValue = <span class="string">"大数据"</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">commonMethod</span></span>() = &#123;</span><br><span class="line">    println(<span class="string">s"我们都喜欢<span class="subst">$&#123;commonValue&#125;</span>开发"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-4-导包说明"><a href="#6-1-4-导包说明" class="headerlink" title="6.1.4 导包说明"></a>6.1.4 导包说明</h3><p>1） 和 Java 一样，可以在顶部使用 import 导入， 在这个文件中的所有类都可以使用。<br>2） 局部导入：什么时候使用，什么时候导入。 在其作用范围内都可以使用<br>3） 通配符导入： import java.util._<br>4） 给类起名： import java.util.{ArrayList=&gt;JL}<br>5） 导入相同包的多个类： import java.util.{HashSet, ArrayList}<br>6） 屏蔽类： import java.util.{ArrayList =&gt;<em>,</em>}<br>7） 导入包的绝对路径： new <em>root</em>.java.util.HashMap</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java &#123;</span><br><span class="line">    <span class="keyword">package</span> util &#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明  </p>
<table>
<thead>
<tr>
<th>路径</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>import com.test.Fruit</td>
<td>引入 com.test 包下 Fruit（class 和 object）</td>
</tr>
<tr>
<td>import com.test._</td>
<td>引入 com.test 下的所有成员</td>
</tr>
<tr>
<td>import com.test.Fruit._</td>
<td>引入 Fruit(object) 的所有成员</td>
</tr>
<tr>
<td>import com.test.{Fruit,Vegetable}</td>
<td>引入 com.test 下的 Fruit 和 Vegetable</td>
</tr>
<tr>
<td>import com.test.{Fruit=&gt;Shuiguo}</td>
<td>引入 com.test 包下的 Fruit 并更名为 Shuiguo</td>
</tr>
<tr>
<td>import com.test.{Fruit=&gt;Shuiguo,_}</td>
<td>引入 com.test 包下的所有成员，并将 Fruit 更名 为 Shuiguo</td>
</tr>
<tr>
<td>import com.test.{Fruit=&gt;<em>,</em>}</td>
<td>引入 com.test 包下屏蔽 Fruit 类</td>
</tr>
<tr>
<td>new <em>root</em>.java.util.HashMap</td>
<td>引入的 Java 的绝对路径</td>
</tr>
</tbody></table>
<p>8）注意<br>Scala 中的<strong>三个默认导入</strong>分别是<br>import java.lang._<br>import scala._<br>import scala.Predef._  </p>
<h3 id="6-1-5-封装"><a href="#6-1-5-封装" class="headerlink" title="6.1.5 封装"></a>6.1.5 封装</h3><p>封装就是把抽象出的数据和对数据的操作封装在一起，数据被保护在内部，程序的其它部分只有通过被授权的操作（成员方法），才能对数据进行操作。 Java 封装操作如下，  </p>
<p>（1）将属性进行私有化<br>（2）提供一个公共的 set 方法，用于对属性赋值<br>（3）提供一个公共的 get 方法，用于获取属性的值  </p>
<p>Scala 中的 public 属性，底层实际为 private，并通过 get 方法 obj.field() 和 set 方法 obj.field_=(value) 对其进行操作。所以 Scala 并不推荐将属性设为 private，再为其设置public 的 get 和 set 方法的做法。但由于很多 Java 框架都利用反射调用 getXXX 和 setXXX 方法，有时候为了和这些框架兼容，也会为 Scala 的属性设置 getXXX 和 setXXX 方法（通过@BeanProperty 注解实现）。</p>
<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"><span class="keyword">import</span> scala.beans.<span class="type">BeanProperty</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test03_Class</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student</span>();</span><br><span class="line">    <span class="comment">// student.name // 不能访问paivate属性</span></span><br><span class="line">    println(student.age)</span><br><span class="line">    println(student.sex)</span><br><span class="line">    student.sex = <span class="string">"female"</span></span><br><span class="line">    println(student.sex)</span><br><span class="line">    println(student.age)</span><br><span class="line">    student.setAge(<span class="number">20</span>)</span><br><span class="line">    println(student.getAge)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 定义属性</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"alice"</span></span><br><span class="line">  <span class="comment">// 相当于设置了get set 方法</span></span><br><span class="line">  <span class="meta">@BeanProperty</span></span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">18</span></span><br><span class="line">  <span class="comment">// 下划线 "_" 表示初始值字符串是空值null,注意不能用val定义</span></span><br><span class="line">  <span class="keyword">var</span> sex: <span class="type">String</span> = _</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-6-访问权限"><a href="#6-1-6-访问权限" class="headerlink" title="6.1.6 访问权限"></a>6.1.6 访问权限</h3><p><strong>1） 说明</strong>  </p>
<p>在 Java 中，访问权限分为： public， private， protected 和默认。在 Scala 中，你可以通过类似的修饰符达到同样的效果。但是使用上有区别。  </p>
<p>（1） Java 中属性和方法的默认访问权限为 public，但 Scala 中无 public 关键字<br>（2） private 为私有权限，只在类的内部和伴生对象中可用<br>（3） protected 为受保护权限，Scala 中受保护权限比 Java 中更严格，同类、子类可以访问，同包无法访问<br>（4） private[包名] 增加包访问权限，包名下的其他类也可以使用</p>
<p><strong>2） 案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.scala.test</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"bobo"</span></span><br><span class="line">        <span class="keyword">protected</span> <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">18</span></span><br><span class="line">        <span class="keyword">private</span>[test] <span class="keyword">var</span> sex: <span class="type">String</span> = <span class="string">"男"</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(name)</span><br><span class="line">    	&#125;</span><br><span class="line">&#125;	</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">        person.say()</span><br><span class="line">        println(person.name)</span><br><span class="line">        println(person.age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">this</span>.age</span><br><span class="line">        <span class="keyword">this</span>.sex</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="type">Person</span>().sex</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test04_Access</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 创建对象</span></span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    <span class="comment">// person.idCard // error, 私有属性</span></span><br><span class="line">    <span class="comment">// person.name // error, 保护属性只能在本类或子类中访问到</span></span><br><span class="line">    person.sex = <span class="string">"male"</span></span><br><span class="line">    person.age =<span class="number">20</span></span><br><span class="line">    person.printInfo()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> worker = <span class="keyword">new</span> <span class="type">Worker</span>()</span><br><span class="line">    worker.printInfo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// println(idCard) 私有只能在自身类内部，或者伴生对象中可以访问</span></span><br><span class="line">    name = <span class="string">"bob"</span></span><br><span class="line">    age = <span class="number">25</span></span><br><span class="line">    sex = <span class="string">"male"</span></span><br><span class="line">    println(<span class="string">s"Worker:<span class="subst">$&#123;name&#125;</span>,<span class="subst">$&#123;sex&#125;</span>,<span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test04_ClassForAccess</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> idCard: <span class="type">String</span> = <span class="string">"8565456456"</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"alice"</span></span><br><span class="line">  <span class="keyword">var</span> sex: <span class="type">String</span> = <span class="string">"female"</span></span><br><span class="line">  <span class="keyword">private</span>[chapter06] <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>() = &#123;</span><br><span class="line">    println(<span class="string">s"Person:<span class="subst">$&#123;idCard&#125;</span>,<span class="subst">$&#123;name&#125;</span>,<span class="subst">$&#123;sex&#125;</span>,<span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-2-类和对象"><a href="#6-2-类和对象" class="headerlink" title="6.2 类和对象"></a>6.2 类和对象</h2><p>类： 可以看成一个模板<br>对象： 表示具体的事物  </p>
<h3 id="6-2-1-定义类"><a href="#6-2-1-定义类" class="headerlink" title="6.2.1 定义类"></a>6.2.1 定义类</h3><p><strong>1） 回顾： Java 中的类</strong>  </p>
<p>如果类是 public 的，则必须和文件名一致。<br>一般，一个.java 有一个 public 类<br>注意： Scala 中没有 public，一个.scala 中可以写多个类。  </p>
<p><strong>2）基本语法</strong>  </p>
<p>[修饰符] class 类名 {<br>    类体<br>}  </p>
<p>说明  </p>
<p>（1）Scala 语法中，类并不声明为 public，所有这些类都具有公有可见性（即默认就是public）  </p>
<p>（2）一个 Scala 源文件可以包含多个类</p>
<p><strong>3）案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.chapter06</span><br><span class="line"></span><br><span class="line"><span class="comment">//（1） Scala 语法中，类并不声明为 public，所有这些类都具有公有可见性（即默认就是 public）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//（2）一个 Scala 源文件可以包含多个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-2-属性"><a href="#6-2-2-属性" class="headerlink" title="6.2.2 属性"></a>6.2.2 属性</h3><p>属性是类的一个组成部分  </p>
<p><strong>1）基本语法</strong>  </p>
<p>[修饰符] var|val 属性名称 [：类型] = 属性值<br>注： Bean 属性（ @BeanPropetry），可以自动生成规范的 setXxx/getXxx 方法  </p>
<p><strong>2）案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.test.scala.test</span><br><span class="line"><span class="keyword">import</span> scala.beans.<span class="type">BeanProperty</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"bobo"</span> <span class="comment">//定义属性</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> = _ <span class="comment">// _表示给属性一个默认值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Bean 属性（ @BeanProperty）</span></span><br><span class="line">    <span class="meta">@BeanProperty</span> <span class="keyword">var</span> sex: <span class="type">String</span> = <span class="string">"男"</span></span><br><span class="line">    <span class="comment">//val 修饰的属性不能赋默认值，必须显示指定</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	<span class="keyword">var</span> person = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    	println(person.name)</span><br><span class="line"></span><br><span class="line">    	person.setSex(<span class="string">"女"</span>)</span><br><span class="line">    	println(person.getSex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-3-方法"><a href="#6-2-3-方法" class="headerlink" title="6.2.3 方法"></a>6.2.3 方法</h3><p><strong>1）基本语法</strong>  </p>
<p>def 方法名(参数列表) [：返回值类型] = {<br>        方法体<br>}  </p>
<p><strong>2）案例实操</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">sum</span></span>(n1:<span class="type">Int</span>, n2:<span class="type">Int</span>) : <span class="type">Int</span> = &#123;</span><br><span class="line">    	n1 + n2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">        println(person.sum(<span class="number">10</span>, <span class="number">20</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-4-创建对象"><a href="#6-2-4-创建对象" class="headerlink" title="6.2.4 创建对象"></a>6.2.4 创建对象</h3><p><strong>1）基本语法</strong>  </p>
<p>val | var 对象名 [：类型] = new 类型()  </p>
<p><strong>2）案例实操</strong>  </p>
<p>（1） val 修饰对象，不能改变对象的引用（ 即：内存地址） ， 可以改变对象属性的值。<br>（2） var 修饰对象， 可以修改对象的引用和修改对象的属性值<br>（3）自动推导变量类型不能多态，所以多态需要显示声明  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"canglaoshi"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//val 修饰对象，不能改变对象的引用（即：内存地址），可以改变对象属性的值。</span></span><br><span class="line">        <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">        person.name = <span class="string">"bobo"</span></span><br><span class="line">        <span class="comment">// person = new Person()// 错误的</span></span><br><span class="line">        println(person.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-5-构造器"><a href="#6-2-5-构造器" class="headerlink" title="6.2.5 构造器"></a>6.2.5 构造器</h3><p>和 Java 一样， Scala 构造对象也需要调用构造方法，并且可以有任意多个构造方法。Scala 类的构造器包括： 主构造器和辅助构造器  </p>
<p><strong>1）基本语法</strong>  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">类名</span>(<span class="params">形参列表</span>) </span>&#123; <span class="comment">// 主构造器</span></span><br><span class="line">    <span class="comment">// 类体</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(形参列表) &#123; <span class="comment">// 辅助构造器</span></span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(形参列表) &#123; <span class="comment">//辅助构造器可以有多个...</span></span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：  </p>
<p>（1）辅助构造器函数的名称 this，可以有多个，编译器通过参数的个数及类型来区分。<br>（2）辅助构造方法不能直接构建对象，必须直接或者间接调用主构造方法。<br>（3）构造器调用其他另外的构造器，要求被调用构造器必须提前声明。</p>
<p><strong>2）案例实操</strong>  </p>
<p>（1）如果主构造器无参数，小括号可省略，构建对象时调用的构造方法的小括号也可以省略。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//（1）如果主构造器无参数，小括号可省略</span></span><br><span class="line"><span class="comment">//class Person ()&#123;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(age: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>()</span><br><span class="line">        <span class="keyword">this</span>.age = age	</span><br><span class="line">        println(<span class="string">"辅助构造器"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(age: <span class="type">Int</span>, name: <span class="type">String</span>) &#123;</span><br><span class="line">    	<span class="keyword">this</span>(age)</span><br><span class="line">    	<span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;	</span><br><span class="line">    println(<span class="string">"主构造器"</span>)</span><br><span class="line">&#125; </span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	<span class="keyword">val</span> person2 = <span class="keyword">new</span> <span class="type">Person</span>(<span class="number">18</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test05_Constructor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student1</span> <span class="comment">// 如果主构造无参数可以省略小括号</span></span><br><span class="line">    student.<span class="type">Student1</span>() <span class="comment">// 调用一般方法</span></span><br><span class="line">    <span class="keyword">val</span> student1 = <span class="keyword">new</span> <span class="type">Student1</span>(name=<span class="string">"alice"</span>)</span><br><span class="line">    <span class="keyword">val</span> student2 = <span class="keyword">new</span> <span class="type">Student1</span>(name=<span class="string">"bob"</span>,age = <span class="number">25</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student1</span>(<span class="params"></span>) </span>&#123;<span class="comment">// 如果无参数可以省略小括号</span></span><br><span class="line">  <span class="comment">// 定义属性</span></span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">  println(<span class="string">"1. 主构造方法被调用"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 声明辅助构造方法一</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>() <span class="comment">//调用主构造器</span></span><br><span class="line">    println(<span class="string">"2. 辅助构造方法一被调用"</span>)</span><br><span class="line">    <span class="comment">//this.name = name</span></span><br><span class="line">    println(<span class="string">s"name:<span class="subst">$&#123;name&#125;</span> age: <span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 声明辅助构造方法二</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(name)</span><br><span class="line">    println(<span class="string">"3. 辅助构造方法二被调用"</span>)</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    println(<span class="string">s"name:<span class="subst">$&#123;name&#125;</span> age: <span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Student1</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"这里虽然与类名相同，但和Java不同，这里不是构造方法，只是一般方法被调用"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-6-构造器参数"><a href="#6-2-6-构造器参数" class="headerlink" title="6.2.6 构造器参数"></a>6.2.6 构造器参数</h3><p><strong>1） 说明</strong>  </p>
<p>Scala 类的主构造器函数的形参包括三种类型：未用任何修饰、 var 修饰、 val 修饰  </p>
<p>（1）未用任何修饰符修饰，这个参数就是一个局部变量<br>（2）var 修饰参数，作为类的成员属性使用，可以修改<br>（3）val 修饰参数，作为类只读属性使用，不能修改  </p>
<p><strong>2） 案例实操</strong> </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">name: <span class="type">String</span>, var age: <span class="type">Int</span>, val sex: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> person = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"bobo"</span>, <span class="number">18</span>, <span class="string">"男"</span>)</span><br><span class="line">        <span class="comment">// （ 1）未用任何修饰符修饰，这个参数就是一个局部变量</span></span><br><span class="line">        <span class="comment">// printf(person.name)</span></span><br><span class="line">        <span class="comment">// （ 2） var 修饰参数，作为类的成员属性使用，可以修改</span></span><br><span class="line">        person.age = <span class="number">19</span></span><br><span class="line">        println(person.age)</span><br><span class="line">        <span class="comment">// （ 3） val 修饰参数，作为类的只读属性使用，不能修改</span></span><br><span class="line">        <span class="comment">// person.sex = "女"</span></span><br><span class="line">        println(person.sex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test06_ConstructorParams</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student2 = <span class="keyword">new</span> <span class="type">Student2</span></span><br><span class="line">    student2.name = <span class="string">"alice"</span></span><br><span class="line">    student2.age = <span class="number">25</span></span><br><span class="line">    println(<span class="string">s"student2: name = <span class="subst">$&#123;student2.name&#125;</span>,age = <span class="subst">$&#123;student2.age&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> student3 = <span class="keyword">new</span> <span class="type">Student3</span>(<span class="string">"bob"</span>, <span class="number">18</span>)</span><br><span class="line">    println(<span class="string">s"student3: name = <span class="subst">$&#123;student3.name&#125;</span>,age = <span class="subst">$&#123;student3.age&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> student4 = <span class="keyword">new</span> <span class="type">Student4</span>(<span class="string">"cary"</span>, <span class="number">18</span>)</span><br><span class="line">    <span class="comment">// println(s"student4: name = $&#123;student4.name&#125;,age = $&#123;student3.age&#125;") 局部变量,不是Student4对象中的属性，只是局部变量的形参，不能获取到</span></span><br><span class="line">    student4.printInfo()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> student5 = <span class="keyword">new</span> <span class="type">Student5</span>(<span class="string">"rui"</span>, <span class="number">18</span>)</span><br><span class="line">    println(<span class="string">s"student5: name = <span class="subst">$&#123;student5.name&#125;</span>,age = <span class="subst">$&#123;student5.age&#125;</span>"</span>)</span><br><span class="line">    <span class="comment">// student5.age = 21</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> student6 = <span class="keyword">new</span> <span class="type">Student6</span>(<span class="string">"ruirui"</span>, <span class="number">18</span>, <span class="string">"henu"</span>)</span><br><span class="line">    println(<span class="string">s"student6: name = <span class="subst">$&#123;student6.name&#125;</span>,age = <span class="subst">$&#123;student6.age&#125;</span>"</span>)</span><br><span class="line">    student6.printInfo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="comment">// 无参构造器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student2</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 单独定义属性</span></span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// (推荐写法)上面定义等价于</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student3</span>(<span class="params">var name: <span class="type">String</span>, var age: <span class="type">Int</span></span>) <span class="title">//</span> <span class="title">甚至花括号都可以省略</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">//</span> <span class="title">主构造器参数无修饰</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Student4</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"student4: name = <span class="subst">$&#123;name&#125;</span>,age = <span class="subst">$&#123;age&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class Student44(_name: String, _age: Int) &#123;// 不推荐，这种类似Java</span></span><br><span class="line"><span class="comment">//  var name: String = _name;</span></span><br><span class="line"><span class="comment">//  var age: Int = _age</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student5</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">Student6</span>(<span class="params">var name: <span class="type">String</span>, var age: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> school: <span class="type">String</span> = _</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>, school: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(name, age)</span><br><span class="line">    <span class="keyword">this</span>.school = school</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"student4: name = <span class="subst">$&#123;name&#125;</span>,age = <span class="subst">$&#123;age&#125;</span>,school = <span class="subst">$&#123;school&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-继承和多态"><a href="#6-3-继承和多态" class="headerlink" title="6.3 继承和多态"></a>6.3 继承和多态</h2><p><strong>1）基本语法</strong>  </p>
<p>class 子类名 extends 父类名 { 类体 }<br>（1）子类继承父类的属性和方法<br>（2）scala 是单继承</p>
<p><strong>2）案例实操</strong>  </p>
<p>（1）子类继承父类的属性和方法<br>（2）继承的调用顺序： 父类构造器-&gt;子类构造器</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">nameParam: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = nameParam</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(nameParam: <span class="type">String</span>, ageParam: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>(nameParam)</span><br><span class="line">        <span class="keyword">this</span>.age = ageParam</span><br><span class="line">        println(<span class="string">"父类辅助构造器"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"父类主构造器"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span>(<span class="params">nameParam: <span class="type">String</span>, ageParam: <span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Person</span>(<span class="params">nameParam, ageParam</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> empNo: <span class="type">Int</span> = _</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(nameParam: <span class="type">String</span>, ageParam: <span class="type">Int</span>, empNoParam: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>(nameParam, ageParam)</span><br><span class="line">        <span class="keyword">this</span>.empNo = empNoParam</span><br><span class="line">        println(<span class="string">"子类的辅助构造器"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"子类主构造器"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	<span class="keyword">new</span> <span class="type">Emp</span>(<span class="string">"z3"</span>, <span class="number">11</span>,<span class="number">1001</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test07_Inherit</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student1: <span class="type">Student7</span> = <span class="keyword">new</span> <span class="type">Student7</span>(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    <span class="keyword">val</span> student2 = <span class="keyword">new</span> <span class="type">Student7</span>(<span class="string">"bob"</span>, <span class="number">20</span>, <span class="string">"std001"</span>)</span><br><span class="line">    student1.printInfo()</span><br><span class="line">    student2.printInfo()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> teacher = <span class="keyword">new</span> <span class="type">Teacher</span></span><br><span class="line">    teacher.printInfo()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">personInfo</span></span>(person: <span class="type">Person7</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      person.printInfo()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(<span class="string">"=============="</span>)</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person7</span></span><br><span class="line">    personInfo(student1)</span><br><span class="line">    personInfo(teacher)</span><br><span class="line">    personInfo(person)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person7</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line"></span><br><span class="line">  println(<span class="string">"1. 父类的主构造器调用"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>()</span><br><span class="line">    println(<span class="string">"2. 父类的辅助构造器调用"</span>)</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"Person: <span class="subst">$name</span> <span class="subst">$age</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义子类</span></span><br><span class="line"><span class="comment">//class Student7(name: String, age: Int) extends Person7 &#123; // 这里就相当于调用父类的构造器。继承的时候这里调用父类的主构造器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student7</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Person7</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>) </span>&#123; <span class="comment">//继承的时候这里调用父类的辅助构造器</span></span><br><span class="line">  <span class="keyword">var</span> stdNo: <span class="type">String</span> = _</span><br><span class="line">  println(<span class="string">"3. 子类的主构造器调用"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>, stdNo: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>(name, age)</span><br><span class="line">    println(<span class="string">"4. 子类的辅助构造器调用"</span>)</span><br><span class="line">    <span class="keyword">this</span>.stdNo = stdNo</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"Student: <span class="subst">$name</span> <span class="subst">$age</span> <span class="subst">$stdNo</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person7</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"Teacher"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3）动态绑定</strong>  </p>
<p>Scala 中属性和方法都是动态绑定，而 Java 中只有方法为动态绑定。  </p>
<p>案例实操(对比 Java 与 Scala 的重写)  </p>
<p>Scala  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"person"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(<span class="string">"hello person"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"teacher"</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(<span class="string">"hello teacher"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> teacher: <span class="type">Teacher</span> = <span class="keyword">new</span> <span class="type">Teacher</span>()</span><br><span class="line">        println(teacher.name)</span><br><span class="line">        teacher.hello()</span><br><span class="line">        <span class="keyword">val</span> teacher1:<span class="type">Person</span> = <span class="keyword">new</span> <span class="type">Teacher</span></span><br><span class="line">        println(teacher1.name)</span><br><span class="line">        teacher1.hello()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Java  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name = <span class="string">"person"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"hello person"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name = <span class="string">"teacher"</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"hello teacher"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDynamic</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Teacher teacher = <span class="keyword">new</span> Teacher();</span><br><span class="line">        Person teacher1 = <span class="keyword">new</span> Teacher();</span><br><span class="line">        System.out.println(teacher.name);</span><br><span class="line">        teacher.hello();</span><br><span class="line">        System.out.println(teacher1.name);</span><br><span class="line">        teacher1.hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果对比  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230316161917750.png" alt="image-20230316161917750"></p>
<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test08_DynamicBind</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student: <span class="type">Person8</span> = <span class="keyword">new</span> <span class="type">Student8</span></span><br><span class="line">    println(student.name) <span class="comment">// 属性和方法全部动态绑定</span></span><br><span class="line">    student.hello()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person8</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"person"</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"hello person"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student8</span> <span class="keyword">extends</span> <span class="title">Person8</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"student"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"hello student"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-抽象类"><a href="#6-4-抽象类" class="headerlink" title="6.4 抽象类"></a>6.4 抽象类</h2><h3 id="6-4-1-抽象属性和抽象方法"><a href="#6-4-1-抽象属性和抽象方法" class="headerlink" title="6.4.1 抽象属性和抽象方法"></a>6.4.1 抽象属性和抽象方法</h3><p>1）基本语法  </p>
<p>（1）定义抽象类： abstract class Person{} //通过 abstract 关键字标记抽象类<br>（2）定义抽象属性： val | var name:String //一个属性没有初始化，就是抽象属性<br>（3）定义抽象方法： def hello():String //只声明而没有实现的方法，就是抽象方法</p>
<p>案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">val</span> name: <span class="type">String</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"teacher"</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">		println(<span class="string">"hello teacher"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）继承&amp;重写  </p>
<p>（1）如果父类为抽象类，那么子类需要将抽象的属性和方法实现，否则子类也需声明为抽象类<br>（2）重写非抽象方法、属性需要用 override 修饰，重写抽象方法、属性则可以不加 override<br>（3）子类中调用父类的方法使用 super 关键字<br>（4）子类对抽象属性进行实现，父类抽象属性可以用 var 修饰；子类对非抽象属性重写，父类非抽象属性只支持 val 类型，而不支持 var。因为 var 修饰的为可变变量，子类继承之后就可以直接使用，没有必要重写</p>
<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test09_AbstractClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student9</span></span><br><span class="line">    student.eat()</span><br><span class="line">    student.sleep()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person9</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 非抽象属性</span></span><br><span class="line">  <span class="comment">// var name: String = "person" // error</span></span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"person"</span></span><br><span class="line">  <span class="comment">// 抽象属性</span></span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 非抽象方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"person eat"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 抽象方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sleep</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义具体的实现子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student9</span> <span class="keyword">extends</span> <span class="title">Person9</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 实现抽象属性和方法</span></span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sleep</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"student sleep"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重写非抽象属性和方法</span></span><br><span class="line">  <span class="comment">// override var name: String = "student" // error</span></span><br><span class="line">  <span class="comment">// name = "student" // success 可以直接修改，没必要重写</span></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"student"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">super</span>.eat()</span><br><span class="line">    println(<span class="string">"student eat"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-2-匿名子类"><a href="#6-4-2-匿名子类" class="headerlink" title="6.4.2 匿名子类"></a>6.4.2 匿名子类</h3><p>1） 说明  </p>
<p>和 Java 一样，可以通过包含带有定义或重写的代码块的方式创建一个匿名的子类。  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">val</span> name: <span class="type">String</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span> &#123;</span><br><span class="line">        	<span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"teacher"</span></span><br><span class="line">        	<span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(): <span class="type">Unit</span> = println(<span class="string">"hello teacher"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test10_AnnoymousClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person: <span class="type">Person10</span> = <span class="keyword">new</span> <span class="type">Person10</span> &#123;</span><br><span class="line">      <span class="keyword">override</span> <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"alicae"</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = println(<span class="string">"person eat"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(person.name)</span><br><span class="line">    person.eat()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person10</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-单例对象（伴生对象）"><a href="#6-5-单例对象（伴生对象）" class="headerlink" title="6.5 单例对象（伴生对象）"></a>6.5 单例对象（伴生对象）</h2><p>Scala语言是完全面向对象的语言， 所以并没有静态的操作（ 即在Scala中没有静态的概念） 。但是为了能够和Java语言交互（因为Java中有静态概念），就产生了一种特殊的对象来模拟类对象， 该对象为单例对象。若单例对象名与类名一致，则称该单例对象这个类的伴生对象，这个类的所有“静态” 内容都可以放置在它的伴生对象中声明。  </p>
<h3 id="6-5-1-单例对象语法"><a href="#6-5-1-单例对象语法" class="headerlink" title="6.5.1 单例对象语法"></a>6.5.1 单例对象语法</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">val</span> country:<span class="type">String</span>=<span class="string">"China"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2） 说明  </p>
<p>（1）单例对象采用 object 关键字声明。<br>（2）单例对象对应的类称之为伴生类，伴生对象的名称应该和伴生类名一致。<br>（3）单例对象中的属性和方法都可以通过伴生对象名（类名）直接调用访问。  </p>
<p>3）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//（1）伴生对象采用 object 关键字声明</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> country: <span class="type">String</span> = <span class="string">"China"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//（2）伴生对象对应的类称之为伴生类，伴生对象的名称应该和伴生类名一致。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">"bobo"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	<span class="comment">//（3）伴生对象中的属性和方法都可以通过伴生对象名（类名）直接调用访问。</span></span><br><span class="line">    	println(<span class="type">Person</span>.country)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-2-apply-方法"><a href="#6-5-2-apply-方法" class="headerlink" title="6.5.2 apply 方法"></a>6.5.2 apply 方法</h3><p>1） 说明  </p>
<p>（1）通过伴生对象的 apply 方法， 实现不使用 new 方法创建对象。<br>（2）如果想让主构造器变成私有的，可以在()之前加上 private。<br>（3）apply 方法可以重载。<br>（4）Scala 中 obj(arg)的语句实际是在调用该对象的 apply 方法，即 obj.apply(arg)。用以统一面向对象编程和函数式编程的风格。<br>（5）当使用 new 关键字构建对象时，调用的其实是类的构造方法，当直接使用类名构建对象时，调用的其实时伴生对象的 apply 方法。  </p>
<p>2） 案例实操</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）通过伴生对象的 apply 方法，实现不使用 new 关键字创建对象。</span></span><br><span class="line">        <span class="keyword">val</span> p1 = <span class="type">Person</span>()</span><br><span class="line">        println(<span class="string">"p1.name="</span> + p1.name)</span><br><span class="line">        <span class="keyword">val</span> p2 = <span class="type">Person</span>(<span class="string">"bobo"</span>)</span><br><span class="line">        println(<span class="string">"p2.name="</span> + p2.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//（2）如果想让主构造器变成私有的，可以在()之前加上 private</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="title">private</span>(<span class="params">cName: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> name: <span class="type">String</span> = cName</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(): <span class="type">Person</span> = &#123;</span><br><span class="line">    	println(<span class="string">"apply 空参被调用"</span>)</span><br><span class="line">    	<span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"xx"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>): <span class="type">Person</span> = &#123;</span><br><span class="line">    	println(<span class="string">"apply 有参被调用"</span>)</span><br><span class="line">    	<span class="keyword">new</span> <span class="type">Person</span>(name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注意：也可以创建其它类型对象，并不一定是伴生类对象</span></span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test11_Object</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// val student = new Student11("alice", 18) 构造方法私有化之后就不能显式创建类了</span></span><br><span class="line">    <span class="comment">// student.printInfo()</span></span><br><span class="line">    <span class="keyword">val</span> student1 = <span class="type">Student11</span>.newStudent(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    student1.printInfo()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> student2 = <span class="type">Student11</span>.apply(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    student2.printInfo()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> student3 = <span class="type">Student11</span>(<span class="string">"alice"</span>, <span class="number">18</span>) <span class="comment">// 等效于Student11.apply("alice", 18)，这种简写会自动调用伴生对象的apply方法</span></span><br><span class="line">    student3.printInfo()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="comment">// class Student11(val name: String, val age: Int) &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student11</span> <span class="title">private</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>) </span>&#123; <span class="comment">// 构造方法私有化</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"student4: name = <span class="subst">$&#123;name&#125;</span>,age = <span class="subst">$&#123;age&#125;</span>,school = <span class="subst">$&#123;Student11.school&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 伴生对象</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Student11</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> school: <span class="type">String</span> = <span class="string">"atguigu"</span> <span class="comment">// 相当于静态属性</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 定义一个类的对象实例的创建方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">newStudent</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">Student11</span> = <span class="keyword">new</span> <span class="type">Student11</span>(name, age) <span class="comment">// 相当于静态方法</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 特殊的方法，可以更简便的书写调用</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">Student11</span> = <span class="keyword">new</span> <span class="type">Student11</span>(name, age) <span class="comment">// 相当于静态方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test12_Singleton</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student1 = <span class="type">Student12</span>.getInstance()</span><br><span class="line">    <span class="keyword">val</span> student2 = <span class="type">Student12</span>.getInstance()</span><br><span class="line">    println(student1 == student2) <span class="comment">// true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student12</span> <span class="title">private</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>) </span>&#123; <span class="comment">// 构造方法私有化</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printInfo</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"student4: name = <span class="subst">$&#123;name&#125;</span>,age = <span class="subst">$&#123;age&#125;</span>,school = <span class="subst">$&#123;Student11.school&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 饿汉式</span></span><br><span class="line"><span class="comment">//object Student12 &#123;</span></span><br><span class="line"><span class="comment">//  private val student: Student12 = new Student12("alice", 18)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  def getInstance(): Student12 = student</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 懒汉式</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Student12</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">var</span> student: <span class="type">Student12</span> = _</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getInstance</span></span>(): <span class="type">Student12</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span> (student == <span class="literal">null</span>) &#123;</span><br><span class="line">      student = <span class="keyword">new</span> <span class="type">Student12</span>(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    student</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-6-特质（Trait）"><a href="#6-6-特质（Trait）" class="headerlink" title="6.6 特质（Trait）"></a>6.6 特质（Trait）</h2><p>Scala 语言中，采用特质 trait（特征）来代替接口的概念，也就是说，多个类具有相同的特质（特征）时，就可以将这个特质（特征）独立出来，采用关键字 trait 声明。 </p>
<p>Scala 中的 trait 中即可以有抽象属性和方法，也可以有具体的属性和方法， 一个类可以混入（mixin）多个特质。这种感觉类似于 Java 中的抽象类。  </p>
<p>Scala 引入 trait 特征，第一可以替代 Java 的接口，第二个也是对单继承机制的一种补充。  </p>
<h3 id="6-6-1-特质声明"><a href="#6-6-1-特质声明" class="headerlink" title="6.6.1 特质声明"></a>6.6.1 特质声明</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">特质名</span> </span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">trait</span> <span class="title">主体</span></span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure>

<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">PersonTrait</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 声明属性</span></span><br><span class="line">    <span class="keyword">var</span> name:<span class="type">String</span> = _</span><br><span class="line">    <span class="comment">// 声明方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>():<span class="type">Unit</span>=&#123;&#125;</span><br><span class="line">    <span class="comment">// 抽象属性</span></span><br><span class="line">    <span class="keyword">var</span> age:<span class="type">Int</span></span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>():<span class="type">Unit</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-2-特质基本语法"><a href="#6-6-2-特质基本语法" class="headerlink" title="6.6.2 特质基本语法"></a>6.6.2 特质基本语法</h3><p>一个类具有某种特质（特征），就意味着这个类满足了这个特质（特征）的所有要素，所以在使用时，也采用了 extends 关键字，如果有多个特质或存在父类，那么需要采用 with</p>
<p>关键字连接。  </p>
<p>1） 基本语法：  </p>
<p>没有父类： class 类名 extends 特质 1 with 特质 2 with 特质 3 …<br>有父类：class 类名 extends 父类 with 特质 1 with 特质 2 with 特质 3…</p>
<p>2）说明  </p>
<p>（1）类和特质的关系：使用继承的关系。<br>（2）当一个类去继承特质时，第一个连接词是 extends，后面是 with。<br>（3）如果一个类在同时继承特质和父类时，应当把父类写在 extends 后。</p>
<p>3） 案例实操</p>
<p>（1）特质可以同时拥有抽象方法和具体方法<br>（2）一个类可以混入（mixin）多个特质<br>（3）所有的 Java 接口都可以当做 Scala 特质使用<br>（4）动态混入：可灵活的扩展类的功能<br>    （4.1）动态混入：创建对象时混入 trait，而无需使类混入该 trait<br>    （4.2）如果混入的 trait 中有未实现的方法，则需要实现</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">PersonTrait</span> </span>&#123;</span><br><span class="line">    <span class="comment">//（1）特质可以同时拥有抽象方法和具体方法</span></span><br><span class="line">    <span class="comment">// 声明属性</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> = _</span><br><span class="line">    <span class="comment">// 抽象属性</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    <span class="comment">// 声明方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(<span class="string">"eat"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">SexTrait</span> </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> sex: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//（2）一个类可以实现/继承多个特质</span></span><br><span class="line"><span class="comment">//（3）所有的 Java 接口都可以当做 Scala 特质使用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> <span class="keyword">extends</span> <span class="title">PersonTrait</span> <span class="keyword">with</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(<span class="string">"say"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">override</span> <span class="keyword">var</span> age: <span class="type">Int</span> = _</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestTrait</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> teacher = <span class="keyword">new</span> <span class="type">Teacher</span></span><br><span class="line">        teacher.say()</span><br><span class="line">        teacher.eat()</span><br><span class="line">        <span class="comment">//（4）动态混入：可灵活的扩展类的功能</span></span><br><span class="line">        <span class="keyword">val</span> t2 = <span class="keyword">new</span> <span class="type">Teacher</span> <span class="keyword">with</span> <span class="type">SexTrait</span> &#123;</span><br><span class="line">        	<span class="keyword">override</span> <span class="keyword">var</span> sex: <span class="type">String</span> = <span class="string">"男"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//调用混入 trait 的属性</span></span><br><span class="line">        println(t2.sex)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test13_Trait</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student: <span class="type">Student13</span> = <span class="keyword">new</span> <span class="type">Student13</span></span><br><span class="line">    student.sayHello()</span><br><span class="line">    student.study()</span><br><span class="line">    student.dating()</span><br><span class="line">    student.play()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person13</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"person"</span></span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"hello from: <span class="subst">$name</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个特质</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Young</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 声明抽象和非抽象属性</span></span><br><span class="line">  <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"young"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 声明抽象和非抽象方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">play</span></span>() = println(<span class="string">s"young people <span class="subst">$name</span> is playing"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dating</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student13</span> <span class="keyword">extends</span> <span class="title">Person13</span> <span class="keyword">with</span> <span class="title">Young</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 重写冲突的属性</span></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"student"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 实现抽象方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dating</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"student <span class="subst">$name</span> is dating"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">study</span></span>(): <span class="type">Unit</span> = println(<span class="string">s"student <span class="subst">$name</span> is studying"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//重写父类方法</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">super</span>.sayHello()</span><br><span class="line">    println(<span class="string">s"hello from: student <span class="subst">$name</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test14_TraitMixin</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student14</span></span><br><span class="line">    student.study()</span><br><span class="line">    student.increase()</span><br><span class="line"></span><br><span class="line">    student.play()</span><br><span class="line">    student.increase()</span><br><span class="line"></span><br><span class="line">    student.dating()</span><br><span class="line">    student.increase()</span><br><span class="line"></span><br><span class="line">    println(<span class="string">"===================="</span>)</span><br><span class="line">    <span class="comment">// 动态混入</span></span><br><span class="line">    <span class="keyword">val</span> studentTithTalent = <span class="keyword">new</span> <span class="type">Student14</span> <span class="keyword">with</span> <span class="type">Talent</span> &#123;</span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">singing</span></span>(): <span class="type">Unit</span> = println(<span class="string">"student is good at singing"</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">dancing</span></span>(): <span class="type">Unit</span> = println(<span class="string">"student is good at dancing"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    studentTithTalent.sayHello()</span><br><span class="line">    studentTithTalent.play()</span><br><span class="line">    studentTithTalent.study()</span><br><span class="line">    studentTithTalent.dating()</span><br><span class="line">    studentTithTalent.dancing()</span><br><span class="line">    studentTithTalent.singing()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 再定义一个特质</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Knowledge</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> amount: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">increase</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Talent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">singing</span></span>(): <span class="type">Unit</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dancing</span></span>(): <span class="type">Unit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student14</span> <span class="keyword">extends</span> <span class="title">Person13</span> <span class="keyword">with</span> <span class="title">Young</span> <span class="keyword">with</span> <span class="title">Knowledge</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 重写冲突的属性</span></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> name: <span class="type">String</span> = <span class="string">"student"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 实现抽象方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dating</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"student <span class="subst">$name</span> is dating"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">study</span></span>(): <span class="type">Unit</span> = println(<span class="string">s"student <span class="subst">$name</span> is studying"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重写父类方法</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">super</span>.sayHello()</span><br><span class="line">    println(<span class="string">s"hello from: student <span class="subst">$name</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 实现特质中的抽象方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">increase</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">    amount += <span class="number">1</span></span><br><span class="line">    println(<span class="string">s"student <span class="subst">$name</span> knowledge increased: <span class="subst">$amount</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-3-特质叠加"><a href="#6-6-3-特质叠加" class="headerlink" title="6.6.3 特质叠加"></a>6.6.3 特质叠加</h3><p>由于一个类可以混入（mixin）多个 trait，且 trait 中可以有具体的属性和方法，若混入的特质中具有相同的方法（方法名，参数列表，返回值均相同），必然会出现继承冲突问题。<br>冲突分为以下两种：</p>
<p>第一种，一个类（Sub）混入的两个 trait（TraitA，TraitB）中具有相同的具体方法，且两个 trait 之间没有任何关系，解决这类冲突问题，直接在类（Sub）中重写冲突方法。</p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230328150248105.png" alt="image-20230328150248105"></p>
<p>第二种，一个类（Sub）混入的两个 trait（TraitA， TraitB）中具有相同的具体方法，且两个 trait 继承自相同的 trait（TraitC），及所谓的“钻石问题”，解决这类冲突问题，Scala采用了特质叠加的策略。</p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230328150313167.png" alt="image-20230328150313167"></p>
<p>所谓的特质叠加，就是将混入的多个 trait 中的冲突方法叠加起来，案例如下，  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = &#123;</span><br><span class="line">    	<span class="string">"ball"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;	</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Color</span> <span class="keyword">extends</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = &#123;</span><br><span class="line">    	<span class="string">"blue-"</span> + <span class="keyword">super</span>.describe()</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Category</span> <span class="keyword">extends</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = &#123;</span><br><span class="line">    	<span class="string">"foot-"</span> + <span class="keyword">super</span>.describe()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyBall</span> <span class="keyword">extends</span> <span class="title">Category</span> <span class="keyword">with</span> <span class="title">Color</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = &#123;</span><br><span class="line">    	<span class="string">"my ball is a "</span> + <span class="keyword">super</span>.describe()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestTrait</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(<span class="keyword">new</span> <span class="type">MyBall</span>().describe())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果如下：  </p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my <span class="keyword">ball</span> <span class="keyword">is</span> <span class="keyword">a</span> blue-foot-<span class="keyword">ball</span></span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test15_TraitOverlying</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student15</span></span><br><span class="line">    student.increase()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 钻石问题特质叠加</span></span><br><span class="line">    <span class="keyword">val</span> ball = <span class="keyword">new</span> <span class="type">MyFootBall</span></span><br><span class="line">    println(ball.describe())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Knowledge15</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> amount: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">increase</span></span>(): <span class="type">Unit</span> = println(<span class="string">"knowledge increased"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Talent15</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">singing</span></span>(): <span class="type">Unit</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dancing</span></span>(): <span class="type">Unit</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">increase</span></span>(): <span class="type">Unit</span> = println(<span class="string">"talent increased"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student15</span> <span class="keyword">extends</span> <span class="title">Person13</span> <span class="keyword">with</span> <span class="title">Talent15</span> <span class="keyword">with</span> <span class="title">Knowledge15</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">dancing</span></span>(): <span class="type">Unit</span> = println(<span class="string">"dancing"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">singing</span></span>(): <span class="type">Unit</span> = println(<span class="string">"singing"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">increase</span></span>(): <span class="type">Unit</span> = &#123; <span class="comment">// 当多个特质内部含有相同方法叠加的时候如果用super方法调用，则会默认调用最后一个混入的特质（无论是父类还是特质）</span></span><br><span class="line">    <span class="keyword">super</span>.increase()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义球类特质</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = <span class="string">"ball"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义颜色特质</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">ColorBall</span> <span class="keyword">extends</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> color: <span class="type">String</span> = <span class="string">"red"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = color + <span class="string">"-"</span> + <span class="keyword">super</span>.describe()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义种类特质</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">CategoryBall</span> <span class="keyword">extends</span> <span class="title">Ball</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> category: <span class="type">String</span> = <span class="string">"foot"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = category + <span class="string">"-"</span> + <span class="keyword">super</span>.describe()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个自定义球的类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyFootBall</span> <span class="keyword">extends</span> <span class="title">CategoryBall</span> <span class="keyword">with</span> <span class="title">ColorBall</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(): <span class="type">String</span> = <span class="string">"my ball is a "</span> + <span class="keyword">super</span>.describe()</span><br><span class="line">  <span class="comment">//override def describe(): String = "my ball is a " + super[CategoryBall].describe() // 也可以调用指定特征方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-4-特质叠加执行顺序"><a href="#6-6-4-特质叠加执行顺序" class="headerlink" title="6.6.4 特质叠加执行顺序"></a>6.6.4 特质叠加执行顺序</h3><p>思考： 上述案例中的 super.describe()调用的是父 trait 中的方法吗？  </p>
<p>当一个类混入多个特质的时候， scala 会对所有的特质及其父特质按照一定的顺序进行排序，而此案例中的 super.describe()调用的实际上是排好序后的下一个特质中的 describe()方法。，排序规则如下：  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230328150509512.png" alt="image-20230328150509512"></p>
<p>结论：  </p>
<p>（1）案例中的 super，不是表示其父特质对象，而是表示上述叠加顺序中的下一个特质，即，MyClass 中的 super 指代 Color，Color 中的 super 指代 Category， Category 中的 super指代 Ball。<br>（2）如果想要调用某个指定的混入特质中的方法，可以增加约束：super[]，例如  super[Category].describe()。  </p>
<h3 id="6-6-5-特质自身类型"><a href="#6-6-5-特质自身类型" class="headerlink" title="6.6.5 特质自身类型"></a>6.6.5 特质自身类型</h3><p>1） 说明  </p>
<p>自身类型可实现依赖注入的功能。  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">trait</span> <span class="title">Dao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(user: <span class="type">User</span>) = &#123;</span><br><span class="line">    	println(<span class="string">"insert into database :"</span> + user.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">APP</span> </span>&#123;</span><br><span class="line">    _: <span class="type">Dao</span> =&gt;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span></span>(user: <span class="type">User</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="string">"login :"</span> + user.name)</span><br><span class="line">        insert(user)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">APP</span> <span class="keyword">with</span> <span class="title">Dao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	login(<span class="keyword">new</span> <span class="type">User</span>(<span class="string">"bobo"</span>, <span class="number">11</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test16_TraitSelfType</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> user = <span class="keyword">new</span> <span class="type">RegisterUser</span>(<span class="string">"alice"</span>, <span class="string">"123456"</span>)</span><br><span class="line">    user.insert()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">val name: <span class="type">String</span>, val <span class="type">Password</span>: <span class="type">String</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">//</span></span></span><br><span class="line"><span class="class"><span class="title">trait</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">  _: <span class="type">User</span> =&gt; <span class="comment">// 自身类型的定义</span></span><br><span class="line">  <span class="comment">// 向数据库插入数据</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">insert</span></span>(): <span class="type">Unit</span> = println(<span class="string">s"insert into db: <span class="subst">$name</span>"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义注册用户类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegisterUser</span>(<span class="params">name: <span class="type">String</span>, password: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">User</span>(<span class="params">name, password</span>) <span class="keyword">with</span> <span class="title">UserDao</span></span></span><br></pre></td></tr></table></figure>

<h3 id="6-6-6-特质和抽象类的区别"><a href="#6-6-6-特质和抽象类的区别" class="headerlink" title="6.6.6 特质和抽象类的区别"></a>6.6.6 特质和抽象类的区别</h3><p>1.优先使用特质。一个类扩展多个特质是很方便的，但却只能扩展一个抽象类。<br>2.如果你需要构造函数参数，使用抽象类。因为抽象类可以定义带参数的构造函数，而特质不行（ 有无参构造）。  </p>
<h2 id="6-7-扩展"><a href="#6-7-扩展" class="headerlink" title="6.7 扩展"></a>6.7 扩展</h2><h3 id="6-7-1-类型检查和转换"><a href="#6-7-1-类型检查和转换" class="headerlink" title="6.7.1 类型检查和转换"></a>6.7.1 类型检查和转换</h3><p>1） 说明  </p>
<p>（1） obj.isInstanceOf[T]：判断 obj 是不是 T 类型。<br>（2） obj.asInstanceOf[T]：将 obj 强转成 T 类型。<br>（3） classOf 获取对象的类名。  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">        <span class="comment">//（1）判断对象是否为某个类型的实例</span></span><br><span class="line">        <span class="keyword">val</span> bool: <span class="type">Boolean</span> = person.isInstanceOf[<span class="type">Person</span>]</span><br><span class="line">        <span class="keyword">if</span> ( bool ) &#123;</span><br><span class="line">            <span class="comment">//（2）将对象转换为某个类型的实例</span></span><br><span class="line">            <span class="keyword">val</span> p1: <span class="type">Person</span> = person.asInstanceOf[<span class="type">Person</span>]</span><br><span class="line">            println(p1)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//（3）获取类的信息</span></span><br><span class="line">        <span class="keyword">val</span> pClass: <span class="type">Class</span>[<span class="type">Person</span>] = classOf[<span class="type">Person</span>]</span><br><span class="line">        println(pClass)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-7-2-枚举类和应用类"><a href="#6-7-2-枚举类和应用类" class="headerlink" title="6.7.2 枚举类和应用类"></a>6.7.2 枚举类和应用类</h3><p>1） 说明  </p>
<p>枚举类： 需要继承 Enumeration<br>应用类：需要继承 App  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(<span class="type">Color</span>.<span class="type">RED</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 枚举类</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Color</span> <span class="keyword">extends</span> <span class="title">Enumeration</span> </span>&#123;</span><br><span class="line">    <span class="keyword">val</span> <span class="type">RED</span> = <span class="type">Value</span>(<span class="number">1</span>, <span class="string">"red"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">YELLOW</span> = <span class="type">Value</span>(<span class="number">2</span>, <span class="string">"yellow"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">BLUE</span> = <span class="type">Value</span>(<span class="number">3</span>, <span class="string">"blue"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 应用类</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test20</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">	println(<span class="string">"xxxxxxxxxxx"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-7-3-Type-定义新类型"><a href="#6-7-3-Type-定义新类型" class="headerlink" title="6.7.3 Type 定义新类型"></a>6.7.3 Type 定义新类型</h3><p>1） 说明  </p>
<p>使用 type 关键字可以定义新的数据数据类型名称，本质上就是类型的一个别名  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="class"><span class="keyword">type</span> <span class="title">S=String</span></span></span><br><span class="line"><span class="class">        <span class="title">var</span> <span class="title">v</span></span>:<span class="type">S</span>=<span class="string">"abc"</span>	</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>():<span class="type">S</span>=<span class="string">"xyz"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter06</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test17_Extends</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 类型的检测和转换</span></span><br><span class="line">    <span class="keyword">val</span> student: <span class="type">Student17</span> = <span class="keyword">new</span> <span class="type">Student17</span>(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    student.sayHi()</span><br><span class="line">    student.study()</span><br><span class="line">    <span class="keyword">val</span> person: <span class="type">Person17</span> = <span class="keyword">new</span> <span class="type">Student17</span>(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    person.sayHi()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类型的判断</span></span><br><span class="line">    println(<span class="string">"student is Student17: "</span> + student.isInstanceOf[<span class="type">Student17</span>])</span><br><span class="line">    println(<span class="string">"student is Person17: "</span> + student.isInstanceOf[<span class="type">Person17</span>])</span><br><span class="line">    println(<span class="string">"person is Person17: "</span> + person.isInstanceOf[<span class="type">Person17</span>])</span><br><span class="line">    println(<span class="string">"person is Student17: "</span> + person.isInstanceOf[<span class="type">Student17</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> person2: <span class="type">Person17</span> = <span class="keyword">new</span> <span class="type">Person17</span>(<span class="string">"cary"</span>, <span class="number">35</span>)</span><br><span class="line">    println(<span class="string">"person2 is Student17: "</span> + person2.isInstanceOf[<span class="type">Student17</span>])</span><br><span class="line">    <span class="comment">// 类型的转换</span></span><br><span class="line">    <span class="keyword">if</span> (person.isInstanceOf[<span class="type">Student17</span>]) &#123;</span><br><span class="line">      <span class="keyword">val</span> newStudent = person.asInstanceOf[<span class="type">Student17</span>]</span><br><span class="line">      newStudent.study()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(classOf[<span class="type">Student17</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 测试枚举类</span></span><br><span class="line">    println(<span class="type">WorkDay</span>.<span class="type">MONDAY</span>)</span><br><span class="line">    println(<span class="type">WorkDay</span>.<span class="type">TUESDAY</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person17</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayHi</span></span>(): <span class="type">Unit</span> = println(<span class="string">"hi from person "</span> + name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student17</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Person17</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sayHi</span></span>(): <span class="type">Unit</span> = println(<span class="string">"hi from student "</span> + name)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">study</span></span>(): <span class="type">Unit</span> = println(<span class="string">"student study"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义枚举类对象</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">WorkDay</span> <span class="keyword">extends</span> <span class="title">Enumeration</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> <span class="type">MONDAY</span> = <span class="type">Value</span>(<span class="number">1</span>, <span class="string">"星期一"</span>)</span><br><span class="line">  <span class="keyword">val</span> <span class="type">TUESDAY</span> = <span class="type">Value</span>(<span class="number">2</span>, <span class="string">"星期二"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义应用类对象</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestApp</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">  println(<span class="string">"app start"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置类型别名</span></span><br><span class="line">  <span class="class"><span class="keyword">type</span> <span class="title">MyString</span> </span>= <span class="type">String</span></span><br><span class="line">  <span class="keyword">val</span> a: <span class="type">MyString</span> = <span class="string">"abc"</span></span><br><span class="line">  println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-7-章-集合"><a href="#第-7-章-集合" class="headerlink" title="第 7 章 集合"></a>第 7 章 集合</h1><h2 id="7-1-集合简介"><a href="#7-1-集合简介" class="headerlink" title="7.1 集合简介"></a>7.1 集合简介</h2><p>1）Scala 的集合有三大类：序列 Seq、集合 Set、 映射 Map， 所有的集合都扩展自 Iterable特质<br>2）对于几乎所有的集合类， Scala 都同时提供了可变和不可变的版本，分别位于以下两个包：不可变集合： scala.collection.immutable，可变集合： scala.collection.mutable<br>3）Scala 不可变集合，就是指该集合对象不可修改，每次修改就会返回一个新对象，而不会对原对象进行修改。类似于 java 中的 String 对象<br>4）可变集合，就是这个集合可以直接对原对象进行修改，而不会返回新的对象。类似于 java 中 StringBuilder 对象  </p>
<p><strong>建议：在操作集合的时候，不可变用符号，可变用方法</strong>  </p>
<h3 id="7-1-1-不可变集合继承图"><a href="#7-1-1-不可变集合继承图" class="headerlink" title="7.1.1 不可变集合继承图"></a>7.1.1 不可变集合继承图</h3><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230407151053450.png" alt="image-20230407151053450"></p>
<p>1）Set、Map 是 Java 中也有的集合<br>2）Seq 是 Java 没有的，我们发现 List 归属到 Seq 了，因此这里的 List 就和 Java 不是同一个概念了<br>3）我们前面的 for 循环有一个 1 to 3，就是 IndexedSeq 下的 Range<br>4）String 也是属于 IndexedSeq<br>5）我们发现经典的数据结构比如 Queue 和 Stack 被归属到 LinearSeq(线性序列)<br>6）大家注意 Scala 中的 Map 体系有一个 SortedMap，说明 Scala 的 Map 可以支持排序<br>7）IndexedSeq 和 LinearSeq 的区别：<br>    （1）IndexedSeq 是通过索引来查找和定位，因此速度快，比如 String 就是一个索引集合，通过索引即可定位<br>    （2）LinearSeq 是线型的，即有头尾的概念，这种数据结构一般是通过遍历来查找</p>
<h3 id="7-1-2-可变集合继承图"><a href="#7-1-2-可变集合继承图" class="headerlink" title="7.1.2 可变集合继承图"></a>7.1.2 可变集合继承图</h3><p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230407151418075.png" alt="image-20230407151418075"></p>
<h2 id="7-2-数组"><a href="#7-2-数组" class="headerlink" title="7.2 数组"></a>7.2 数组</h2><h3 id="7-2-1-不可变数组"><a href="#7-2-1-不可变数组" class="headerlink" title="7.2.1 不可变数组"></a>7.2.1 不可变数组</h3><p>1）第一种方式定义数组  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arr1 = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Int</span>](<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>（1）new 是关键字<br>（2）[Int]是指定可以存放的数据类型，如果希望存放任意数据类型，则指定 Any<br>（3）(10)，表示数组的大小，确定后就不可以变化  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestArray</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）数组定义</span></span><br><span class="line">        <span class="keyword">val</span> arr01 = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Int</span>](<span class="number">4</span>)</span><br><span class="line">        println(arr01.length) <span class="comment">// 4</span></span><br><span class="line">        <span class="comment">//（2）数组赋值</span></span><br><span class="line">        <span class="comment">//（2.1）修改某个元素的值</span></span><br><span class="line">        arr01(<span class="number">3</span>) = <span class="number">10</span></span><br><span class="line">        <span class="comment">//（2.2）采用方法的形式给数组赋值</span></span><br><span class="line">        arr01.update(<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">        <span class="comment">//（3）遍历数组</span></span><br><span class="line">        <span class="comment">//（3.1）查看数组</span></span><br><span class="line">        println(arr01.mkString(<span class="string">","</span>))</span><br><span class="line">        <span class="comment">//（3.2）普通遍历</span></span><br><span class="line">        <span class="keyword">for</span> (i &lt;- arr01) &#123;</span><br><span class="line">        	println(i)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//（3.3）简化遍历</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">printx</span></span>(elem:<span class="type">Int</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(elem)</span><br><span class="line">        &#125;</span><br><span class="line">        arr01.foreach(printx)</span><br><span class="line">        <span class="comment">// arr01.foreach((x)=&gt;&#123;println(x)&#125;)</span></span><br><span class="line">        <span class="comment">// arr01.foreach(println(_))</span></span><br><span class="line">        arr01.foreach(println)</span><br><span class="line">        <span class="comment">//（4）增加元素（由于创建的是不可变数组，增加元素，其实是产生新的数组）</span></span><br><span class="line">        println(arr01)</span><br><span class="line">        <span class="keyword">val</span> ints: <span class="type">Array</span>[<span class="type">Int</span>] = arr01 :+ <span class="number">5</span></span><br><span class="line">        println(ints)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3）第二种方式定义数组  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arr1 = <span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>（1）在定义数组时，直接赋初始值<br>（2）使用 apply 方法创建数组对象  </p>
<p>4）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestArray</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> arr02 = <span class="type">Array</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="string">"bobo"</span>)</span><br><span class="line">        println(arr02.length)</span><br><span class="line">        <span class="keyword">for</span> (i &lt;- arr02) &#123;</span><br><span class="line">        	println(i)	</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test01_ImmutableArray</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建数组</span></span><br><span class="line">    <span class="keyword">val</span> arr: <span class="type">Array</span>[<span class="type">Int</span>] = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Int</span>](<span class="number">5</span>) <span class="comment">// 初始值是0</span></span><br><span class="line">    <span class="comment">// 另一种创建数组的方式(调用apply方法)</span></span><br><span class="line">    <span class="keyword">val</span> arr2 = <span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="comment">// 2. 访问元素</span></span><br><span class="line">    println(arr(<span class="number">0</span>)) <span class="comment">// 相当于arr.apply(0) 当一个实例化的类对象后边跟小括号()，并在小括号中传递了参数，那么Scala会自动去该类中找apply方法执行</span></span><br><span class="line">    arr(<span class="number">0</span>) = <span class="number">13</span> <span class="comment">// 注意这里不可变数组指的是数组地址、大小、长度的不可变，而不是内容的不可变。</span></span><br><span class="line">    println(arr(<span class="number">0</span>))</span><br><span class="line">    <span class="comment">// arr.apply(0)=15 error 编译器的原因，因为伴生类中的apply方法运行时才会填充内容(存根方法)，所以这里这样书写赋值会出现错误，但是其实应该这样写。</span></span><br><span class="line">    println(arr.apply(<span class="number">0</span>))</span><br><span class="line">    arr.update(<span class="number">0</span>, <span class="number">100</span>) <span class="comment">// 另一种赋值方式，更新</span></span><br><span class="line">    println(arr(<span class="number">0</span>))</span><br><span class="line">    println(<span class="string">"============================"</span>)</span><br><span class="line">    <span class="comment">// 3. 数组遍历</span></span><br><span class="line">    <span class="comment">// 1) 普通for循环</span></span><br><span class="line">    <span class="keyword">for</span> (i &lt;- <span class="number">0</span> until arr.length) println(arr(i))</span><br><span class="line">    <span class="keyword">for</span> (i &lt;- arr.indices) println(arr(i))</span><br><span class="line">    println(<span class="string">"============================"</span>)</span><br><span class="line">    <span class="comment">// 2) 直接遍历所有元素，增强for循环</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- arr2) println(elem)</span><br><span class="line">    println(<span class="string">"============================"</span>)</span><br><span class="line">    <span class="comment">// 3) 迭代器遍历</span></span><br><span class="line">    <span class="keyword">val</span> iter = arr2.iterator</span><br><span class="line">    <span class="keyword">while</span> (iter.hasNext) println(iter.next())</span><br><span class="line">    <span class="comment">// 或者</span></span><br><span class="line">    <span class="keyword">for</span>(elem &lt;- arr2.iterator) println(elem)</span><br><span class="line">    println(<span class="string">"============================"</span>)</span><br><span class="line">    <span class="comment">// 4) 调用foreach方法</span></span><br><span class="line">    arr2.foreach(println) <span class="comment">// 传入简化后的lambda</span></span><br><span class="line">    <span class="comment">// 打印数组数据</span></span><br><span class="line">    println(arr2.mkString(<span class="string">"--"</span>))</span><br><span class="line">    println(<span class="string">"============================"</span>)</span><br><span class="line">    <span class="comment">// 4. 添加元素（改变之后返回新数组，通常操作数组的时候，推荐使用不可变数组，然后针对这个数组做一些操作，返回新数组，尽量不去改变原始数组）</span></span><br><span class="line">    <span class="keyword">val</span> newArray = arr2.:+(<span class="number">5</span>) <span class="comment">// 向后添加</span></span><br><span class="line">    println(newArray.mkString(<span class="string">"--"</span>))</span><br><span class="line">    <span class="keyword">val</span> newArray2 = newArray.+:(<span class="number">0</span>) <span class="comment">// 向前添加</span></span><br><span class="line">    println(newArray2.mkString(<span class="string">"--"</span>))</span><br><span class="line">    println(<span class="string">"============================"</span>)</span><br><span class="line">    <span class="comment">// 简化写法</span></span><br><span class="line">    <span class="keyword">val</span> newArray3 = newArray2 :+ <span class="number">6</span> <span class="comment">// 向后添加</span></span><br><span class="line">    println(newArray3.mkString(<span class="string">"--"</span>))</span><br><span class="line">    <span class="comment">// val newArray4 = newArray3 +: -1 // error 规定：当省略"."的时候后面的方法名称如果以":"结尾，则右面是对象，左边是参数（可以理解为靠近冒号的是对象）</span></span><br><span class="line">    <span class="keyword">val</span> newArray4 = <span class="number">-1</span> +: newArray3 <span class="comment">// 向前添加</span></span><br><span class="line">    println(newArray4.mkString(<span class="string">"--"</span>))</span><br><span class="line">    <span class="keyword">val</span> newArray5 = <span class="number">-3</span> +: <span class="number">-2</span> +: newArray4 :+ <span class="number">7</span> :+ <span class="number">8</span></span><br><span class="line">    println(newArray5.mkString(<span class="string">"--"</span>)) <span class="comment">// 组合添加</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-2-可变数组"><a href="#7-2-2-可变数组" class="headerlink" title="7.2.2 可变数组"></a>7.2.2 可变数组</h3><p>1）定义变长数组  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arr01 = <span class="type">ArrayBuffer</span>[<span class="type">Any</span>](<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>（1）[Any]存放任意数据类型<br>（2）(3, 2, 5)初始化好的三个元素<br>（3）ArrayBuffer 需要引入 scala.collection.mutable.ArrayBuffer  </p>
<p>2）案例实操  </p>
<p>（1）ArrayBuffer 是有序的集合<br>（2）增加元素使用的是 append 方法()，支持可变参数  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ArrayBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestArrayBuffer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）创建并初始赋值可变数组</span></span><br><span class="line">        <span class="keyword">val</span> arr01 = <span class="type">ArrayBuffer</span>[<span class="type">Any</span>](<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">        <span class="comment">//（2）遍历数组</span></span><br><span class="line">        <span class="keyword">for</span> (i &lt;- arr01) &#123;</span><br><span class="line">        	println(i)</span><br><span class="line">        &#125;</span><br><span class="line">        println(arr01.length) <span class="comment">// 3</span></span><br><span class="line">        println(<span class="string">"arr01.hash="</span> + arr01.hashCode())</span><br><span class="line">        <span class="comment">//（3）增加元素</span></span><br><span class="line">        <span class="comment">//（3.1）追加数据</span></span><br><span class="line">        arr01.+=(<span class="number">4</span>)</span><br><span class="line">        <span class="comment">//（3.2）向数组最后追加数据</span></span><br><span class="line">        arr01.append(<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">        <span class="comment">//（3.3）向指定的位置插入数据</span></span><br><span class="line">        arr01.insert(<span class="number">0</span>,<span class="number">7</span>,<span class="number">8</span>)</span><br><span class="line">        println(<span class="string">"arr01.hash="</span> + arr01.hashCode())</span><br><span class="line">        <span class="comment">//（4）修改元素</span></span><br><span class="line">        arr01(<span class="number">1</span>) = <span class="number">9</span> <span class="comment">//修改第 2 个元素的值</span></span><br><span class="line">        println(<span class="string">"--------------------------"</span>)</span><br><span class="line">        <span class="keyword">for</span> (i &lt;- arr01) &#123;</span><br><span class="line">        	println(i)</span><br><span class="line">        &#125;</span><br><span class="line">        println(arr01.length) <span class="comment">// 5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ArrayBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test02_ArrayBuffer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建可变数组</span></span><br><span class="line">    <span class="keyword">val</span> arr1: <span class="type">ArrayBuffer</span>[<span class="type">Int</span>] = <span class="keyword">new</span> <span class="type">ArrayBuffer</span>[<span class="type">Int</span>]() <span class="comment">// 创建的时候也可以加上泛型</span></span><br><span class="line">    <span class="keyword">val</span> arr2 = <span class="type">ArrayBuffer</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    println(arr1)</span><br><span class="line">    println(arr1.mkString(<span class="string">","</span>))</span><br><span class="line">    println(arr2) <span class="comment">// 区别于不可变数组，这里相当于调用 arr.toString，可以不用进行遍历，直接进行输出</span></span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 2. 访问元素</span></span><br><span class="line">    println(arr2(<span class="number">0</span>))</span><br><span class="line">    arr2(<span class="number">0</span>) = <span class="number">10</span></span><br><span class="line">    println(arr2(<span class="number">0</span>))</span><br><span class="line">    println(arr2.apply(<span class="number">0</span>))</span><br><span class="line">    arr2.update(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">    println(arr2(<span class="number">0</span>))</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 3. 数组遍历</span></span><br><span class="line">    <span class="comment">// 1) 普通for循环</span></span><br><span class="line">    <span class="keyword">for</span> (i &lt;- <span class="number">0</span> until arr2.length) println(arr2(i))</span><br><span class="line">    <span class="keyword">for</span> (i &lt;- arr2.indices) println(arr2(i))</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 2) 直接遍历所有元素，增强for循环</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- arr2) println(elem)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 3) 迭代器遍历</span></span><br><span class="line">    <span class="keyword">val</span> it = arr2.iterator</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext) println(it.next())</span><br><span class="line">    <span class="comment">// 或者</span></span><br><span class="line">    <span class="keyword">for</span>(elem &lt;- arr2.iterator) println(elem)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 4) 调用foreach方法</span></span><br><span class="line">    arr2.foreach(println)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 4. 添加元素</span></span><br><span class="line">    <span class="comment">// 1) 用之前的符号形式进行添加，</span></span><br><span class="line">    <span class="keyword">val</span> newArray1 = arr1 :+ <span class="number">5</span> <span class="comment">// 这里还是返回新数组</span></span><br><span class="line">    println(arr1) <span class="comment">// 这里直接这样使用没任何效果，因为主要是针对不可变数组使用的，如果想用这种形式添加元素则</span></span><br><span class="line">    println(newArray1)</span><br><span class="line">    println(arr1 == newArray1) <span class="comment">// false 引用不一致，这种方式返回新数组</span></span><br><span class="line">    <span class="keyword">val</span> newArray11 = <span class="number">100</span> +: newArray1</span><br><span class="line">    println(newArray11)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 2) 用特有符号进行添加操作</span></span><br><span class="line">    <span class="keyword">val</span> newArray2 = arr1 += <span class="number">19</span> <span class="comment">// 可变数组也可以用这种方法进行数据的添加</span></span><br><span class="line">    println(arr1)</span><br><span class="line">    println(newArray2)</span><br><span class="line">    println(arr1 == newArray2) <span class="comment">// true 引用一致</span></span><br><span class="line">    newArray2 += <span class="number">13</span></span><br><span class="line">    println(arr1) <span class="comment">// 地址依然一致，操作的都是一个对象</span></span><br><span class="line">    <span class="number">77</span> +=: arr1 <span class="comment">// 向前追加</span></span><br><span class="line">    println(arr1)</span><br><span class="line">    println(newArray2)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 3) 使用方法进行添加操作（可变数组强力推荐使用）</span></span><br><span class="line">    arr1.append(<span class="number">36</span>) <span class="comment">// 推荐可变参数使用方法的形式进行添加，不可变参数使用符号的形式进行添加，避免混乱</span></span><br><span class="line">    arr1.prepend(<span class="number">70</span>)</span><br><span class="line">    arr1.insert(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">    println(arr1)</span><br><span class="line">    arr1.insertAll(<span class="number">1</span>, newArray11)</span><br><span class="line">    println(arr1)</span><br><span class="line">    arr1.appendAll(newArray11)</span><br><span class="line">    arr1.prependAll(newArray11)</span><br><span class="line">    println(arr1)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 5. 删除元素</span></span><br><span class="line">    arr1.remove(<span class="number">1</span>) <span class="comment">// 按照索引删除</span></span><br><span class="line">    println(arr1)</span><br><span class="line">    arr1.remove(<span class="number">0</span>, <span class="number">3</span>) <span class="comment">// 按照索引位置开始删除3位</span></span><br><span class="line">    println(arr1)</span><br><span class="line">    arr1 -= <span class="number">5</span> <span class="comment">// 如果想删除具体数值，则只能用这种符号的方式了,但是这种不好用，只能一次删除一个，因此还是推荐用上面所述的方法的形式进行删除。</span></span><br><span class="line">    println(arr1)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 6. 可变数组转换为不可变数据</span></span><br><span class="line">    <span class="keyword">val</span> arr: <span class="type">ArrayBuffer</span>[<span class="type">Int</span>] = <span class="type">ArrayBuffer</span>(<span class="number">23</span>, <span class="number">56</span>, <span class="number">98</span>)</span><br><span class="line">    <span class="keyword">val</span> newArr: <span class="type">Array</span>[<span class="type">Int</span>] = arr.toArray</span><br><span class="line">    println(newArr.mkString(<span class="string">", "</span>))</span><br><span class="line">    println(arr)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 7. 不可变数组转换为可变数组</span></span><br><span class="line">    <span class="keyword">val</span> buffer: mutable.<span class="type">Buffer</span>[<span class="type">Int</span>] = newArr.toBuffer</span><br><span class="line">    println(buffer)</span><br><span class="line">    println(newArr.mkString(<span class="string">", "</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-3-不可变数组与可变数组的转换"><a href="#7-2-3-不可变数组与可变数组的转换" class="headerlink" title="7.2.3 不可变数组与可变数组的转换"></a>7.2.3 不可变数组与可变数组的转换</h3><p>1）说明  </p>
<p>arr1.toBuffer //不可变数组转可变数组<br>arr2.toArray //可变数组转不可变数组<br>（1）arr2.toArray 返回结果才是一个不可变数组， arr2 本身没有变化<br>（2）arr1.toBuffer 返回结果才是一个可变数组， arr1 本身没有变化  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestArrayBuffer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）创建一个空的可变数组</span></span><br><span class="line">        <span class="keyword">val</span> arr2 = <span class="type">ArrayBuffer</span>[<span class="type">Int</span>]()</span><br><span class="line">        <span class="comment">//（2）追加值</span></span><br><span class="line">        arr2.append(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">        println(arr2) <span class="comment">// 1,2,3</span></span><br><span class="line">        <span class="comment">//（3） ArrayBuffer ==&gt; Array</span></span><br><span class="line">        <span class="comment">//（3.1） arr2.toArray 返回的结果是一个新的定长数组集合</span></span><br><span class="line">        <span class="comment">//（3.2） arr2 它没有变化</span></span><br><span class="line">        <span class="keyword">val</span> newArr = arr2.toArray</span><br><span class="line">        println(newArr)</span><br><span class="line">        <span class="comment">//（4） Array ===&gt; ArrayBuffer</span></span><br><span class="line">        <span class="comment">//（4.1） newArr.toBuffer 返回一个变长数组 newArr2</span></span><br><span class="line">        <span class="comment">//（4.2） newArr 没有任何变化，依然是定长数组</span></span><br><span class="line">        <span class="keyword">val</span> newArr2 = newArr.toBuffer</span><br><span class="line">        newArr2.append(<span class="number">123</span>)</span><br><span class="line">        println(newArr2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-4-多维数组"><a href="#7-2-4-多维数组" class="headerlink" title="7.2.4 多维数组"></a>7.2.4 多维数组</h3><p>1）多维数组定义  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> arr = <span class="type">Array</span>.ofDim[<span class="type">Double</span>](<span class="number">3</span>,<span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>说明：二维数组中有三个一维数组，每个一维数组中有四个元素  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DimArray</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）创建了一个二维数组, 有三个元素，每个元素是，含有 4 个元素一维数组()</span></span><br><span class="line">        <span class="keyword">val</span> arr = <span class="type">Array</span>.ofDim[<span class="type">Int</span>](<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">        arr(<span class="number">1</span>)(<span class="number">2</span>) = <span class="number">88</span></span><br><span class="line">        <span class="comment">//（2）遍历二维数组</span></span><br><span class="line">        <span class="keyword">for</span> (i &lt;- arr) &#123; <span class="comment">//i 就是一维数组</span></span><br><span class="line">            <span class="keyword">for</span> (j &lt;- i) &#123;</span><br><span class="line">            	print(j + <span class="string">" "</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            println()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test03_MulArray</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建二维数组</span></span><br><span class="line">    <span class="keyword">val</span> array: <span class="type">Array</span>[<span class="type">Array</span>[<span class="type">Int</span>]] = <span class="type">Array</span>.ofDim[<span class="type">Int</span>](<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="comment">// 2. 访问元素</span></span><br><span class="line">    array(<span class="number">0</span>)(<span class="number">0</span>) = <span class="number">1</span></span><br><span class="line">    array(<span class="number">0</span>)(<span class="number">1</span>) = <span class="number">2</span></span><br><span class="line">    array(<span class="number">1</span>)(<span class="number">0</span>) = <span class="number">4</span></span><br><span class="line">    println(array(<span class="number">0</span>)(<span class="number">0</span>))</span><br><span class="line">    println(<span class="string">"========================="</span>)</span><br><span class="line">    <span class="comment">// 3. 数组遍历</span></span><br><span class="line">    <span class="comment">// 1) 普通for循环</span></span><br><span class="line">    <span class="keyword">for</span> (i &lt;- <span class="number">0</span> until array.length; j &lt;- <span class="number">0</span> until array(i).length) &#123;</span><br><span class="line">      println(array(i)(j))</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"========================="</span>)</span><br><span class="line">    <span class="keyword">for</span> (i &lt;- array.indices; j &lt;- array(i).indices) &#123;</span><br><span class="line">      println(array(i)(j) + <span class="string">"\t"</span>)</span><br><span class="line">      <span class="keyword">if</span> (j == array(i).length - <span class="number">1</span>) println()</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"========================="</span>)</span><br><span class="line">    <span class="comment">// 2) 调用foreach方法</span></span><br><span class="line">    array.foreach(line =&gt; line.foreach(println))</span><br><span class="line">    println(<span class="string">"========================="</span>)</span><br><span class="line">    array.foreach(_.foreach(println))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="7-3-列表-List"><a href="#7-3-列表-List" class="headerlink" title="7.3 列表 List"></a>7.3 列表 List</h2><h3 id="7-3-1-不可变-List"><a href="#7-3-1-不可变-List" class="headerlink" title="7.3.1 不可变 List"></a>7.3.1 不可变 List</h3><p>1）说明  </p>
<p>（1）List 默认为不可变集合<br>（2）创建一个 List（数据有顺序，可重复）<br>（3）遍历 List<br>（4）List 增加数据<br>（5）集合间合并：将一个整体拆成一个一个的个体，称为扁平化<br>（6）取指定数据<br>（7）空集合 Nil  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1） List 默认为不可变集合</span></span><br><span class="line">        <span class="comment">//（2）创建一个 List（数据有顺序，可重复）</span></span><br><span class="line">        <span class="keyword">val</span> list: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>)</span><br><span class="line">        <span class="comment">//（3）空集合 Nil</span></span><br><span class="line">        <span class="keyword">val</span> list5 = <span class="number">1</span>::<span class="number">2</span>::<span class="number">3</span>::<span class="number">4</span>::<span class="type">Nil</span></span><br><span class="line">        <span class="comment">//（4） List 增加数据</span></span><br><span class="line">        <span class="comment">//（4.1） ::的运算规则从右向左</span></span><br><span class="line">        <span class="comment">//val list1 = 5::list</span></span><br><span class="line">        <span class="keyword">val</span> list1 = <span class="number">7</span>::<span class="number">6</span>::<span class="number">5</span>::list</span><br><span class="line">        <span class="comment">//（4.2）添加到第一个元素位置</span></span><br><span class="line">        <span class="keyword">val</span> list2 = list.+:(<span class="number">5</span>)</span><br><span class="line">        <span class="comment">//（5）集合间合并：将一个整体拆成一个一个的个体，称为扁平化</span></span><br><span class="line">        <span class="keyword">val</span> list3 = <span class="type">List</span>(<span class="number">8</span>,<span class="number">9</span>)</span><br><span class="line">        <span class="comment">//val list4 = list3::list1</span></span><br><span class="line">        <span class="keyword">val</span> list4 = list3:::list1</span><br><span class="line">        <span class="comment">//（6）取指定数据</span></span><br><span class="line">        println(list(<span class="number">0</span>))</span><br><span class="line">        <span class="comment">//（7）遍历 List</span></span><br><span class="line">        <span class="comment">//list.foreach(println)</span></span><br><span class="line">        <span class="comment">//list1.foreach(println)</span></span><br><span class="line">        <span class="comment">//list3.foreach(println)</span></span><br><span class="line">        <span class="comment">//list4.foreach(println)</span></span><br><span class="line">        list5.foreach(println)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test04_List</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建List列表</span></span><br><span class="line">    <span class="keyword">val</span> list1 = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    println(list1)</span><br><span class="line">    <span class="comment">// 2. 访问元素</span></span><br><span class="line">    println(list1(<span class="number">1</span>))</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// list1(1) = 12 error 不可以像数组那样做赋值操作</span></span><br><span class="line">    <span class="comment">// 3. 列表遍历</span></span><br><span class="line">    <span class="comment">// 1) 普通for循环</span></span><br><span class="line">    <span class="keyword">for</span> (i &lt;- <span class="number">0</span> until list1.length) println(list1(i))</span><br><span class="line">    <span class="keyword">for</span> (i &lt;- list1.indices) println(list1(i))</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 2) 直接遍历所有元素，增强for循环</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list1) println(elem)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 3) 迭代器遍历</span></span><br><span class="line">    <span class="keyword">val</span> it = list1.iterator</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext) println(it.next())</span><br><span class="line">    <span class="comment">// 或者</span></span><br><span class="line">    <span class="keyword">for</span>(elem &lt;- list1.iterator) println(elem)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 4) 调用foreach方法</span></span><br><span class="line">    list1.foreach(println)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 4. 添加元素</span></span><br><span class="line">    <span class="keyword">val</span> list2 = list1.+:(<span class="number">0</span>) <span class="comment">//向前添加</span></span><br><span class="line">    <span class="keyword">val</span> list3 = list2.:+(<span class="number">4</span>) <span class="comment">//向后添加</span></span><br><span class="line">    println(list3)</span><br><span class="line">    <span class="comment">// 简写省略"."的情况</span></span><br><span class="line">    <span class="keyword">val</span> list4 = <span class="number">-1</span> +: list3 <span class="comment">//向前添加</span></span><br><span class="line">    <span class="keyword">val</span> list5 = list4 :+ <span class="number">5</span> <span class="comment">//向后添加</span></span><br><span class="line">    println(list5)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="keyword">val</span> list6 = list5.::(<span class="number">6</span>)</span><br><span class="line">    println(list6)</span><br><span class="line">    <span class="comment">// 很少用"::"进行添加元素，一般用"::"创建新的列表</span></span><br><span class="line">    <span class="keyword">val</span> list7 = <span class="type">Nil</span>.::(<span class="number">13</span>)</span><br><span class="line">    <span class="keyword">val</span> list8 = <span class="number">32</span> :: <span class="type">Nil</span> <span class="comment">// 简写,省略"."</span></span><br><span class="line">    <span class="keyword">val</span> list9 = <span class="number">17</span> :: <span class="number">28</span> :: <span class="number">59</span> :: <span class="number">16</span> :: <span class="type">Nil</span> <span class="comment">// 创建列表通常形式（常用）</span></span><br><span class="line">    println(list9)</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 5. 合并列表</span></span><br><span class="line">    <span class="comment">// val list10 = list8 :: list9</span></span><br><span class="line">    <span class="comment">// println(list10) // List(List(32), 17, 28, 59, 16) 这样不对</span></span><br><span class="line">    <span class="keyword">val</span> list10 = list8 ::: list9</span><br><span class="line">    println(list10)</span><br><span class="line">    <span class="keyword">val</span> list11 = list8 ++ list9</span><br><span class="line">    println(list11) <span class="comment">// 等价于":::"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-2-可变-ListBuffer"><a href="#7-3-2-可变-ListBuffer" class="headerlink" title="7.3.2 可变 ListBuffer"></a>7.3.2 可变 ListBuffer</h3><p>1）说明  </p>
<p>（1）创建一个可变集合 ListBuffer<br>（2）向集合中添加数据<br>（3）打印集合数据</p>
<p>2）案例实操</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ListBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）创建一个可变集合</span></span><br><span class="line">        <span class="keyword">val</span> buffer = <span class="type">ListBuffer</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">        <span class="comment">//（2）向集合中添加数据</span></span><br><span class="line">        buffer.+=(<span class="number">5</span>)</span><br><span class="line">        buffer.append(<span class="number">6</span>)</span><br><span class="line">        buffer.insert(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">        <span class="comment">//（3）打印集合数据</span></span><br><span class="line">        buffer.foreach(println)</span><br><span class="line">        <span class="comment">//（4）修改数据</span></span><br><span class="line">        buffer(<span class="number">1</span>) = <span class="number">6</span></span><br><span class="line">        buffer.update(<span class="number">1</span>,<span class="number">7</span>)</span><br><span class="line">        <span class="comment">//（5）删除数据</span></span><br><span class="line">        buffer.-(<span class="number">5</span>)</span><br><span class="line">        buffer.-=(<span class="number">5</span>)</span><br><span class="line">        buffer.remove(<span class="number">5</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ListBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test05_ListBuffer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建可变列表</span></span><br><span class="line">    <span class="keyword">val</span> list1: <span class="type">ListBuffer</span>[<span class="type">Int</span>] = <span class="keyword">new</span> <span class="type">ListBuffer</span>[<span class="type">Int</span>]()</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">ListBuffer</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    println(list1)</span><br><span class="line">    println(list2)</span><br><span class="line">    <span class="comment">// 2. 添加元素</span></span><br><span class="line">    list1.append(<span class="number">1</span>)</span><br><span class="line">    list1.append(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    list2.prepend(<span class="number">-1</span>, <span class="number">0</span>)</span><br><span class="line">    list1.insert(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    println(list1)</span><br><span class="line">    println(list2)</span><br><span class="line">    <span class="number">31</span> +=: <span class="number">96</span> +=: list1 += <span class="number">25</span> += <span class="number">11</span></span><br><span class="line">    println(list1) <span class="comment">// 不推荐这种，可变列表建议还是用方法调用的方式</span></span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 3. 合并list</span></span><br><span class="line">    <span class="keyword">val</span> list3 = list1 ++ list2</span><br><span class="line">    println(list1)</span><br><span class="line">    println(list2)</span><br><span class="line">    println(list3)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    list1 ++= list2 <span class="comment">// list1 改变,向后追加</span></span><br><span class="line">    println(list1)</span><br><span class="line">    println(list2)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    list1 ++=: list2 <span class="comment">// list2 改变，向前追加</span></span><br><span class="line">    println(list1)</span><br><span class="line">    println(list2)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    list1.appendAll(list2) <span class="comment">// 推荐</span></span><br><span class="line">    list1.prependAll(list2)</span><br><span class="line">    println(list1)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 4. 修改元素</span></span><br><span class="line">    list1(<span class="number">0</span>) = <span class="number">100</span></span><br><span class="line">    println(list1)</span><br><span class="line">    list1.update(<span class="number">0</span>, <span class="number">1000</span>) <span class="comment">// 强力推荐使用</span></span><br><span class="line">    println(list1)</span><br><span class="line">    <span class="comment">// 5. 删除元素</span></span><br><span class="line">    list1.remove(<span class="number">0</span>) <span class="comment">// 按照索引删除</span></span><br><span class="line">    println(list1)</span><br><span class="line">    list1.remove(<span class="number">0</span>, <span class="number">3</span>) <span class="comment">// 按照索引位置开始删除3位</span></span><br><span class="line">    println(list1)</span><br><span class="line">    list1 -= <span class="number">3</span> <span class="comment">// 如果想删除具体数值，则只能用这种符号的方式了,但是这种不好用，只能一次删除一个，因此还是推荐用上面所述的方法的形式进行删除。</span></span><br><span class="line">    println(list1)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-4-Set-集合"><a href="#7-4-Set-集合" class="headerlink" title="7.4 Set 集合"></a>7.4 Set 集合</h2><p>默认情况下， Scala 使用的是不可变集合，如果你想使用可变集合，需要引用scala.collection.mutable.Set 包  </p>
<h3 id="7-4-1-不可变-Set"><a href="#7-4-1-不可变-Set" class="headerlink" title="7.4.1 不可变 Set"></a>7.4.1 不可变 Set</h3><p>1）说明  </p>
<p>（1）Set 默认是不可变集合，数据无序<br>（2）数据不可重复<br>（3）遍历集合  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestSet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1） Set 默认是不可变集合，数据无序</span></span><br><span class="line">        <span class="keyword">val</span> set = <span class="type">Set</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">        <span class="comment">//（2）数据不可重复</span></span><br><span class="line">        <span class="keyword">val</span> set1 = <span class="type">Set</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>)</span><br><span class="line">        <span class="comment">//（3）遍历集合</span></span><br><span class="line">        <span class="keyword">for</span>(x&lt;-set1)&#123;	</span><br><span class="line">        	println(x)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test06_ImmutableSet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建Set</span></span><br><span class="line">    <span class="keyword">val</span> set1 = <span class="type">Set</span>(<span class="number">13</span>, <span class="number">12</span>, <span class="number">78</span>, <span class="number">23</span>, <span class="number">53</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">78</span>, <span class="number">23</span>, <span class="number">53</span>)</span><br><span class="line">    println(set1) <span class="comment">// Set(78, 53, 13, 12, 23) 去重，无序</span></span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2. 添加元素</span></span><br><span class="line">    <span class="comment">// var set2 = set1.+(128)</span></span><br><span class="line">    <span class="keyword">var</span> set2 = set1 + <span class="number">128</span></span><br><span class="line">    println(set1)</span><br><span class="line">    println(set2)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 3. 合并Set</span></span><br><span class="line">    <span class="keyword">val</span> set3 = <span class="type">Set</span>(<span class="number">19</span>, <span class="number">13</span>, <span class="number">23</span>, <span class="number">53</span>, <span class="number">67</span>, <span class="number">99</span>)</span><br><span class="line">    <span class="comment">// val set4 = set2 + set3 error 这里合并元素不能用"+", "+"只能用来添加元素</span></span><br><span class="line">    <span class="keyword">val</span> set4 = set2 ++ set3</span><br><span class="line">    println(set2)</span><br><span class="line">    println(set3)</span><br><span class="line">    println(set4) <span class="comment">// 相同数据去重</span></span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 4. 删除元素</span></span><br><span class="line">    <span class="keyword">val</span> set5 = set3 - <span class="number">13</span></span><br><span class="line">    println(set3)</span><br><span class="line">    println(set5)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-2-可变-mutable-Set"><a href="#7-4-2-可变-mutable-Set" class="headerlink" title="7.4.2 可变 mutable.Set"></a>7.4.2 可变 mutable.Set</h3><p>1）说明  </p>
<p>（1）创建可变集合 mutable.Set<br>（2）打印集合<br>（3）集合添加元素<br>（4）向集合中添加元素，返回一个新的 Set<br>（5）删除数据  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestSet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）创建可变集合</span></span><br><span class="line">        <span class="keyword">val</span> set = mutable.<span class="type">Set</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">        <span class="comment">//（2）集合添加元素</span></span><br><span class="line">        set += <span class="number">8</span></span><br><span class="line">        <span class="comment">//（3）向集合中添加元素，返回一个新的 Set</span></span><br><span class="line">        <span class="keyword">val</span> ints = set.+(<span class="number">9</span>)</span><br><span class="line">        println(ints)</span><br><span class="line">        println(<span class="string">"set2="</span> + set)</span><br><span class="line">        <span class="comment">//（4）删除数据</span></span><br><span class="line">        set-=(<span class="number">5</span>)	</span><br><span class="line">        <span class="comment">//（5）打印集合</span></span><br><span class="line">        set.foreach(println)</span><br><span class="line">        println(set.mkString(<span class="string">","</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test07_MutableSet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建Set</span></span><br><span class="line">    <span class="keyword">val</span> set1 = mutable.<span class="type">Set</span>(<span class="number">13</span>, <span class="number">12</span>, <span class="number">78</span>, <span class="number">23</span>, <span class="number">53</span>, <span class="number">13</span>, <span class="number">12</span>, <span class="number">78</span>, <span class="number">23</span>, <span class="number">53</span>)</span><br><span class="line">    println(set1) <span class="comment">// Set(78, 53, 13, 12, 23) 去重，无序</span></span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2. 添加元素</span></span><br><span class="line">    <span class="comment">// 1) 用之前的符号形式进行添加</span></span><br><span class="line">    <span class="keyword">val</span> set2 = set1 + <span class="number">11</span></span><br><span class="line">    println(set1)</span><br><span class="line">    println(set2)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2) 用特有符号进行添加操作</span></span><br><span class="line">    set1 += <span class="number">99</span> <span class="comment">// 这里也可以使用返回值，返回集合和set1地址一致</span></span><br><span class="line">    println(set1)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 3) 使用方法进行添加操作（可变集合强力推荐使用）</span></span><br><span class="line">    <span class="keyword">val</span> flag1 = set1.add(<span class="number">10</span>)</span><br><span class="line">    println(set1)</span><br><span class="line">    println(flag1)</span><br><span class="line">    <span class="keyword">val</span> flag2 = set1.add(<span class="number">10</span>)</span><br><span class="line">    println(set1)</span><br><span class="line">    println(flag2)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 3. 删除元素</span></span><br><span class="line">    <span class="comment">// 1) 用特有符号进行添加操作</span></span><br><span class="line">    set1 -= <span class="number">99</span> <span class="comment">// 这里也可以使用返回值，返回集合和set1地址一致</span></span><br><span class="line">    println(set1)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2) 使用方法进行添加操作（可变集合强力推荐使用）</span></span><br><span class="line">    <span class="keyword">val</span> flag3 = set1.remove(<span class="number">10</span>)</span><br><span class="line">    println(set1)</span><br><span class="line">    println(flag3)</span><br><span class="line">    <span class="keyword">val</span> flag4 = set1.remove(<span class="number">10</span>)</span><br><span class="line">    println(set1)</span><br><span class="line">    println(flag4)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 4. 合并两个Set</span></span><br><span class="line">    <span class="keyword">val</span> set3 = mutable.<span class="type">Set</span>(<span class="number">13</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">27</span>, <span class="number">98</span>, <span class="number">29</span>)</span><br><span class="line">    <span class="keyword">val</span> set4 = set1 ++ set3</span><br><span class="line">    println(set1)</span><br><span class="line">    println(set3)</span><br><span class="line">    println(set4)</span><br><span class="line">    set1 ++= set3 <span class="comment">// set1 地址不变，集合扩充</span></span><br><span class="line">    println(set1)</span><br><span class="line">    println(set3)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-5-Map-集合"><a href="#7-5-Map-集合" class="headerlink" title="7.5 Map 集合"></a>7.5 Map 集合</h2><p>Scala 中的 Map 和 Java 类似， 也是一个散列表，它存储的内容也是键值对（ key-value）映射  </p>
<h3 id="7-5-1-不可变-Map"><a href="#7-5-1-不可变-Map" class="headerlink" title="7.5.1 不可变 Map"></a>7.5.1 不可变 Map</h3><p>1）说明  </p>
<p>（1）创建不可变集合 Map<br>（2）循环打印<br>（3）访问数据<br>（4）如果 key 不存在，返回 0  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMap</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// Map</span></span><br><span class="line">        <span class="comment">//（1）创建不可变集合 Map</span></span><br><span class="line">        <span class="keyword">val</span> map = <span class="type">Map</span>( <span class="string">"a"</span>-&gt;<span class="number">1</span>, <span class="string">"b"</span>-&gt;<span class="number">2</span>, <span class="string">"c"</span>-&gt;<span class="number">3</span> )</span><br><span class="line">        <span class="comment">//（2）访问数据</span></span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- map.keys) &#123;</span><br><span class="line">        	<span class="comment">// 使用 get 访问 map 集合的数据，会返回特殊类型 Option(选项):有值（Some），无值(None)</span></span><br><span class="line">        	println(elem + <span class="string">"="</span> + map.get(elem).get)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//（3）如果 key 不存在，返回 0</span></span><br><span class="line">        println(map.get(<span class="string">"d"</span>).getOrElse(<span class="number">0</span>))</span><br><span class="line">        println(map.getOrElse(<span class="string">"d"</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="comment">//（4）循环打印</span></span><br><span class="line">        map.foreach((kv)=&gt;&#123;println(kv)&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test08_ImmutableMap</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建map</span></span><br><span class="line">    <span class="keyword">val</span> map1: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">13</span>, <span class="string">"b"</span> -&gt; <span class="number">25</span>, <span class="string">"hello"</span> -&gt; <span class="number">3</span>) <span class="comment">// 注意符号</span></span><br><span class="line">    println(map1)</span><br><span class="line">    println(map1.getClass)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 2. 遍历元素</span></span><br><span class="line">    map1.foreach(println)</span><br><span class="line">    map1.foreach(kv =&gt; println(kv))</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 3. 取map中所有的key或者value</span></span><br><span class="line">    <span class="keyword">for</span> (key &lt;- map1.keys) println(<span class="string">s"<span class="subst">$key</span> ---&gt; <span class="subst">$&#123;map1.get(key)&#125;</span>"</span>)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 4. 访问某一个key的value</span></span><br><span class="line">    println(<span class="string">"a: "</span> + map1.get(<span class="string">"a"</span>).get) <span class="comment">// 可以简写为 println(map1("a"))</span></span><br><span class="line">    println(<span class="string">"c: "</span> + map1.get(<span class="string">"c"</span>))</span><br><span class="line">    <span class="comment">// println("c: " + map1.get("c").get) // 调用get如果没有key就会报错，不建议这种写法</span></span><br><span class="line">    println(<span class="string">"c: "</span> + map1.getOrElse(<span class="string">"c"</span>, <span class="number">0</span>)) <span class="comment">// 推荐使用此写法</span></span><br><span class="line">    println(map1(<span class="string">"a"</span>))</span><br><span class="line">    println(map1(<span class="string">"c"</span>))</span><br><span class="line">    <span class="comment">// 不可变map不可以进行添加元素等操作</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-5-2-可变-Map"><a href="#7-5-2-可变-Map" class="headerlink" title="7.5.2 可变 Map"></a>7.5.2 可变 Map</h3><p>1）说明  </p>
<p>（1）创建可变集合<br>（2）打印集合<br>（3）向集合增加数据<br>（4）删除数据<br>（5）修改数据  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestSet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）创建可变集合</span></span><br><span class="line">        <span class="keyword">val</span> map = mutable.<span class="type">Map</span>( <span class="string">"a"</span>-&gt;<span class="number">1</span>, <span class="string">"b"</span>-&gt;<span class="number">2</span>, <span class="string">"c"</span>-&gt;<span class="number">3</span> )</span><br><span class="line">        <span class="comment">//（2）向集合增加数据</span></span><br><span class="line">        map.+=(<span class="string">"d"</span>-&gt;<span class="number">4</span>)</span><br><span class="line">        <span class="comment">// 将数值 4 添加到集合，并把集合中原值 1 返回</span></span><br><span class="line">        <span class="keyword">val</span> maybeInt: <span class="type">Option</span>[<span class="type">Int</span>] = map.put(<span class="string">"a"</span>, <span class="number">4</span>)</span><br><span class="line">        println(maybeInt.getOrElse(<span class="number">0</span>))</span><br><span class="line">        <span class="comment">//（3）删除数据</span></span><br><span class="line">        map.-=(<span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">        <span class="comment">//（4）修改数据</span></span><br><span class="line">        map.update(<span class="string">"d"</span>,<span class="number">5</span>)</span><br><span class="line">        map(<span class="string">"d"</span>) = <span class="number">5</span></span><br><span class="line">        <span class="comment">//（5）打印集合</span></span><br><span class="line">        map.foreach((kv)=&gt;&#123;println(kv)&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test09_MutableMap</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建map</span></span><br><span class="line">    <span class="keyword">val</span> map1: mutable.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = mutable.<span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">13</span>, <span class="string">"b"</span> -&gt; <span class="number">25</span>, <span class="string">"hello"</span> -&gt; <span class="number">3</span>) <span class="comment">// 注意符号</span></span><br><span class="line">    println(map1)</span><br><span class="line">    println(map1.getClass)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 2. 访问元素</span></span><br><span class="line">    println(<span class="string">"a: "</span> + map1.get(<span class="string">"a"</span>).get) <span class="comment">// 可以简写为 println(map1("a"))</span></span><br><span class="line">    println(<span class="string">"c: "</span> + map1.get(<span class="string">"c"</span>))</span><br><span class="line">    <span class="comment">// println("c: " + map1.get("c").get) // 调用get如果没有key就会报错，不建议这种写法</span></span><br><span class="line">    println(<span class="string">"c: "</span> + map1.getOrElse(<span class="string">"c"</span>, <span class="number">0</span>)) <span class="comment">// 推荐使用此写法</span></span><br><span class="line">    println(map1(<span class="string">"a"</span>))</span><br><span class="line">    <span class="comment">// println(map1("c"))</span></span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 3. 添加元素</span></span><br><span class="line">    <span class="comment">// 1) 调用方法方式</span></span><br><span class="line">    map1.put(<span class="string">"c"</span>, <span class="number">5</span>)</span><br><span class="line">    map1.put(<span class="string">"d"</span>, <span class="number">9</span>)</span><br><span class="line">    println(map1)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 2) 符号方式</span></span><br><span class="line">    map1 += ((<span class="string">"e"</span>, <span class="number">7</span>))</span><br><span class="line">    println(map1)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 4. 删除元素</span></span><br><span class="line">    map1.remove(<span class="string">"c"</span>)</span><br><span class="line">    map1.remove(<span class="string">"d"</span>)</span><br><span class="line">    println(map1)</span><br><span class="line">    map1 -= <span class="string">"hello"</span></span><br><span class="line">    println(map1)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 5. 更新操作</span></span><br><span class="line">    map1.update(<span class="string">"a"</span>, <span class="number">1</span>) <span class="comment">// 存在则更新</span></span><br><span class="line">    map1.update(<span class="string">"c"</span>, <span class="number">2</span>) <span class="comment">// 不存在则插入</span></span><br><span class="line">    println(map1)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 6. 合并两个map</span></span><br><span class="line">    <span class="keyword">val</span> map2: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = <span class="type">Map</span>(<span class="string">"aaa"</span> -&gt; <span class="number">13</span>, <span class="string">"b"</span> -&gt; <span class="number">29</span>, <span class="string">"hello"</span> -&gt; <span class="number">5</span>)</span><br><span class="line">    map1 ++= map2 <span class="comment">// 将map2添加到map1中，有则覆盖，没有则添加</span></span><br><span class="line">    println(map1)</span><br><span class="line">    println(map2)</span><br><span class="line">    <span class="comment">// map2 ++= map1 // error 不能使用++=,因为map2是不可变map，但是可以用 "++"</span></span><br><span class="line">    <span class="keyword">var</span> map3 = map2 ++ map1</span><br><span class="line">    println(map1)</span><br><span class="line">    println(map2)</span><br><span class="line">    println(map3)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-6-元组"><a href="#7-6-元组" class="headerlink" title="7.6 元组"></a>7.6 元组</h2><p>1）说明  </p>
<p>元组也是可以理解为一个容器，可以存放各种相同或不同类型的数据。说的简单点，就是将多个无关的数据封装为一个整体，称为元组。注意：元组中最大只能有 22 个元素。  </p>
<p>2）案例实操  </p>
<p>（1）声明元组的方式： (元素 1，元素 2，元素 3)<br>（2）访问元组<br>（3）Map 中的键值对其实就是元组,只不过元组的元素个数为 2，称之为对偶  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestTuple</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）声明元组的方式： (元素 1，元素 2，元素 3)</span></span><br><span class="line">        <span class="keyword">val</span> tuple: (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Boolean</span>) = (<span class="number">40</span>,<span class="string">"bobo"</span>,<span class="literal">true</span>)</span><br><span class="line">        <span class="comment">//（2）访问元组</span></span><br><span class="line">        <span class="comment">//（2.1）通过元素的顺序进行访问，调用方式： _顺序号</span></span><br><span class="line">        println(tuple._1)</span><br><span class="line">        println(tuple._2)</span><br><span class="line">        println(tuple._3)</span><br><span class="line">        <span class="comment">//（2.2）通过索引访问数据</span></span><br><span class="line">        println(tuple.productElement(<span class="number">0</span>))</span><br><span class="line">        <span class="comment">//（2.3）通过迭代器访问数据</span></span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- tuple.productIterator) &#123;</span><br><span class="line">        	println(elem)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//（3）Map 中的键值对其实就是元组,只不过元组的元素个数为 2，称之为对偶</span></span><br><span class="line">        <span class="keyword">val</span> map = <span class="type">Map</span>(<span class="string">"a"</span>-&gt;<span class="number">1</span>, <span class="string">"b"</span>-&gt;<span class="number">2</span>, <span class="string">"c"</span>-&gt;<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">val</span> map1 = <span class="type">Map</span>((<span class="string">"a"</span>,<span class="number">1</span>), (<span class="string">"b"</span>,<span class="number">2</span>), (<span class="string">"c"</span>,<span class="number">3</span>))</span><br><span class="line">        map.foreach(tuple=&gt;&#123;println(tuple._1 + <span class="string">"="</span> + tuple._2)&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test10_Tuple</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 创建元组(有几个元素一般称为几元组)</span></span><br><span class="line">    <span class="keyword">val</span> tuple = (<span class="string">"hello"</span>, <span class="number">100</span>, 'a', <span class="literal">true</span>)</span><br><span class="line">    println(tuple)</span><br><span class="line">    println(<span class="string">"===================="</span>)</span><br><span class="line">    <span class="comment">// 2. 访问元素</span></span><br><span class="line">    println(tuple._1)</span><br><span class="line">    println(tuple._2)</span><br><span class="line">    println(tuple._3)</span><br><span class="line">    println(tuple._4)</span><br><span class="line">    println(tuple.productElement(<span class="number">0</span>)) <span class="comment">// 不常用</span></span><br><span class="line">    println(tuple.productElement(<span class="number">3</span>))</span><br><span class="line">    println(<span class="string">"===================="</span>)</span><br><span class="line">    <span class="comment">// 3. 遍历元素</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- tuple.productIterator) println(elem)</span><br><span class="line">    println(<span class="string">"===================="</span>)</span><br><span class="line">    <span class="comment">// 4. 嵌套元组</span></span><br><span class="line">    <span class="keyword">val</span> mulTuple = (<span class="number">12</span>, <span class="number">0.3</span>, <span class="string">"hello"</span>, (<span class="number">23</span>, <span class="string">"scala"</span>), <span class="literal">true</span>, <span class="number">29</span>)</span><br><span class="line">    println(mulTuple._4._2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-7-集合常用函数"><a href="#7-7-集合常用函数" class="headerlink" title="7.7 集合常用函数"></a>7.7 集合常用函数</h2><h3 id="7-7-1-基本属性和常用操作"><a href="#7-7-1-基本属性和常用操作" class="headerlink" title="7.7.1 基本属性和常用操作"></a>7.7.1 基本属性和常用操作</h3><p>1）说明  </p>
<p>（1）获取集合长度<br>（2）获取集合大小<br>（3）循环遍历<br>（4）迭代器<br>（5）生成字符串<br>（6）是否包含  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">        <span class="comment">//（1）获取集合长度</span></span><br><span class="line">        println(list.length)</span><br><span class="line">        <span class="comment">//（2）获取集合大小,等同于 length</span></span><br><span class="line">        println(list.size)</span><br><span class="line">        <span class="comment">//（3）循环遍历</span></span><br><span class="line">        list.foreach(println)</span><br><span class="line">        <span class="comment">//（4）迭代器</span></span><br><span class="line">        <span class="keyword">for</span> (elem &lt;- list.itera tor) &#123;</span><br><span class="line">        	println(elem)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//（5）生成字符串</span></span><br><span class="line">        println(list.mkString(<span class="string">","</span>))</span><br><span class="line">        <span class="comment">//（6）是否包含</span></span><br><span class="line">        println(list.contains(<span class="number">3</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test11_CommonOp</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">89</span>)</span><br><span class="line">    <span class="keyword">val</span> set = <span class="type">Set</span>(<span class="number">23</span>, <span class="number">34</span>, <span class="number">423</span>, <span class="number">75</span>)</span><br><span class="line">    <span class="comment">//（1）获取集合长度</span></span><br><span class="line">    println(list.length)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（2）获取集合大小</span></span><br><span class="line">    println(list.size)</span><br><span class="line">    println(set.size)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（3）循环遍历</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list) println(elem)</span><br><span class="line">    set.foreach(println)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（4）迭代器</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list.iterator) println(elem)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（5）生成字符串</span></span><br><span class="line">    println(list)</span><br><span class="line">    println(set)</span><br><span class="line">    println(list.mkString(<span class="string">","</span>))</span><br><span class="line">    println(set.mkString(<span class="string">","</span>))</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（6）是否包含</span></span><br><span class="line">    println(list.contains(<span class="number">1</span>))</span><br><span class="line">    println(set.contains(<span class="number">23</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-2-衍生集合"><a href="#7-7-2-衍生集合" class="headerlink" title="7.7.2 衍生集合"></a>7.7.2 衍生集合</h3><p>1）说明  </p>
<p>（1）获取集合的头<br>（2）获取集合的尾（不是头的就是尾）<br>（3）集合最后一个数据<br>（4）集合初始数据（不包含最后一个）<br>（5）反转<br>（6）取前（后） n 个元素<br>（7）去掉前（后） n 个元素<br>（8）并集<br>（9）交集<br>（10）差集<br>（11）拉链<br>（12）滑窗  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list1: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">        <span class="keyword">val</span> list2: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">        <span class="comment">//（1）获取集合的头</span></span><br><span class="line">        println(list1.head)</span><br><span class="line">        <span class="comment">//（2）获取集合的尾（不是头的就是尾）</span></span><br><span class="line">        println(list1.tail)</span><br><span class="line">        <span class="comment">//（3）集合最后一个数据</span></span><br><span class="line">        println(list1.last)</span><br><span class="line">        <span class="comment">//（4）集合初始数据（不包含最后一个）</span></span><br><span class="line">        println(list1.init)</span><br><span class="line">        <span class="comment">//（5）反转</span></span><br><span class="line">        println(list1.reverse)</span><br><span class="line">        <span class="comment">//（6）取前（后） n 个元素</span></span><br><span class="line">        println(list1.take(<span class="number">3</span>))</span><br><span class="line">        println(list1.takeRight(<span class="number">3</span>))</span><br><span class="line">        <span class="comment">//（7）去掉前（后） n 个元素</span></span><br><span class="line">        println(list1.drop(<span class="number">3</span>))</span><br><span class="line">        println(list1.dropRight(<span class="number">3</span>))</span><br><span class="line">        <span class="comment">//（8）并集</span></span><br><span class="line">        println(list1.union(list2))</span><br><span class="line">        <span class="comment">//（9）交集</span></span><br><span class="line">        println(list1.intersect(list2))</span><br><span class="line">        <span class="comment">//（10）差集</span></span><br><span class="line">        println(list1.diff(list2))</span><br><span class="line">        <span class="comment">//（11）拉链 注:如果两个集合的元素个数不相等，那么会将同等数量的数据进行拉链，多余的数据省略不用</span></span><br><span class="line">        println(list1.zip(list2))</span><br><span class="line">        <span class="comment">//（12）滑窗</span></span><br><span class="line">        list1.sliding(<span class="number">2</span>, <span class="number">5</span>).foreach(println)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test12_DerivedCollection</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list1 = <span class="type">List</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">89</span>)</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">45</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">19</span>)</span><br><span class="line">    <span class="comment">//（1）获取集合的头</span></span><br><span class="line">    println(list1.head)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（2）获取集合的尾（不是头的就是尾）</span></span><br><span class="line">    println(list1.tail)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（3）集合最后一个数据</span></span><br><span class="line">    println(list1.last)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（4）集合初始数据（不包含最后一个）</span></span><br><span class="line">    println(list1.init)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（5）反转</span></span><br><span class="line">    println(list1.reverse)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（6）取前（后） n 个元素</span></span><br><span class="line">    println(list1.take(<span class="number">3</span>))</span><br><span class="line">    println(list1.takeRight(<span class="number">4</span>))</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（7）去掉前（后） n 个元素</span></span><br><span class="line">    println(list1.drop(<span class="number">3</span>))</span><br><span class="line">    println(list1.dropRight(<span class="number">4</span>))</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（8）并集</span></span><br><span class="line">    <span class="keyword">val</span> union = list1.union(list2)</span><br><span class="line">    println(<span class="string">"union: "</span> + union)</span><br><span class="line">    println(list1 ::: list2)</span><br><span class="line">    <span class="comment">// 如果是set做并集，会去重</span></span><br><span class="line">    <span class="keyword">val</span> set1 = <span class="type">Set</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">89</span>)</span><br><span class="line">    <span class="keyword">val</span> set2 = <span class="type">Set</span>(<span class="number">3</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">45</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">19</span>)</span><br><span class="line">    <span class="keyword">val</span> union2 = set1.union(set2)</span><br><span class="line">    println(<span class="string">"union2: "</span> + union2)</span><br><span class="line">    println(set1 ++ set2)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（9）交集</span></span><br><span class="line">    <span class="keyword">val</span> intersection = list1.intersect(list2)</span><br><span class="line">    println(intersection)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（10）差集</span></span><br><span class="line">    <span class="keyword">val</span> diff1 = list1.diff(list2)</span><br><span class="line">    <span class="keyword">val</span> diff2 = list2.diff(list1)</span><br><span class="line">    println(diff1)</span><br><span class="line">    println(diff2)</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（11）拉链</span></span><br><span class="line">    println(<span class="string">"zip: "</span> + list1.zip(list2))</span><br><span class="line">    println(<span class="string">"zip: "</span> + list2.zip(list1))</span><br><span class="line">    println(<span class="string">"=================="</span>)</span><br><span class="line">    <span class="comment">//（12）滑窗</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list1.sliding(<span class="number">3</span>)) println(elem) <span class="comment">// 滑动窗口，默认步长1</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list1.sliding(<span class="number">3</span>, <span class="number">2</span>)) println(elem) <span class="comment">// 滑动窗口，步长2</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list1.sliding(<span class="number">3</span>, <span class="number">3</span>)) println(elem) <span class="comment">// 滚动窗口</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-3-集合计算简单函数"><a href="#7-7-3-集合计算简单函数" class="headerlink" title="7.7.3 集合计算简单函数"></a>7.7.3 集合计算简单函数</h3><p>1）说明  </p>
<p>（1）求和<br>（2）求乘积<br>（3）最大值<br>（4）最小值<br>（5）排序  </p>
<p>2）实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">5</span>, <span class="number">-3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">-7</span>, <span class="number">6</span>)</span><br><span class="line">        <span class="comment">//（1）求和</span></span><br><span class="line">        println(list.sum)</span><br><span class="line">        <span class="comment">//（2）求乘积</span></span><br><span class="line">        println(list.product)</span><br><span class="line">        <span class="comment">//（3）最大值</span></span><br><span class="line">        println(list.max)</span><br><span class="line">        <span class="comment">//（4）最小值</span></span><br><span class="line">        println(list.min)</span><br><span class="line">        <span class="comment">//（5）排序</span></span><br><span class="line">        <span class="comment">// （5.1）按照元素大小排序</span></span><br><span class="line">        println(list.sortBy(x =&gt; x))</span><br><span class="line">        <span class="comment">// （5.2）按照元素的绝对值大小排序</span></span><br><span class="line">        println(list.sortBy(x =&gt; x.abs))</span><br><span class="line">        <span class="comment">// （5.3）按元素大小升序排序</span></span><br><span class="line">        println(list.sortWith((x, y) =&gt; x &lt; y))</span><br><span class="line">        <span class="comment">// （5.4）按元素大小降序排序</span></span><br><span class="line">        println(list.sortWith((x, y) =&gt; x &gt; y))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（1）sorted：对一个集合进行自然排序，通过传递隐式的 Ordering。<br>（2）sortBy：对一个属性或多个属性进行排序，通过它的类型。<br>（3）sortWith：基于函数的排序，通过一个 comparator 函数，实现自定义排序的逻辑。  </p>
<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test13_SimpleFunction</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">5</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">-3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>((<span class="string">"a"</span>, <span class="number">5</span>), (<span class="string">"b"</span>, <span class="number">1</span>), (<span class="string">"c"</span>, <span class="number">8</span>), (<span class="string">"d"</span>, <span class="number">2</span>), (<span class="string">"e"</span>, <span class="number">-3</span>), (<span class="string">"f"</span>, <span class="number">4</span>))</span><br><span class="line">    <span class="comment">//（1）求和</span></span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list) sum += elem</span><br><span class="line">    println(sum)</span><br><span class="line">    println(list.sum)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">//（2）求乘积</span></span><br><span class="line">    println(list.product)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">//（3）最大值</span></span><br><span class="line">    println(list.max)</span><br><span class="line">    println(list2.max)</span><br><span class="line">    println(list2.maxBy(_._2)) <span class="comment">// 指定排序准则</span></span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">//（4）最小值</span></span><br><span class="line">    println(list.min)</span><br><span class="line">    println(list2.minBy(_._2))</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">//（5）排序</span></span><br><span class="line">    <span class="comment">// 5.1 sorted</span></span><br><span class="line">    <span class="keyword">val</span> sortedList = list.sorted</span><br><span class="line">    println(sortedList)</span><br><span class="line">    <span class="comment">// 从大到小逆序排练</span></span><br><span class="line">    println(list.sorted.reverse) <span class="comment">// 不推荐</span></span><br><span class="line">    <span class="comment">// 传入隐氏参数</span></span><br><span class="line">    println(list.sorted(<span class="type">Ordering</span>[<span class="type">Int</span>]).reverse)</span><br><span class="line">    println(list2.sorted)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 5.2 sortBy</span></span><br><span class="line">    println(list2.sortBy(_._2))</span><br><span class="line">    println(list2.sortBy(_._2)(<span class="type">Ordering</span>[<span class="type">Int</span>].reverse))</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 5.3 sortWith</span></span><br><span class="line">    println(list.sortWith((a, b) =&gt; &#123;</span><br><span class="line">      a &lt; b</span><br><span class="line">    &#125;))</span><br><span class="line">    println(list.sortWith(_ &lt; _)) <span class="comment">// 简化，从小到大</span></span><br><span class="line">    println(list.sortWith(_ &gt; _)) <span class="comment">// 从大到小</span></span><br><span class="line">    println(list2.sortWith(_._2 &gt; _._2)) <span class="comment">// 从大到小</span></span><br><span class="line">    println(list2.sortWith(_._2 &lt; _._2)) <span class="comment">// 从小到小</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-4-集合计算高级函数"><a href="#7-7-4-集合计算高级函数" class="headerlink" title="7.7.4 集合计算高级函数"></a>7.7.4 集合计算高级函数</h3><p>1）说明  </p>
<p>（1）过滤 ：遍历一个集合并从中获取满足指定条件的元素组成一个新的集合<br>（2）转化/映射（ map）：将集合中的每一个元素映射到某一个函数<br>（3）扁平化<br>（4）扁平化+映射 注： flatMap 相当于先进行 map 操作，在进行 flatten 操作集合中的每个元素的子元素映射到某个函数并返回新集合<br>（5）分组(group)：按照指定的规则对集合的元素进行分组<br>（6）简化（ 归约）<br>（7）折叠  </p>
<p>2）实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line">        <span class="keyword">val</span> nestedList: <span class="type">List</span>[<span class="type">List</span>[<span class="type">Int</span>]] = <span class="type">List</span>(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="type">List</span>(<span class="number">4</span>,</span><br><span class="line">        <span class="number">5</span>, <span class="number">6</span>), <span class="type">List</span>(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>))</span><br><span class="line">        <span class="keyword">val</span> wordList: <span class="type">List</span>[<span class="type">String</span>] = <span class="type">List</span>(<span class="string">"hello world"</span>, <span class="string">"hello atguigu"</span>, <span class="string">"hello scala"</span>)</span><br><span class="line">        <span class="comment">//（ 1）过滤</span></span><br><span class="line">        println(list.filter(x =&gt; x % <span class="number">2</span> == <span class="number">0</span>))</span><br><span class="line">        <span class="comment">//（ 2）转化/映射</span></span><br><span class="line">        println(list.map(x =&gt; x + <span class="number">1</span>))</span><br><span class="line">        <span class="comment">//（ 3）扁平化</span></span><br><span class="line">        println(nestedList.flatten)</span><br><span class="line">        <span class="comment">//（ 4）扁平化+映射 注： flatMap 相当于先进行 map 操作，在进行 flatten</span></span><br><span class="line">        操作</span><br><span class="line">        println(wordList.flatMap(x =&gt; x.split(<span class="string">" "</span>)))</span><br><span class="line">        <span class="comment">//（ 5）分组</span></span><br><span class="line">        println(list.groupBy(x =&gt; x % <span class="number">2</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test14_HighLevelFunction_Map</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line">    <span class="comment">// 1. 过滤</span></span><br><span class="line">    <span class="comment">// 选取偶数</span></span><br><span class="line">    <span class="keyword">val</span> evenList = list.filter(elem =&gt; elem % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    println(evenList)</span><br><span class="line">    println(list.filter(_ % <span class="number">2</span> == <span class="number">0</span>)) <span class="comment">// 简化</span></span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 2. map</span></span><br><span class="line">    <span class="comment">// 把集合中每个数乘2</span></span><br><span class="line">    println(list.map(_ * <span class="number">2</span>))</span><br><span class="line">    println(list.map(x =&gt; x * x))</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 3. 扁平化</span></span><br><span class="line">    <span class="keyword">val</span> nestedList: <span class="type">List</span>[<span class="type">List</span>[<span class="type">Int</span>]] = <span class="type">List</span>(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), <span class="type">List</span>(<span class="number">4</span>, <span class="number">5</span>), <span class="type">List</span>(<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>))</span><br><span class="line">    <span class="keyword">val</span> flatList = nestedList(<span class="number">0</span>) ::: nestedList(<span class="number">1</span>) ::: nestedList(<span class="number">2</span>) <span class="comment">// 不推荐，不通用</span></span><br><span class="line">    println(flatList)</span><br><span class="line">    <span class="keyword">val</span> flatList2 = nestedList.flatten <span class="comment">// 推荐</span></span><br><span class="line">    println(flatList2)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 4. 扁平映射</span></span><br><span class="line">    <span class="comment">// 将一组字符串进行分词，并保存成单词的列表</span></span><br><span class="line">    <span class="keyword">val</span> strings: <span class="type">List</span>[<span class="type">String</span>] = <span class="type">List</span>(<span class="string">"hello word"</span>, <span class="string">"hello scala"</span>, <span class="string">"hello java"</span>, <span class="string">"we study"</span>)</span><br><span class="line">    <span class="comment">// val splitList: List[Array[String]] = strings.map(string =&gt; string.split(" "))</span></span><br><span class="line">    <span class="keyword">val</span> splitList: <span class="type">List</span>[<span class="type">Array</span>[<span class="type">String</span>]] = strings.map(_.split(<span class="string">" "</span>))</span><br><span class="line">    <span class="keyword">val</span> flattenList = splitList.flatten</span><br><span class="line">    println(flattenList)</span><br><span class="line">    <span class="keyword">val</span> flatmapList = strings.flatMap(_.split(<span class="string">" "</span>)) <span class="comment">// 上述比较麻烦，推荐flatMap方式，一步搞定</span></span><br><span class="line">    println(flatmapList)</span><br><span class="line">    println(<span class="string">"====================="</span>)</span><br><span class="line">    <span class="comment">// 5. 分组groupBy</span></span><br><span class="line">    <span class="comment">// 分成奇数偶数两组</span></span><br><span class="line">    <span class="comment">// val groupMap = list.groupBy(elem =&gt; elem % 2)</span></span><br><span class="line">    <span class="keyword">val</span> groupMap = list.groupBy(_ % <span class="number">2</span>)</span><br><span class="line">    println(groupMap)</span><br><span class="line">    <span class="keyword">val</span> groupMap2 = list.groupBy(data =&gt; <span class="keyword">if</span> (data % <span class="number">2</span> == <span class="number">0</span>) <span class="string">"偶数"</span> <span class="keyword">else</span> <span class="string">"奇数"</span>)</span><br><span class="line">    println(groupMap2)</span><br><span class="line">    <span class="comment">// 给定一组词汇，按照单词的首字母进行分组</span></span><br><span class="line">    <span class="keyword">val</span> wordList = <span class="type">List</span>(<span class="string">"china"</span>, <span class="string">"america"</span>, <span class="string">"alice"</span>, <span class="string">"canada"</span>, <span class="string">"cary"</span>, <span class="string">"bob"</span>, <span class="string">"japan"</span>)</span><br><span class="line">    println(wordList.groupBy(_.charAt(<span class="number">0</span>)))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3）Reduce 方法  </p>
<p>Reduce 简化（归约）：通过指定的逻辑将集合中的数据进行聚合，从而减少数据，最终获取结果。  </p>
<p>案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestReduce</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">        <span class="comment">// 将数据两两结合，实现运算规则</span></span><br><span class="line">        <span class="keyword">val</span> i: <span class="type">Int</span> = list.reduce( (x,y) =&gt; x-y )</span><br><span class="line">        println(<span class="string">"i = "</span> + i)</span><br><span class="line">        <span class="comment">// 从源码的角度， reduce 底层调用的其实就是 reduceLeft	</span></span><br><span class="line">        <span class="comment">//val i1 = list.reduceLeft((x,y) =&gt; x-y)</span></span><br><span class="line">        <span class="comment">// ((4-3)-2-1) = -2</span></span><br><span class="line">        <span class="keyword">val</span> i2 = list.reduceRight((x,y) =&gt; x-y)</span><br><span class="line">        println(i2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4）Fold 方法  </p>
<p>Fold 折叠：化简的一种特殊情况  </p>
<p>（1）案例实操： fold 基本使用  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFold</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">        <span class="comment">// fold 方法使用了函数柯里化，存在两个参数列表</span></span><br><span class="line">        <span class="comment">// 第一个参数列表为 ： 零值（初始值）</span></span><br><span class="line">        <span class="comment">// 第二个参数列表为： 简化规则</span></span><br><span class="line">        <span class="comment">// fold 底层其实为 foldLeft</span></span><br><span class="line">        <span class="keyword">val</span> i = list.foldLeft(<span class="number">1</span>)((x,y)=&gt;x-y)</span><br><span class="line">        <span class="keyword">val</span> i1 = list.foldRight(<span class="number">10</span>)((x,y)=&gt;x-y)</span><br><span class="line">        println(i)</span><br><span class="line">        println(i1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）案例实操： 两个集合合并  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestFold</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 两个 Map 的数据合并</span></span><br><span class="line">        <span class="keyword">val</span> map1 = mutable.<span class="type">Map</span>(<span class="string">"a"</span>-&gt;<span class="number">1</span>, <span class="string">"b"</span>-&gt;<span class="number">2</span>, <span class="string">"c"</span>-&gt;<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">val</span> map2 = mutable.<span class="type">Map</span>(<span class="string">"a"</span>-&gt;<span class="number">4</span>, <span class="string">"b"</span>-&gt;<span class="number">5</span>, <span class="string">"d"</span>-&gt;<span class="number">6</span>)</span><br><span class="line">        <span class="keyword">val</span> map3: mutable.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = map2.foldLeft(map1) &#123;</span><br><span class="line">            (map, kv) =&gt; &#123;</span><br><span class="line">                <span class="keyword">val</span> k = kv._1</span><br><span class="line">                <span class="keyword">val</span> v = kv._2</span><br><span class="line">                map(k) = map.getOrElse(k, <span class="number">0</span>) + v</span><br><span class="line">                map</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        println(map3)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test15_HighLevelFunction_Reduce</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="comment">// 1. reduce</span></span><br><span class="line">    <span class="comment">// list.reduce((a, b) =&gt; a + b)</span></span><br><span class="line">    println(list.reduce(_ + _)) <span class="comment">// 等同于sum,这里底层用的是reduceLeft, 10</span></span><br><span class="line">    println(list.reduceLeft(_ + _)) <span class="comment">// 从左往右一个一个的加</span></span><br><span class="line">    println(list.reduceRight(_ + _)) <span class="comment">// 从右往左一个一个的加</span></span><br><span class="line">    println(<span class="string">"======================="</span>)</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">10</span>)</span><br><span class="line">    println(list2.reduce(_ - _)) <span class="comment">// -24</span></span><br><span class="line">    println(list2.reduceLeft(_ - _)) <span class="comment">// -24</span></span><br><span class="line">    println(list2.reduceRight(_ - _)) <span class="comment">// 6 ,这里特殊，底层不是从右往左一个一个的减，而是 3-(4-(5-(8-10)))</span></span><br><span class="line">    println(<span class="string">"======================="</span>)</span><br><span class="line">    <span class="comment">// 2. fold</span></span><br><span class="line">    println(list.fold(<span class="number">10</span>)(_ + _)) <span class="comment">// 10 + 1 + 2 + 3 + 4 = 20</span></span><br><span class="line">    println(list.foldLeft(<span class="number">10</span>)(_ + _)) <span class="comment">// 20</span></span><br><span class="line">    println(list.foldRight(<span class="number">10</span>)(_ + _)) <span class="comment">// 20</span></span><br><span class="line">    println(list.foldLeft(<span class="number">10</span>)(_ - _)) <span class="comment">// 10 -1 -2 -3 -4 = 0</span></span><br><span class="line">    println(list2.foldRight(<span class="number">11</span>)(_ - _)) <span class="comment">// 特殊， 3 - (4 - (5 - (8 -(10 -11)))), -5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test16_MergeMap</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> map1 = <span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">1</span>, <span class="string">"b"</span> -&gt; <span class="number">3</span>, <span class="string">"c"</span> -&gt; <span class="number">6</span>)</span><br><span class="line">    <span class="keyword">val</span> map2 = mutable.<span class="type">Map</span>(<span class="string">"a"</span> -&gt; <span class="number">6</span>, <span class="string">"b"</span> -&gt; <span class="number">2</span>, <span class="string">"c"</span> -&gt; <span class="number">9</span>, <span class="string">"d"</span> -&gt; <span class="number">3</span>)</span><br><span class="line">    <span class="comment">// println(map1 ++ map2)</span></span><br><span class="line">    <span class="keyword">val</span> map3 = map1.foldLeft(map2)(</span><br><span class="line">      (mergedMap, kv) =&gt; &#123;</span><br><span class="line">        <span class="keyword">val</span> key = kv._1</span><br><span class="line">        <span class="keyword">val</span> value = kv._2</span><br><span class="line">        mergedMap(key) = mergedMap.getOrElse(key, <span class="number">0</span>) + value</span><br><span class="line">        mergedMap</span><br><span class="line">      &#125;)</span><br><span class="line">    println(map3)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-5-普通-WordCount-案例"><a href="#7-7-5-普通-WordCount-案例" class="headerlink" title="7.7.5 普通 WordCount 案例"></a>7.7.5 普通 WordCount 案例</h3><p>1）需求  </p>
<p>单词计数： 将集合中出现的相同的单词，进行计数，取计数排名前三的结果  </p>
<p>2）需求分析  </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230420100743627.png" alt="image-20230420100743627"></p>
<p>3）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestWordCount</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 单词计数：将集合中出现的相同的单词，进行计数，取计数排名前三的结果</span></span><br><span class="line">        <span class="keyword">val</span> stringList = <span class="type">List</span>(<span class="string">"Hello Scala Hbase kafka"</span>, <span class="string">"Hello Scala Hbase"</span>, <span class="string">"Hello Scala"</span>, <span class="string">"Hello"</span>)</span><br><span class="line">        <span class="comment">// 1) 将每一个字符串转换成一个一个单词</span></span><br><span class="line">        <span class="keyword">val</span> wordList: <span class="type">List</span>[<span class="type">String</span>] = stringList.flatMap(str=&gt;str.split(<span class="string">" "</span>))</span><br><span class="line">        <span class="comment">// println(wordList)</span></span><br><span class="line">        <span class="comment">// 2) 将相同的单词放置在一起</span></span><br><span class="line">        <span class="keyword">val</span> wordToWordsMap: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">List</span>[<span class="type">String</span>]] = wordList.groupBy(word=&gt;word)</span><br><span class="line">        <span class="comment">//println(wordToWordsMap)</span></span><br><span class="line">        <span class="comment">// 3) 对相同的单词进行计数</span></span><br><span class="line">        <span class="comment">// (word, list) =&gt; (word, count)</span></span><br><span class="line">        <span class="keyword">val</span> wordToCountMap: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = wordToWordsMap.map(tuple=&gt;(tuple._1, tuple._2.size))</span><br><span class="line">        <span class="comment">// 4) 对计数完成后的结果进行排序（降序）</span></span><br><span class="line">        <span class="keyword">val</span> sortList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = wordToCountMap.toList.sortWith &#123;</span><br><span class="line">            (left, right) =&gt; &#123;</span><br><span class="line">            	left._2 &gt; right._2</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5) 对排序后的结果取前 3 名</span></span><br><span class="line">        <span class="keyword">val</span> resultList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = sortList.take(<span class="number">3</span>)</span><br><span class="line">        println(resultList)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test17_CommonWordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> stringList: <span class="type">List</span>[<span class="type">String</span>] = <span class="type">List</span>(</span><br><span class="line">      <span class="string">"hello"</span>,</span><br><span class="line">      <span class="string">"hello word"</span>,</span><br><span class="line">      <span class="string">"hello scala"</span>,</span><br><span class="line">      <span class="string">"hello spark from scala"</span>,</span><br><span class="line">      <span class="string">"hello flink from scala"</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// 1. 对字符串进行切分，得到一个打散所有单词的列表</span></span><br><span class="line">    <span class="comment">// val wordList1 = stringList.map(_.split(" "))</span></span><br><span class="line">    <span class="comment">// val wordList2 = wordList1.flatten</span></span><br><span class="line">    <span class="comment">// println(wordList2)</span></span><br><span class="line">    <span class="keyword">val</span> wordList = stringList.flatMap(_.split(<span class="string">" "</span>))</span><br><span class="line">    println(wordList)</span><br><span class="line">    <span class="comment">// 2. 相同的单词进行分组</span></span><br><span class="line">    <span class="keyword">val</span> groupMap: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">List</span>[<span class="type">String</span>]] = wordList.groupBy(word =&gt; word)</span><br><span class="line">    println(groupMap)</span><br><span class="line">    <span class="comment">// 3. 对分组之后的list取长度，得到每个单词的个数</span></span><br><span class="line">    <span class="keyword">val</span> countMap: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = groupMap.map(kv =&gt; (kv._1, kv._2.length))</span><br><span class="line">    println(countMap)</span><br><span class="line">    <span class="comment">// 4. 将map装换为list,并排序取前3</span></span><br><span class="line">    <span class="keyword">val</span> sortList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = countMap.toList.sortWith(_._2 &gt; _._2).take(<span class="number">3</span>)</span><br><span class="line">    println(sortList)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-6-复杂-WordCount-案例"><a href="#7-7-6-复杂-WordCount-案例" class="headerlink" title="7.7.6 复杂 WordCount 案例"></a>7.7.6 复杂 WordCount 案例</h3><p>1）方式一  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestWordCount</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 第一种方式（不通用）</span></span><br><span class="line">        <span class="keyword">val</span> tupleList = <span class="type">List</span>((<span class="string">"Hello Scala Spark World "</span>, <span class="number">4</span>), (<span class="string">"Hello Scala Spark"</span>, <span class="number">3</span>), (<span class="string">"Hello Scala"</span>, <span class="number">2</span>), (<span class="string">"Hello"</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">val</span> stringList: <span class="type">List</span>[<span class="type">String</span>] = tupleList.map(t=&gt;(t._1 + <span class="string">""</span>) * t._2)</span><br><span class="line">        <span class="comment">// val words: List[String] = stringList.flatMap(s=&gt;s.split(" "))</span></span><br><span class="line">        <span class="keyword">val</span> words: <span class="type">List</span>[<span class="type">String</span>] = stringList.flatMap(_.split(<span class="string">" "</span>))</span><br><span class="line">        <span class="comment">// 在 map 中，如果传进来什么就返回什么，不要用_省略</span></span><br><span class="line">        <span class="keyword">val</span> groupMap: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">List</span>[<span class="type">String</span>]] = words.groupBy(word=&gt;word)</span><br><span class="line">        <span class="comment">// val groupMap: Map[String, List[String]] =  words.groupBy(_)</span></span><br><span class="line">        <span class="comment">// (word, list) =&gt; (word, count)</span></span><br><span class="line">        <span class="keyword">val</span> wordToCount: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = groupMap.map(t=&gt;(t._1, t._2.size))</span><br><span class="line">        <span class="keyword">val</span> wordCountList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = wordToCount.toList.sortWith &#123;</span><br><span class="line">            (left, right) =&gt; &#123;</span><br><span class="line">                left._2 &gt; right._2</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.take(<span class="number">3</span>)</span><br><span class="line">        <span class="comment">//tupleList.map(t=&gt;(t._1 + " ") * t._2).flatMap(_.split(" ")).groupBy(word=&gt;word).map(t=&gt;(t._1, t._2.size))</span></span><br><span class="line">        println(wordCountList)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）方式二  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestWordCount</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> tuples = <span class="type">List</span>((<span class="string">"Hello Scala Spark World"</span>, <span class="number">4</span>), (<span class="string">"Hello Scala Spark"</span>, <span class="number">3</span>), (<span class="string">"Hello Scala"</span>, <span class="number">2</span>), (<span class="string">"Hello"</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="comment">// (Hello,4),(Scala,4),(Spark,4),(World,4)</span></span><br><span class="line">        <span class="comment">// (Hello,3),(Scala,3),(Spark,3)</span></span><br><span class="line">        <span class="comment">// (Hello,2),(Scala,2)</span></span><br><span class="line">        <span class="comment">// (Hello,1)</span></span><br><span class="line">        <span class="keyword">val</span> wordToCountList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = tuples.flatMap &#123;</span><br><span class="line">            t =&gt; &#123;</span><br><span class="line">                <span class="keyword">val</span> strings: <span class="type">Array</span>[<span class="type">String</span>] = t._1.split(<span class="string">" "</span>)</span><br><span class="line">                strings.map(word =&gt; (word, t._2))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Hello, List((Hello,4), (Hello,3), (Hello,2), (Hello,1))</span></span><br><span class="line">        <span class="comment">// Scala, List((Scala,4), (Scala,3), (Scala,2)</span></span><br><span class="line">        <span class="comment">// Spark, List((Spark,4), (Spark,3)</span></span><br><span class="line">        <span class="comment">// Word, List((Word,4))</span></span><br><span class="line">        <span class="keyword">val</span> wordToTupleMap: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)]] =  wordToCountList.groupBy(t=&gt;t._1)</span><br><span class="line">        <span class="keyword">val</span> stringToInts: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">List</span>[<span class="type">Int</span>]] = wordToTupleMap.mapValues &#123;</span><br><span class="line">            datas =&gt; datas.map(t =&gt; t._2)</span><br><span class="line">        &#125;</span><br><span class="line">        stringToInts</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        val wordToCountMap: Map[String, List[Int]] =  wordToTupleMap.map &#123;</span></span><br><span class="line"><span class="comment">            t =&gt; &#123;</span></span><br><span class="line"><span class="comment">           	 (t._1, t._2.map(t1 =&gt; t1._2))</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        val wordToTotalCountMap: Map[String, Int] = wordToCountMap.map(t=&gt;(t._1, t._2.sum))</span></span><br><span class="line"><span class="comment">        println(wordToTotalCountMap)</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test18_ComplexWordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> tupleList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = <span class="type">List</span>(</span><br><span class="line">      (<span class="string">"hello"</span>, <span class="number">1</span>),</span><br><span class="line">      (<span class="string">"hello word"</span>, <span class="number">2</span>),</span><br><span class="line">      (<span class="string">"hello scala"</span>, <span class="number">3</span>),</span><br><span class="line">      (<span class="string">"hello spark from scala"</span>, <span class="number">1</span>),</span><br><span class="line">      (<span class="string">"hello flink from scala"</span>, <span class="number">2</span>)</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">// 思路一：直接展开为普通版本</span></span><br><span class="line">    <span class="keyword">val</span> newStringList = tupleList.map(kv =&gt; &#123;</span><br><span class="line">      (kv._1.trim + <span class="string">" "</span>) * kv._2</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">val</span> sortList = newStringList</span><br><span class="line">      .flatMap(_.split(<span class="string">" "</span>))</span><br><span class="line">      .groupBy(word =&gt; word)</span><br><span class="line">      .map(kv =&gt; (kv._1, kv._2.length))</span><br><span class="line">      .toList</span><br><span class="line">      .sortBy(_._2)(<span class="type">Ordering</span>[<span class="type">Int</span>].reverse)</span><br><span class="line">      .take(<span class="number">3</span>)</span><br><span class="line">    println(sortList)</span><br><span class="line">    println(<span class="string">"======================================="</span>)</span><br><span class="line">    <span class="comment">// 思路二：直接基于预统计的结果进行转换</span></span><br><span class="line">    <span class="comment">// 先将字符串打散为单词，并结合对应的个数包装成二元组</span></span><br><span class="line">    <span class="keyword">val</span> preCountList: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = tupleList.flatMap(tuple =&gt; &#123;</span><br><span class="line">      <span class="keyword">val</span> strings: <span class="type">Array</span>[<span class="type">String</span>] = tuple._1.split(<span class="string">" "</span>)</span><br><span class="line">      strings.map(word =&gt; (word, tuple._2))</span><br><span class="line">    &#125;)</span><br><span class="line">    println(preCountList)</span><br><span class="line">    <span class="keyword">val</span> sortList2 = preCountList</span><br><span class="line">      .groupBy(_._1)</span><br><span class="line">      <span class="comment">//.map(kv =&gt; (kv._1, kv._2.map(_._2).sum)) // 推荐下面这种写法</span></span><br><span class="line">      .mapValues(_.map(_._2).sum)</span><br><span class="line">      .toList</span><br><span class="line">      .sortBy(_._2)(<span class="type">Ordering</span>[<span class="type">Int</span>].reverse)</span><br><span class="line">      .take(<span class="number">3</span>)</span><br><span class="line">    println(sortList2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-8-队列"><a href="#7-8-队列" class="headerlink" title="7.8 队列"></a>7.8 队列</h2><p>1）说明  </p>
<p>Scala 也提供了队列（ Queue）的数据结构，队列的特点就是先进先出。进队和出队的方法分别为 enqueue 和 dequeue。  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestQueue</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> que = <span class="keyword">new</span> mutable.<span class="type">Queue</span>[<span class="type">String</span>]()</span><br><span class="line">        que.enqueue(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">        println(que.dequeue())</span><br><span class="line">        println(que.dequeue())</span><br><span class="line">        println(que.dequeue())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"><span class="keyword">import</span> scala.collection.immutable.<span class="type">Queue</span></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test19_Queue</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 创建一个可变队列（常用）</span></span><br><span class="line">    <span class="keyword">val</span> queue = <span class="keyword">new</span> mutable.<span class="type">Queue</span>[<span class="type">String</span>]()</span><br><span class="line">    queue.enqueue(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">    println(queue)</span><br><span class="line">    println(queue.dequeue())</span><br><span class="line">    println(queue)</span><br><span class="line">    queue.enqueue(<span class="string">"d"</span>)</span><br><span class="line">    println(queue)</span><br><span class="line">    println(queue.dequeue())</span><br><span class="line">    println(queue)</span><br><span class="line">    println(<span class="string">"================="</span>)</span><br><span class="line">    <span class="comment">// 不可变队列</span></span><br><span class="line">    <span class="keyword">val</span> queue2 = <span class="type">Queue</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">    <span class="keyword">val</span> queue3 = queue2.enqueue(<span class="string">"d"</span>)</span><br><span class="line">    println(queue3)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-9-并行集合"><a href="#7-9-并行集合" class="headerlink" title="7.9 并行集合"></a>7.9 并行集合</h2><p>1）说明  </p>
<p>Scala 为了充分使用多核 CPU，提供了并行集合（有别于前面的串行集合），用于多核环境的并行计算。  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestPar</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> result1 = (<span class="number">0</span> to <span class="number">100</span>).map&#123;<span class="keyword">case</span> _ =&gt; <span class="type">Thread</span>.currentThread.getName&#125;</span><br><span class="line">        <span class="keyword">val</span> result2 = (<span class="number">0</span> to <span class="number">100</span>).par.map&#123;<span class="keyword">case</span> _ =&gt; <span class="type">Thread</span>.currentThread.getName&#125;</span><br><span class="line">        println(result1)</span><br><span class="line">        println(result2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter07</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test20_Parallel</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> result = (<span class="number">1</span> to <span class="number">100</span>).map(</span><br><span class="line">      x =&gt; <span class="type">Thread</span>.currentThread().getId</span><br><span class="line">    )</span><br><span class="line">    println(result)</span><br><span class="line">    <span class="keyword">val</span> result2 = ((<span class="number">1</span> to <span class="number">100</span>)).par.map(</span><br><span class="line">      x =&gt; <span class="type">Thread</span>.currentThread().getId</span><br><span class="line">    )</span><br><span class="line">    println(result2)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-8-章-模式匹配"><a href="#第-8-章-模式匹配" class="headerlink" title="第 8 章 模式匹配"></a>第 8 章 模式匹配</h1><p>Scala 中的模式匹配类似于 Java 中的 switch 语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">int i = <span class="number">10</span></span><br><span class="line">switch (i) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">10</span> :</span><br><span class="line">		<span class="type">System</span>.out.println(<span class="string">"10"</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">20</span> :</span><br><span class="line">		<span class="type">System</span>.out.println(<span class="string">"20"</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">default</span> :</span><br><span class="line">		<span class="type">System</span>.out.println(<span class="string">"other number"</span>);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是 scala 从语法中补充了更多的功能，所以更加强大。  </p>
<h2 id="8-1-基本语法"><a href="#8-1-基本语法" class="headerlink" title="8.1 基本语法"></a>8.1 基本语法</h2><p>模式匹配语法中，采用 match 关键字声明，每个分支采用 case 关键字进行声明，当需要匹配时，会从第一个 case 分支开始，如果匹配成功，那么执行对应的逻辑代码，如果匹配不成功，继续执行下一个分支进行判断。如果所有 case 都不匹配，那么会执行 case _分支，类似于 Java 中 default 语句。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchCase</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">var</span> a: <span class="type">Int</span> = <span class="number">10</span></span><br><span class="line">        <span class="keyword">var</span> b: <span class="type">Int</span> = <span class="number">20</span></span><br><span class="line">        <span class="keyword">var</span> operator: <span class="type">Char</span> = 'd'</span><br><span class="line">        <span class="keyword">var</span> result = operator <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> '+' =&gt; a + b</span><br><span class="line">            <span class="keyword">case</span> '-' =&gt; a - b</span><br><span class="line">            <span class="keyword">case</span> '*' =&gt; a * b</span><br><span class="line">            <span class="keyword">case</span> '/' =&gt; a / b</span><br><span class="line">            <span class="keyword">case</span> _ =&gt; <span class="string">"illegal"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1） 说明  </p>
<p>（1）如果所有 case 都不匹配，那么会执行 case _ 分支，类似于 Java 中 default 语句，若此时没有 case _ 分支，那么会抛出 MatchError。<br>（2）每个 case 中，不需要使用 break 语句，自动中断 case。<br>（3）match case 语句可以匹配任何类型，而不只是字面量。<br>（4）=&gt; 后面的代码块，直到下一个 case 语句之前的代码是作为一个整体执行，可以使用{}括起来，也可以不括。  </p>
<h2 id="8-2-模式守卫"><a href="#8-2-模式守卫" class="headerlink" title="8.2 模式守卫"></a>8.2 模式守卫</h2><p>1） 说明  </p>
<p>如果想要表达匹配某个范围的数据，就需要在模式匹配中增加条件守卫。  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchGuard</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">abs</span></span>(x: <span class="type">Int</span>) = x <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> i: <span class="type">Int</span> <span class="keyword">if</span> i &gt;= <span class="number">0</span> =&gt; i</span><br><span class="line">            <span class="keyword">case</span> j: <span class="type">Int</span> <span class="keyword">if</span> j &lt; <span class="number">0</span> =&gt; -j</span><br><span class="line">            <span class="keyword">case</span> _ =&gt; <span class="string">"type illegal"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(abs(<span class="number">-5</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter08</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test01_PatternMatchBase</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 基本定义语法</span></span><br><span class="line">    <span class="keyword">val</span> x: <span class="type">Int</span> = <span class="number">2</span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">String</span> = x <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="string">"one"</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span> =&gt; <span class="string">"two"</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span> =&gt; <span class="string">"three"</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="string">"other"</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(y)</span><br><span class="line">    println(<span class="string">"================================="</span>)</span><br><span class="line">    <span class="comment">// 2. 示例：用模式匹配实现简单的二元运算</span></span><br><span class="line">    <span class="keyword">val</span> a = <span class="number">25</span></span><br><span class="line">    <span class="keyword">val</span> b = <span class="number">13</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">matchDualOp</span></span>(op: <span class="type">Char</span>): <span class="type">Int</span> = op <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> '+' =&gt; a + b</span><br><span class="line">      <span class="keyword">case</span> '-' =&gt; a - b</span><br><span class="line">      <span class="keyword">case</span> '*' =&gt; a * b</span><br><span class="line">      <span class="keyword">case</span> '/' =&gt; a / b</span><br><span class="line">      <span class="keyword">case</span> '%' =&gt; a % b</span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(matchDualOp('+'))</span><br><span class="line">    println(matchDualOp('/'))</span><br><span class="line">    println(matchDualOp('\\'))</span><br><span class="line">    println(<span class="string">"================================="</span>)</span><br><span class="line">    <span class="comment">// 3. 模式守卫(不用精确的匹配到某一个具体值，可以根据一个范围做一个模糊的匹配)</span></span><br><span class="line">    <span class="comment">// 求一个整数的绝对值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">abs</span></span>(num: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">      num <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> i <span class="keyword">if</span> i &gt;= <span class="number">0</span> =&gt; i</span><br><span class="line">        <span class="keyword">case</span> i <span class="keyword">if</span> i &lt; <span class="number">0</span> =&gt; -i</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    println(abs(<span class="number">6</span>))</span><br><span class="line">    println(abs(<span class="number">-6</span>))</span><br><span class="line">    println(abs(<span class="number">0</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-3-模式匹配类型"><a href="#8-3-模式匹配类型" class="headerlink" title="8.3 模式匹配类型"></a>8.3 模式匹配类型</h2><h3 id="8-3-1-匹配常量"><a href="#8-3-1-匹配常量" class="headerlink" title="8.3.1 匹配常量"></a>8.3.1 匹配常量</h3><p>1）说明  </p>
<p>Scala 中，模式匹配可以匹配所有的字面量，包括字符串，字符，数字，布尔值等等。  </p>
<p>2）实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchVal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(describe(<span class="number">6</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(x: <span class="type">Any</span>) = x <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span> =&gt; <span class="string">"Int five"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">"hello"</span> =&gt; <span class="string">"String hello"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="literal">true</span> =&gt; <span class="string">"Boolean true"</span></span><br><span class="line">        <span class="keyword">case</span> '+' =&gt; <span class="string">"Char +"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-2-匹配类型"><a href="#8-3-2-匹配类型" class="headerlink" title="8.3.2 匹配类型"></a>8.3.2 匹配类型</h3><p>1）说明  </p>
<p>需要进行类型判断时，可以使用前文所学的 isInstanceOf[T]和 asInstanceOf[T]，也可使用模式匹配实现同样的功能。  </p>
<p>2）案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(x: <span class="type">Any</span>) = x <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> i: <span class="type">Int</span> =&gt; <span class="string">"Int"</span></span><br><span class="line">        <span class="keyword">case</span> s: <span class="type">String</span> =&gt; <span class="string">"String hello"</span></span><br><span class="line">        <span class="keyword">case</span> m: <span class="type">List</span>[_] =&gt; <span class="string">"List"</span></span><br><span class="line">        <span class="keyword">case</span> c: <span class="type">Array</span>[<span class="type">Int</span>] =&gt; <span class="string">"Array[Int]"</span></span><br><span class="line">        <span class="keyword">case</span> someThing =&gt; <span class="string">"something else "</span> + someThing</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//泛型擦除</span></span><br><span class="line">        println(describe(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)))</span><br><span class="line">        <span class="comment">//数组例外，可保留泛型</span></span><br><span class="line">        println(describe(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)))</span><br><span class="line">        println(describe(<span class="type">Array</span>(<span class="string">"abc"</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-3-匹配数组"><a href="#8-3-3-匹配数组" class="headerlink" title="8.3.3 匹配数组"></a>8.3.3 匹配数组</h3><p>1）说明  </p>
<p>scala 模式匹配可以对集合进行精确的匹配，例如匹配只有两个元素的、且第一个元素为 0 的数组。  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchArray</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">for</span> (arr &lt;- <span class="type">Array</span>(<span class="type">Array</span>(<span class="number">0</span>), <span class="type">Array</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="type">Array</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),<span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>), <span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>), <span class="type">Array</span>(<span class="string">"hello"</span>, <span class="number">90</span>))) &#123; <span class="comment">// 对一个数组集合进行遍历</span></span><br><span class="line">        <span class="keyword">val</span> result = arr <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>) =&gt; <span class="string">"0"</span> <span class="comment">//匹配 Array(0) 这个数组</span></span><br><span class="line">            <span class="keyword">case</span> <span class="type">Array</span>(x, y) =&gt; x + <span class="string">","</span> + y <span class="comment">//匹配有两个元素的数组，然后将将元素值赋给对应的 x,y</span></span><br><span class="line">            <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>, _*) =&gt; <span class="string">"以 0 开头的数组"</span> <span class="comment">//匹配以 0 开头和数组</span></span><br><span class="line">            <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(<span class="string">"result = "</span> + result)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-4-匹配列表"><a href="#8-3-4-匹配列表" class="headerlink" title="8.3.4 匹配列表"></a>8.3.4 匹配列表</h3><p>1）方式一  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//list 是一个存放 List 集合的数组</span></span><br><span class="line">        <span class="comment">//请思考，如果要匹配 List(88) 这样的只含有一个元素的列表,并原值返回.应该怎么写</span></span><br><span class="line">        <span class="keyword">for</span> (list &lt;- <span class="type">Array</span>(<span class="type">List</span>(<span class="number">0</span>), <span class="type">List</span>(<span class="number">1</span>, <span class="number">0</span>), <span class="type">List</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="type">List</span>(<span class="number">1</span>,<span class="number">0</span>, <span class="number">0</span>), <span class="type">List</span>(<span class="number">88</span>))) &#123;</span><br><span class="line">            <span class="keyword">val</span> result = list <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="type">List</span>(<span class="number">0</span>) =&gt; <span class="string">"0"</span> <span class="comment">//匹配 List(0)</span></span><br><span class="line">            <span class="keyword">case</span> <span class="type">List</span>(x, y) =&gt; x + <span class="string">","</span> + y <span class="comment">//匹配有两个元素的 List</span></span><br><span class="line">            <span class="keyword">case</span> <span class="type">List</span>(<span class="number">0</span>, _*) =&gt; <span class="string">"0 ..."</span></span><br><span class="line">            <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(result)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）方式二  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> list: <span class="type">List</span>[<span class="type">Int</span>] = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">        list <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> first :: second :: rest =&gt; println(first + <span class="string">"-"</span> +</span><br><span class="line">            second + <span class="string">"-"</span> + rest)</span><br><span class="line">            <span class="keyword">case</span> _ =&gt; println(<span class="string">"something else"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-5-匹配元组"><a href="#8-3-5-匹配元组" class="headerlink" title="8.3.5 匹配元组"></a>8.3.5 匹配元组</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchTuple</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//对一个元组集合进行遍历</span></span><br><span class="line">        <span class="keyword">for</span> (tuple &lt;- <span class="type">Array</span>((<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>))) &#123;</span><br><span class="line">          	<span class="keyword">val</span> result = tuple <span class="keyword">match</span> &#123;</span><br><span class="line">                <span class="keyword">case</span> (<span class="number">0</span>, _) =&gt; <span class="string">"0 ..."</span> <span class="comment">//是第一个元素是 0 的元组</span></span><br><span class="line">                <span class="keyword">case</span> (y, <span class="number">0</span>) =&gt; <span class="string">""</span> + y + <span class="string">"0"</span> <span class="comment">// 匹配后一个元素是 0 的对偶元组</span></span><br><span class="line">                <span class="keyword">case</span> (a, b) =&gt; <span class="string">""</span> + a + <span class="string">" "</span> + b</span><br><span class="line">                <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span> <span class="comment">//默认</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(result)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>扩展案例</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 特殊的模式匹配 1 打印元组第一个元素</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- <span class="type">Array</span>((<span class="string">"a"</span>, <span class="number">1</span>), (<span class="string">"b"</span>, <span class="number">2</span>), (<span class="string">"c"</span>, <span class="number">3</span>))) &#123;</span><br><span class="line">        println(elem._1)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ((word,count) &lt;- <span class="type">Array</span>((<span class="string">"a"</span>, <span class="number">1</span>), (<span class="string">"b"</span>, <span class="number">2</span>), (<span class="string">"c"</span>, <span class="number">3</span>))) &#123;</span><br><span class="line">        println(word)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ((word,_) &lt;- <span class="type">Array</span>((<span class="string">"a"</span>, <span class="number">1</span>), (<span class="string">"b"</span>, <span class="number">2</span>), (<span class="string">"c"</span>, <span class="number">3</span>))) &#123;</span><br><span class="line">        println(word)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ((<span class="string">"a"</span>,count) &lt;- <span class="type">Array</span>((<span class="string">"a"</span>, <span class="number">1</span>), (<span class="string">"b"</span>, <span class="number">2</span>), (<span class="string">"c"</span>, <span class="number">3</span>))) &#123;</span><br><span class="line">        println(count)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"--------------"</span>)</span><br><span class="line">    <span class="comment">// 特殊的模式匹配 2 给元组元素命名</span></span><br><span class="line">    <span class="keyword">var</span> (id,name,age): (<span class="type">Int</span>, <span class="type">String</span>, <span class="type">Int</span>) = (<span class="number">100</span>, <span class="string">"zs"</span>, <span class="number">20</span>)</span><br><span class="line">    println((id,name,age))</span><br><span class="line">    println(<span class="string">"--------------"</span>)</span><br><span class="line">    <span class="comment">// 特殊的模式匹配 3 遍历集合中的元组，给 count * 2</span></span><br><span class="line">    <span class="keyword">var</span> list: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = <span class="type">List</span>((<span class="string">"a"</span>, <span class="number">1</span>), (<span class="string">"b"</span>, <span class="number">2</span>), (<span class="string">"c"</span>, <span class="number">3</span>))</span><br><span class="line">    <span class="comment">// println(list.map(t =&gt; (t._1, t._2 * 2)))</span></span><br><span class="line">    println(</span><br><span class="line">        list.map&#123;</span><br><span class="line">            <span class="keyword">case</span> (word,count)=&gt;(word,count*<span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">var</span> list1 = <span class="type">List</span>((<span class="string">"a"</span>, (<span class="string">"a"</span>, <span class="number">1</span>)), (<span class="string">"b"</span>, (<span class="string">"b"</span>, <span class="number">2</span>)), (<span class="string">"c"</span>, (<span class="string">"c"</span>, <span class="number">3</span>)))</span><br><span class="line">    println(</span><br><span class="line">        list1.map&#123;</span><br><span class="line">        	<span class="keyword">case</span> (groupkey,(word,count))=&gt;(word,count*<span class="number">2</span>)</span><br><span class="line">    	&#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter08</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test02_MatchTypes</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 匹配常量</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">describeConst</span></span>(x: <span class="type">Any</span>): <span class="type">String</span> = x <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="string">"Int one"</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">"hello"</span> =&gt; <span class="string">"String hello"</span></span><br><span class="line">      <span class="keyword">case</span> <span class="literal">true</span> =&gt; <span class="string">"Boolean true"</span></span><br><span class="line">      <span class="keyword">case</span> '+' =&gt; <span class="string">"Char +"</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="string">"0.3"</span> <span class="comment">// 不加这个兜底的匹配，如果传入的参数没有匹配到，则会报错,也可以写成 case a =&gt; "0.3" + a</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(describeConst(<span class="string">"hello"</span>))</span><br><span class="line">    println(describeConst('+'))</span><br><span class="line">    println(describeConst(<span class="number">0.3</span>))</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 2. 匹配类型</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">describeType</span></span>(x: <span class="type">Any</span>): <span class="type">String</span> = x <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> i: <span class="type">Int</span> =&gt; <span class="string">"Int "</span> + i</span><br><span class="line">      <span class="keyword">case</span> s: <span class="type">String</span> =&gt; <span class="string">"String "</span> + s</span><br><span class="line">      <span class="keyword">case</span> list: <span class="type">List</span>[<span class="type">String</span>] =&gt; <span class="string">"List "</span> + list</span><br><span class="line">      <span class="keyword">case</span> array: <span class="type">Array</span>[<span class="type">Int</span>] =&gt; <span class="string">"Array[Int] "</span> + array.mkString(<span class="string">","</span>)</span><br><span class="line">      <span class="keyword">case</span> a =&gt; <span class="string">"Something else: "</span> + a</span><br><span class="line">    &#125;</span><br><span class="line">    println(describeType(<span class="number">35</span>))</span><br><span class="line">    println(describeType(<span class="string">"hello"</span>))</span><br><span class="line">    println(describeType(<span class="type">List</span>(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>)))</span><br><span class="line">    println(describeType(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>))) <span class="comment">// 这里存在泛型擦除</span></span><br><span class="line">    println(describeType(<span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)))</span><br><span class="line">    println(describeType(<span class="type">Array</span>(<span class="string">"1"</span>, <span class="string">"2"</span>))) <span class="comment">// 这里不存在泛型擦除，因为Array非常底层，可以直接判断出数据类型和泛型</span></span><br><span class="line">    println(describeType(<span class="literal">true</span>))</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 3. 匹配数组</span></span><br><span class="line">    <span class="keyword">for</span> (arr &lt;- <span class="type">List</span>(</span><br><span class="line">      <span class="type">Array</span>(<span class="number">0</span>),</span><br><span class="line">      <span class="type">Array</span>(<span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">      <span class="type">Array</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">      <span class="type">Array</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">      <span class="type">Array</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">15</span>),</span><br><span class="line">      <span class="type">Array</span>(<span class="string">"hello"</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">    )) &#123;</span><br><span class="line">      <span class="keyword">val</span> result = arr <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>) =&gt; <span class="string">"0"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">1</span>, <span class="number">0</span>) =&gt; <span class="string">"Array(1, 0)"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Array</span>(x, y) =&gt; <span class="string">"Array: "</span> + x + <span class="string">","</span> + y <span class="comment">// 匹配两元素数组</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>, _*) =&gt; <span class="string">"以0开头的数组"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">Array</span>(x, <span class="number">1</span>, z) =&gt; <span class="string">"中间为1的三元素数组"</span></span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span></span><br><span class="line">      &#125;</span><br><span class="line">      println(result)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 4. 匹配列表</span></span><br><span class="line">    <span class="comment">// 方式一</span></span><br><span class="line">    <span class="keyword">for</span> (list &lt;- <span class="type">List</span>(</span><br><span class="line">      <span class="type">List</span>(<span class="number">0</span>),</span><br><span class="line">      <span class="type">List</span>(<span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">      <span class="type">List</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">      <span class="type">List</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">      <span class="type">List</span>(<span class="number">88</span>),</span><br><span class="line">      <span class="type">List</span>(<span class="string">"hello"</span>),</span><br><span class="line">    )) &#123;</span><br><span class="line">      <span class="keyword">val</span> result = list <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(<span class="number">0</span>) =&gt; <span class="string">"0"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(x, y) =&gt; <span class="string">"List(x, y): "</span> + x + <span class="string">","</span> + y</span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(<span class="number">0</span>, _*) =&gt; <span class="string">"List(0, ...)"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(a) =&gt; <span class="string">"List(a): "</span> + a</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span></span><br><span class="line">      &#125;</span><br><span class="line">      println(result)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 方式二</span></span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">24</span>)</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="number">24</span>)</span><br><span class="line">    list <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> first :: second :: rest =&gt; println(<span class="string">s"first: <span class="subst">$first</span>, second: <span class="subst">$second</span>, rest: <span class="subst">$rest</span>"</span>)</span><br><span class="line">      <span class="keyword">case</span> _ =&gt; println(<span class="string">"something else"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(<span class="string">"========================"</span>)</span><br><span class="line">    <span class="comment">// 5. 匹配元组</span></span><br><span class="line">    <span class="keyword">for</span> (tuple &lt;- <span class="type">List</span>(</span><br><span class="line">      (<span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">      (<span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">      (<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),</span><br><span class="line">      (<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>),</span><br><span class="line">      (<span class="number">1</span>, <span class="number">23</span>, <span class="number">56</span>),</span><br><span class="line">      (<span class="string">"hello"</span>, <span class="literal">true</span>, <span class="number">0.5</span>),</span><br><span class="line">    )) &#123;</span><br><span class="line">      <span class="keyword">val</span> result = tuple <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> (a, b) =&gt; <span class="string">""</span> + a + <span class="string">","</span> + b</span><br><span class="line">        <span class="keyword">case</span> (<span class="number">0</span>, _) =&gt; <span class="string">"(0, _)"</span></span><br><span class="line">        <span class="keyword">case</span> (a, <span class="number">1</span>, _) =&gt; <span class="string">"(a, 1, _) "</span> + a</span><br><span class="line">        <span class="keyword">case</span> (x, y, z) =&gt; <span class="string">"(x, y, z) "</span> + <span class="string">"x"</span> +<span class="string">","</span> + y +<span class="string">","</span> + z</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"something else"</span></span><br><span class="line">      &#125;</span><br><span class="line">      println(result)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-6-匹配对象及样例类"><a href="#8-3-6-匹配对象及样例类" class="headerlink" title="8.3.6 匹配对象及样例类"></a>8.3.6 匹配对象及样例类</h3><p>1）基本语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class">    <span class="title">object</span> <span class="title">User</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">User</span> = <span class="keyword">new</span> <span class="type">User</span>(name, age)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(user: <span class="type">User</span>): <span class="type">Option</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = &#123;</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>)</span><br><span class="line">            <span class="type">None</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="type">Some</span>(user.name, user.age)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">object</span> <span class="title">TestMatchUnapply</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> user: <span class="type">User</span> = <span class="type">User</span>(<span class="string">"zhangsan"</span>, <span class="number">11</span>)</span><br><span class="line">        <span class="keyword">val</span> result = user <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="type">User</span>(<span class="string">"zhangsan"</span>, <span class="number">11</span>) =&gt; <span class="string">"yes"</span></span><br><span class="line">            <span class="keyword">case</span> _ =&gt; <span class="string">"no"</span></span><br><span class="line">    	&#125;</span><br><span class="line">    	println(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>小结</strong>  </p>
<ul>
<li>val user = User(“zhangsan”,11)，该语句在执行时，实际调用的是 User 伴生对象中的apply 方法，因此不用 new 关键字就能构造出相应的对象。</li>
<li>当将 User(“zhangsan”, 11)写在 case 后时[case User(“zhangsan”, 11) =&gt; “yes”]，会默认调用 unapply 方法(对象提取器)， user 作为 unapply 方法的参数， unapply 方法将 user 对象的 name 和 age 属性提取出来，与 User(“zhangsan”, 11)中的属性值进行匹配</li>
<li>case 中对象的 unapply 方法(提取器)返回 Some，且所有属性均一致，才算匹配成功,属性不一致，或返回 None，则匹配失败。</li>
<li>若只提取对象的一个属性，则提取器为 unapply(obj:Obj):Option[T]<br>若提取对象的多个属性，则提取器为 unapply(obj:Obj):Option[(T1,T2,T3…)]<br>若提取对象的可变个属性，则提取器为 unapplySeq(obj:Obj):Option[Seq[T]]  </li>
</ul>
<p>2）样例类  </p>
<p>（1）语法：  </p>
<p>case class Person (name: String, age: Int)  </p>
<p>（2）说明  </p>
<ol>
<li>样例类仍然是类，和普通类相比，只是其自动生成了伴生对象，并且伴生对象中自动提供了一些常用的方法，如 apply、 unapply、 toString、 equals、 hashCode 和 copy。  </li>
<li>样例类是为模式匹配而优化的类，因为其默认提供了 unapply 方法，因此，样例类可以直接使用模式匹配，而无需自己实现 unapply 方法。  </li>
<li>构造器中的每一个参数都成为 val，除非它被显式地声明为 var（不建议这样做）  </li>
</ol>
<p>3）实操  </p>
<p>上述匹配对象的案例使用样例类会节省大量代码</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">object</span> <span class="title">TestMatchUnapply</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> user: <span class="type">User</span> = <span class="type">User</span>(<span class="string">"zhangsan"</span>, <span class="number">11</span>)</span><br><span class="line">        <span class="keyword">val</span> result = user <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">User</span>(<span class="string">"zhangsan"</span>, <span class="number">11</span>) =&gt; <span class="string">"yes"</span></span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"no"</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(result)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter08</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test04_MatchObject</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student</span>(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    <span class="comment">// 针对对象实例的内容进行匹配</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> result = student <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Student</span>(<span class="string">"alice"</span>, <span class="number">18</span>) =&gt; <span class="string">"Alice, 18"</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="string">"Else"</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(result) <span class="comment">// 上面这种方式过于复杂</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">val name: <span class="type">String</span>, val age: <span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">//</span> <span class="title">定义伴生对象</span></span></span><br><span class="line"><span class="class"><span class="title">object</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">Student</span> = <span class="keyword">new</span> <span class="type">Student</span>(name, age)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 必须实现一个unapply方法，用来对对象属性进行拆解</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(student: <span class="type">Student</span>): <span class="type">Option</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = &#123;</span><br><span class="line">    <span class="keyword">if</span> (student == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="type">None</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">Some</span>((student.name, student.age))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter08</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test05_MatchCaseClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="type">Student1</span>(<span class="string">"alice"</span>, <span class="number">18</span>)</span><br><span class="line">    <span class="keyword">val</span> result = student <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Student1</span>(<span class="string">"alice"</span>, <span class="number">18</span>) =&gt; <span class="string">"Alice, 18"</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="string">"Else"</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义样例类</span></span><br><span class="line"><span class="comment">// case class Student1(val name: String, val age: Int)</span></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Student1</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>) <span class="title">//</span> <span class="title">使用case定义样例类后，主构造器中的参数默认都是当前的属性，不需要定义，并且对应的伴生对象和apply、unapply方法全部自动生成</span></span></span><br></pre></td></tr></table></figure>

<h2 id="8-4-变量声明中的模式匹配"><a href="#8-4-变量声明中的模式匹配" class="headerlink" title="8.4 变量声明中的模式匹配"></a>8.4 变量声明中的模式匹配</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">object</span> <span class="title">TestMatchVariable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> (x, y) = (<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">        println(<span class="string">s"x=<span class="subst">$x</span>,y=<span class="subst">$y</span>"</span>)</span><br><span class="line">        <span class="keyword">val</span> <span class="type">Array</span>(first, second, _*) = <span class="type">Array</span>(<span class="number">1</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">9</span>)</span><br><span class="line">        println(<span class="string">s"first=<span class="subst">$first</span>,second=<span class="subst">$second</span>"</span>)</span><br><span class="line">        <span class="keyword">val</span> <span class="type">Person</span>(name, age) = <span class="type">Person1</span>(<span class="string">"zhangsan"</span>, <span class="number">16</span>)</span><br><span class="line">        println(<span class="string">s"name=<span class="subst">$name</span>,age=<span class="subst">$age</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-5-for-表达式中的模式匹配"><a href="#8-5-for-表达式中的模式匹配" class="headerlink" title="8.5 for 表达式中的模式匹配"></a>8.5 for 表达式中的模式匹配</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestMatchFor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="keyword">val</span> map = <span class="type">Map</span>(<span class="string">"A"</span> -&gt; <span class="number">1</span>, <span class="string">"B"</span> -&gt; <span class="number">0</span>, <span class="string">"C"</span> -&gt; <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">for</span> ((k, v) &lt;- map) &#123; <span class="comment">//直接将 map 中的 k-v 遍历出来</span></span><br><span class="line">        	println(k + <span class="string">" -&gt; "</span> + v) <span class="comment">//3 个</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(<span class="string">"----------------------"</span>)</span><br><span class="line">        <span class="comment">//遍历 value=0 的 k-v ,如果 v 不是 0,过滤</span></span><br><span class="line">        <span class="keyword">for</span> ((k, <span class="number">0</span>) &lt;- map) &#123;</span><br><span class="line">        	println(k + <span class="string">" --&gt; "</span> + <span class="number">0</span>) <span class="comment">// B-&gt;0</span></span><br><span class="line">        &#125;</span><br><span class="line">        println(<span class="string">"----------------------"</span>)</span><br><span class="line">        <span class="comment">//if v == 0 是一个过滤的条件</span></span><br><span class="line">        <span class="keyword">for</span> ((k, v) &lt;- map <span class="keyword">if</span> v &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        	println(k + <span class="string">" ---&gt; "</span> + v) <span class="comment">// A-&gt;1 和 c-&gt;33</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter08</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test03_MatchTupleExtend</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 元组或者集合类型做模式匹配一种情况就是可以在变量声明的时候直接匹配想当于同时做了赋值</span></span><br><span class="line">    <span class="comment">// 1. 在变量声明时匹配</span></span><br><span class="line">    <span class="keyword">val</span> (x, y) = (<span class="number">10</span>, <span class="string">"hello"</span>)</span><br><span class="line">    println(<span class="string">s"s x: <span class="subst">$x</span> ,y: <span class="subst">$y</span>"</span>)</span><br><span class="line">    <span class="keyword">val</span> <span class="type">List</span>(first, second, _*) = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    println(<span class="string">s"first: <span class="subst">$first</span> ,second: <span class="subst">$second</span>"</span>)</span><br><span class="line">    <span class="keyword">val</span> fir :: sec :: rest = <span class="type">List</span>(<span class="number">23</span>, <span class="number">15</span>, <span class="number">9</span>, <span class="number">78</span>)</span><br><span class="line">    println(<span class="string">s"fir: <span class="subst">$fir</span> ,sec: <span class="subst">$sec</span> ,rest: <span class="subst">$rest</span>"</span>)</span><br><span class="line">    println(<span class="string">"============================="</span>)</span><br><span class="line">    <span class="comment">// 2. for推导式中进行模式匹配</span></span><br><span class="line">    <span class="keyword">val</span> list: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = <span class="type">List</span>((<span class="string">"a"</span>, <span class="number">12</span>), (<span class="string">"b"</span>, <span class="number">35</span>), (<span class="string">"c"</span>, <span class="number">27</span>), (<span class="string">"a"</span>, <span class="number">13</span>))</span><br><span class="line">    <span class="comment">// 2.1 原本的遍历方式</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- list) println(elem._1 + <span class="string">" "</span> + elem._2)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2.2 将List的元素直接定义为元组，对变量赋值</span></span><br><span class="line">    <span class="keyword">for</span> ((word, count) &lt;- list) println(word + <span class="string">" "</span> + count)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2.3 可以不考虑某个位置的变量，只比那里key或者value</span></span><br><span class="line">    <span class="keyword">for</span> ((word, _) &lt;- list) println(word)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2.4 可以指定某个位置的值必须是多少</span></span><br><span class="line">    <span class="keyword">for</span> ((<span class="string">"a"</span>, count) &lt;- list) println(count)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-6-偏函数中的模式匹配-了解"><a href="#8-6-偏函数中的模式匹配-了解" class="headerlink" title="8.6 偏函数中的模式匹配(了解)"></a>8.6 偏函数中的模式匹配(了解)</h2><p>偏函数也是函数的一种，通过偏函数我们可以方便的对输入参数做更精确的检查。例如该偏函数的输入类型为 List[Int]，而我们需要的是第一个元素是 0 的集合，这就是通过模式匹配实现的。  </p>
<p>1） 偏函数定义  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> second: <span class="type">PartialFunction</span>[<span class="type">List</span>[<span class="type">Int</span>], <span class="type">Option</span>[<span class="type">Int</span>]] = &#123;</span><br><span class="line">	<span class="keyword">case</span> x :: y :: _ =&gt; <span class="type">Some</span>(y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616102350845.png" alt="image-20230616102350845"></p>
<p>注：该偏函数的功能是返回输入的 List 集合的第二个元素  </p>
<p>2）偏函数原理  </p>
<p>上述代码会被 scala 编译器翻译成以下代码，与普通函数相比，只是多了一个用于参数检查的函数——isDefinedAt，其返回值类型为 Boolean。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> second = <span class="keyword">new</span> <span class="type">PartialFunction</span>[<span class="type">List</span>[<span class="type">Int</span>], <span class="type">Option</span>[<span class="type">Int</span>]] &#123;</span><br><span class="line">    <span class="comment">//检查输入参数是否合格</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">isDefinedAt</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">Boolean</span> = list <span class="keyword">match</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> x :: y :: _ =&gt; <span class="literal">true</span></span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//执行函数逻辑</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">Option</span>[<span class="type">Int</span>] = list <span class="keyword">match</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> x :: y :: _ =&gt; <span class="type">Some</span>(y)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3）偏函数使用  </p>
<p>偏函数不能像 second(List(1,2,3))这样直接使用，因为这样会直接调用 apply 方法，而应该调用 applyOrElse 方法，如下  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">second.applyOrElse(<span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>), (_: <span class="type">List</span>[<span class="type">Int</span>]) =&gt; <span class="type">None</span>)</span><br></pre></td></tr></table></figure>

<p>applyOrElse 方法的逻辑为 if (ifDefinedAt(list)) apply(list) else default。如果输入参数满足条件，即 isDefinedAt 返回 true，则执行 apply 方法，否则执行 defalut 方法， default 方法为参数不满足要求的处理逻辑。</p>
<p>4） 案例实操  </p>
<p>（1）需求</p>
<p>将该 List(1,2,3,4,5,6,”test”)中的 Int 类型的元素加一，并去掉字符串  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="string">"test"</span>)</span><br><span class="line">    <span class="keyword">val</span> list1 = list.map &#123;</span><br><span class="line">    a =&gt;</span><br><span class="line">        a <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> i: <span class="type">Int</span> =&gt; i + <span class="number">1</span></span><br><span class="line">            <span class="keyword">case</span> s: <span class="type">String</span> =&gt;s + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    println(list1.filter(a=&gt;a.isInstanceOf[<span class="type">Int</span>]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）实操  </p>
<p>方法一：  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="string">"test"</span>).filter(_.isInstanceOf[<span class="type">Int</span>]).map(_.asInstanceOf[<span class="type">Int</span>] + <span class="number">1</span>).foreach(println)</span><br></pre></td></tr></table></figure>

<p>方法二：  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="string">"test"</span>).collect &#123; <span class="keyword">case</span> x: <span class="type">Int</span> =&gt; x + <span class="number">1</span> &#125;.foreach(println)</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter08</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test06_PartialFunction</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list: <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = <span class="type">List</span>((<span class="string">"a"</span>, <span class="number">12</span>), (<span class="string">"b"</span>, <span class="number">35</span>), (<span class="string">"c"</span>, <span class="number">27</span>), (<span class="string">"a"</span>, <span class="number">13</span>))</span><br><span class="line">    <span class="comment">// 1. map转换，实现key不变，value变成2倍</span></span><br><span class="line">    <span class="keyword">val</span> newList = list.map(tuple =&gt; (tuple._1, tuple._2 * <span class="number">2</span>))</span><br><span class="line">    println(newList)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2. 用模式匹配对元组元素赋值，实现功能</span></span><br><span class="line">    <span class="keyword">val</span> newList2 = list.map(</span><br><span class="line">      tuple =&gt; &#123;</span><br><span class="line">        tuple <span class="keyword">match</span> &#123;</span><br><span class="line">          <span class="keyword">case</span> (word, count) =&gt; (word, count * <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    println(newList2)</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 3. 省略lambda表达式的写法，进行简化（偏函数）</span></span><br><span class="line">    <span class="keyword">val</span> newList3 = list.map &#123;</span><br><span class="line">      <span class="keyword">case</span> (word, count) =&gt; (word, count * <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    println(newList3)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 偏函数的应用，求绝对值</span></span><br><span class="line">    <span class="comment">// 对输入数据分为不同的情形：正、负、0</span></span><br><span class="line">    <span class="keyword">val</span> positiveAbc: <span class="type">PartialFunction</span>[<span class="type">Int</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">      <span class="keyword">case</span> x <span class="keyword">if</span> x &gt;= <span class="number">0</span> =&gt; x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> negativeAbc: <span class="type">PartialFunction</span>[<span class="type">Int</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">      <span class="keyword">case</span> x <span class="keyword">if</span> x &lt; <span class="number">0</span> =&gt; -x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">val</span> zeroAbc: <span class="type">PartialFunction</span>[<span class="type">Int</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">abs</span></span>(x: <span class="type">Int</span>): <span class="type">Int</span> = (positiveAbc orElse negativeAbc orElse zeroAbc) (x)</span><br><span class="line"></span><br><span class="line">    println(abs(<span class="number">-67</span>))</span><br><span class="line">    println(abs(<span class="number">81</span>))</span><br><span class="line">    println(abs(<span class="number">0</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-9-章-异常"><a href="#第-9-章-异常" class="headerlink" title="第 9 章 异常"></a>第 9 章 异常</h1><p>语法处理上和 Java 类似，但是又不尽相同。  </p>
<h2 id="9-1-Java-异常处理"><a href="#9-1-Java-异常处理" class="headerlink" title="9.1 Java 异常处理"></a>9.1 Java 异常处理</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ExceptionDemo</span> </span>&#123;</span><br><span class="line">    public static void main(<span class="type">String</span>[] args) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            int a = <span class="number">10</span>;</span><br><span class="line">            int b = <span class="number">0</span>;</span><br><span class="line">            int c = a / b;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (<span class="type">ArithmeticException</span> e)&#123;</span><br><span class="line">            <span class="comment">// catch 时，需要将范围小的写到前面</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (<span class="type">Exception</span> e)&#123;</span><br><span class="line">        	e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="type">System</span>.out.println(<span class="string">"finally"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意事项  </p>
<p>（1） Java 语言按照 try—catch—finally 的方式来处理异常<br>（2）不管有没有异常捕获，都会执行 finally，因此通常可以在 finally 代码块中释放资源。<br>（3）可以有多个 catch，分别捕获对应的异常，这时需要把范围小的异常类写在前面，把范围大的异常类写在后面，否则编译错误。  </p>
<h2 id="9-2-Scala-异常处理"><a href="#9-2-Scala-异常处理" class="headerlink" title="9.2 Scala 异常处理"></a>9.2 Scala 异常处理</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    	<span class="keyword">var</span> n= <span class="number">10</span> / <span class="number">0</span></span><br><span class="line">    &#125;<span class="keyword">catch</span> &#123;</span><br><span class="line">    	<span class="keyword">case</span> ex: <span class="type">ArithmeticException</span>=&gt;&#123;</span><br><span class="line">    		<span class="comment">// 发生算术异常</span></span><br><span class="line">    		println(<span class="string">"发生算术异常"</span>)</span><br><span class="line">    	&#125;</span><br><span class="line">        <span class="keyword">case</span> ex: <span class="type">Exception</span>=&gt;&#123;</span><br><span class="line">            <span class="comment">// 对异常处理</span></span><br><span class="line">            println(<span class="string">"发生了异常 1"</span>)</span><br><span class="line">            println(<span class="string">"发生了异常 2"</span>)</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">    	println(<span class="string">"finally"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1）我们将可疑代码封装在 try 块中。在 try 块之后使用了一个 catch 处理程序来捕获异常。如果发生任何异常， catch 处理程序将处理它，程序将不会异常终止。<br>2） Scala 的异常的工作机制和 Java 一样，但是 Scala 没有“checked（编译期）”异常，即 Scala 没有编译异常这个概念，异常都是在运行的时候捕获处理。<br>3）异常捕捉的机制与其他语言中一样，如果有异常发生， catch 子句是按次序捕捉的。因此，在 catch 子句中，越具体的异常越要靠前，越普遍的异常越靠后，如果把越普遍的异常写在前，把具体的异常写在后，在 Scala 中也不会报错，但这样是非常不好的编程风格。<br>4） finally 子句用于执行不管是正常处理还是有异常发生时都需要执行的步骤，一般用于对象的清理工作，这点和 Java 一样。<br>5）用 throw 关键字，抛出一个异常对象。所有异常都是 Throwable 的子类型。 throw 表达式是有类型的，就是 Nothing，因为 Nothing 是所有类型的子类型，所以 throw 表达式可以用在需要类型的地方  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span></span>():<span class="type">Nothing</span> = &#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">Exception</span>(<span class="string">"不对"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6） java 提供了 throws 关键字来声明异常。可以使用方法定义声明异常。它向调用者函数提供了此方法可能引发此异常的信息。 它有助于调用函数处理并将该代码包含在 try-catch块中，以避免程序异常终止。在 Scala 中，可以使用 throws 注解来声明异常  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">	f11()</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@throws</span>(classOf[<span class="type">NumberFormatException</span>])</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f11</span></span>()=&#123;</span><br><span class="line">	<span class="string">"abc"</span>.toInt</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter09plus</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test01_Exception</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">val</span> n = <span class="number">10</span> / <span class="number">0</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> e: <span class="type">ArithmeticException</span> =&gt; println(<span class="string">"发生算数异常"</span>) <span class="comment">// 模式匹配</span></span><br><span class="line">      <span class="keyword">case</span> e: <span class="type">Exception</span> =&gt; println(<span class="string">"发生一般异常"</span>)</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      println(<span class="string">"处理结束"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-10-章-隐式转换"><a href="#第-10-章-隐式转换" class="headerlink" title="第 10 章 隐式转换"></a>第 10 章 隐式转换</h1><p>当编译器第一次编译失败的时候，会在当前的环境中查找能让代码编译通过的方法，用于将类型进行转换，实现二次编译  </p>
<h2 id="10-1-隐式函数"><a href="#10-1-隐式函数" class="headerlink" title="10.1 隐式函数"></a>10.1 隐式函数</h2><p>1）说明  </p>
<p>隐式转换可以在不需改任何代码的情况下，扩展某个类的功能。  </p>
<p>2）案例实操  </p>
<p>需求：通过隐式转化为 Int 类型增加方法。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRichInt</span>(<span class="params">val self: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myMax</span></span>(i: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    	<span class="keyword">if</span> (self &lt; i) i <span class="keyword">else</span> self</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myMin</span></span>(i: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    	<span class="keyword">if</span> (self &lt; i) self <span class="keyword">else</span> i</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestImplicitFunction</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 使用 implicit 关键字声明的函数称之为隐式函数</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">convert</span></span>(arg: <span class="type">Int</span>): <span class="type">MyRichInt</span> = &#123;</span><br><span class="line">    	<span class="keyword">new</span> <span class="type">MyRichInt</span>(arg)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">// 当想调用对象功能时，如果编译错误，那么编译器会尝试在当前作用域范围内查找能调用对应功能的转换规则，这个调用过程是由编译器完成的，所以称之为隐式转换。也称之为自动转换</span></span><br><span class="line">        println(<span class="number">2.</span>myMax(<span class="number">6</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-2-隐式参数"><a href="#10-2-隐式参数" class="headerlink" title="10.2 隐式参数"></a>10.2 隐式参数</h2><p>普通方法或者函数中的参数可以通过 implicit 关键字声明为隐式参数，调用该方法时，就可以传入该参数，编译器会在相应的作用域寻找符合条件的隐式值。  </p>
<p>1）说明<br>（1）同一个作用域中，相同类型的隐式值只能有一个<br>（2）编译器按照隐式参数的类型去寻找对应类型的隐式值，与隐式值的名称无关。<br>（3）隐式参数优先于默认参数  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestImplicitParameter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> str: <span class="type">String</span> = <span class="string">"hello world!"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>(<span class="keyword">implicit</span> arg: <span class="type">String</span>=<span class="string">"good bey world!"</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	println(arg)</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	hello</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-3-隐式类"><a href="#10-3-隐式类" class="headerlink" title="10.3 隐式类"></a>10.3 隐式类</h2><p>在 Scala2.10 后提供了隐式类，可以使用 implicit 声明类，隐式类的非常强大，同样可以扩展类的功能，在集合中隐式类会发挥重要的作用。  </p>
<p>1）隐式类说明  </p>
<p>（1）其所带的构造参数有且只能有一个<br>（2）隐式类必须被定义在“类”或“伴生对象”或“包对象”里，即隐式类不能是顶级的。</p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestImplicitClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">implicit</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRichInt</span>(<span class="params">arg: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">myMax</span></span>(i: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">        	<span class="keyword">if</span> (arg &lt; i) i <span class="keyword">else</span> arg</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">myMin</span></span>(i: <span class="type">Int</span>) = &#123;</span><br><span class="line">        	<span class="keyword">if</span> (arg &lt; i) arg <span class="keyword">else</span> i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        println(<span class="number">1.</span>myMax(<span class="number">3</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-4-隐式解析机制"><a href="#10-4-隐式解析机制" class="headerlink" title="10.4 隐式解析机制"></a>10.4 隐式解析机制</h2><p>1） 说明  </p>
<p>（1）首先会在当前代码作用域下查找隐式实体（隐式方法、隐式类、隐式对象）。（一般是这种情况）<br>（2）如果第一条规则查找隐式实体失败，会继续在隐式参数的类型的作用域里查找。类型的作用域是指与该类型相关联的全部伴生对象以及该类型所在包的包对象。  </p>
<p>2） 案例实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.chapter10</span><br><span class="line"><span class="keyword">import</span> com.atguigu.chapter10.<span class="type">Scala05_Transform4</span>.<span class="type">Teacher</span></span><br><span class="line"><span class="comment">//（2）如果第一条规则查找隐式实体失败，会继续在隐式参数的类型的作用域里查找。类型的作用域是指与该类型相关联的全部伴生模块，</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestTransform</span> <span class="keyword">extends</span> <span class="title">PersonTrait</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//（1）首先会在当前代码作用域下查找隐式实体</span></span><br><span class="line">        <span class="keyword">val</span> teacher = <span class="keyword">new</span> <span class="type">Teacher</span>()</span><br><span class="line">        teacher.eat()</span><br><span class="line">        teacher.say()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">    	<span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(<span class="string">"eat..."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">PersonTrait</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PersonTrait</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 隐式类 : 类型 1 =&gt; 类型 2</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="class"><span class="keyword">class</span> <span class="title">Person5</span>(<span class="params">user:<span class="type">Teacher</span></span>) </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">        	println(<span class="string">"say..."</span>)</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter09plus</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test02_Implicit</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> new12 = <span class="keyword">new</span> <span class="type">MyRichInt</span>(<span class="number">12</span>)</span><br><span class="line">    println(new12.myMax(<span class="number">15</span>))</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 1. 隐氏函数</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">convert</span></span>(num: <span class="type">Int</span>): <span class="type">MyRichInt</span> = <span class="keyword">new</span> <span class="type">MyRichInt</span>(num)</span><br><span class="line"></span><br><span class="line">    println(<span class="number">12.</span>myMax(<span class="number">15</span>))</span><br><span class="line"></span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 2. 隐氏类</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRichInt2</span>(<span class="params">val self: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 自定义比较大小的方法</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">myMax2</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = <span class="keyword">if</span> (n &lt; self) self <span class="keyword">else</span> n</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">myMin2</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = <span class="keyword">if</span> (n &lt; self) n <span class="keyword">else</span> self</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println(<span class="number">12.</span>myMin2(<span class="number">15</span>))</span><br><span class="line">    println(<span class="string">"==========================="</span>)</span><br><span class="line">    <span class="comment">// 3. 隐氏参数</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> str: <span class="type">String</span> = <span class="string">"alice"</span></span><br><span class="line">    <span class="comment">// implicit val str1: String = "alice" // 在同一作用域范围捏，只能有一个相同类型的隐氏参数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> num: <span class="type">Int</span> = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(name: <span class="type">String</span> = <span class="string">"alice"</span>): <span class="type">Unit</span> = println(<span class="string">s"hello <span class="subst">$name</span>"</span>)</span><br><span class="line"></span><br><span class="line">    sayHello()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// def sayHi()(implicit name: String): Unit = println(s"hi $name") // 隐氏参数底层用的是柯里化形式的表达</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHi</span></span>(<span class="keyword">implicit</span> name: <span class="type">String</span>): <span class="type">Unit</span> = println(<span class="string">s"hi <span class="subst">$name</span>"</span>) <span class="comment">// 这里省略了第一个小括号</span></span><br><span class="line"></span><br><span class="line">    sayHi <span class="comment">// 因为上面省略了小括号，所以这里调用就不能带小括号了</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHi1</span></span>(<span class="keyword">implicit</span> name: <span class="type">String</span> = <span class="string">"atguigu"</span>): <span class="type">Unit</span> = println(<span class="string">s"hi1 <span class="subst">$name</span>"</span>)</span><br><span class="line"></span><br><span class="line">    sayHi1 <span class="comment">// 此刻隐氏值会覆盖默认值，隐氏值优先级更高</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 简便写法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hiAge</span></span>(): <span class="type">Unit</span> = println(<span class="string">s"hi "</span> + implicitly[<span class="type">Int</span>]) <span class="comment">// 调用了一个定义好的函数，找到作用域内相同类型的隐氏参数</span></span><br><span class="line"></span><br><span class="line">    hiAge</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRichInt</span>(<span class="params">val self: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 自定义比较大小的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">myMax</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = <span class="keyword">if</span> (n &lt; self) self <span class="keyword">else</span> n</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">myMin</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = <span class="keyword">if</span> (n &lt; self) n <span class="keyword">else</span> self</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-11-章-泛型"><a href="#第-11-章-泛型" class="headerlink" title="第 11 章 泛型"></a>第 11 章 泛型</h1><h2 id="11-1-协变和逆变"><a href="#11-1-协变和逆变" class="headerlink" title="11.1 协变和逆变"></a>11.1 协变和逆变</h2><p>1）语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span>[+<span class="type">T</span>]</span>&#123; <span class="comment">//协变</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span>[-<span class="type">T</span>]</span>&#123; <span class="comment">//逆变</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span>[<span class="type">T</span>] <span class="title">//不变</span></span></span><br></pre></td></tr></table></figure>

<p>2）说明  </p>
<p>协变：Son 是 Father 的子类，则 MyList[Son] 也作为 MyList[Father]的“子类” 。<br>逆变：Son 是 Father 的子类，则 MyList[Son]作为 MyList[Father]的“父类” 。<br>不变：Son 是 Father 的子类，则 MyList[Father]与 MyList[Son]“无父子关系” 。  </p>
<p>3）实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 泛型模板</span></span><br><span class="line"><span class="comment">//class MyList&lt;T&gt;&#123;&#125;</span></span><br><span class="line"><span class="comment">// 不变</span></span><br><span class="line"><span class="comment">//class MyList[T]&#123;&#125;</span></span><br><span class="line"><span class="comment">// 协变</span></span><br><span class="line"><span class="comment">//class MyList[+T]&#123;&#125;</span></span><br><span class="line"><span class="comment">// 逆变</span></span><br><span class="line"><span class="comment">//class MyList[-T]&#123;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubChild</span> <span class="keyword">extends</span> <span class="title">Child</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Scala_TestGeneric</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    	<span class="comment">//var s:MyList[Child] = new MyList[SubChild]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-2-泛型上下限"><a href="#11-2-泛型上下限" class="headerlink" title="11.2 泛型上下限"></a>11.2 泛型上下限</h2><p>1）语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="type">PersonList</span>[<span class="type">T</span> &lt;: <span class="type">Person</span>]&#123; <span class="comment">//泛型上限</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Class</span> <span class="type">PersonList</span>[<span class="type">T</span> &gt;: <span class="type">Person</span>]&#123; <span class="comment">//泛型下限</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）说明  </p>
<p>泛型的上下限的作用是对传入的泛型进行限定。  </p>
<p>3）实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubChild</span> <span class="keyword">extends</span> <span class="title">Child</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Scala_TestGeneric</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">        <span class="comment">//test(classOf[SubChild])</span></span><br><span class="line">        <span class="comment">//test[Child](new SubChild)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//泛型通配符之上限</span></span><br><span class="line">    <span class="comment">//def test[A &lt;: Child](a:Class[A]): Unit =&#123;</span></span><br><span class="line">    	<span class="comment">//println(a)</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">//泛型通配符之下限</span></span><br><span class="line">    <span class="comment">//def test[A &gt;: Child](a:Class[A]): Unit =&#123;</span></span><br><span class="line">    	<span class="comment">//println(a)</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">//泛型通配符之下限 形式扩展</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>[<span class="type">A</span> &gt;: <span class="type">Child</span>](a:<span class="type">A</span>): <span class="type">Unit</span> =&#123;</span><br><span class="line">    	println(a.getClass.getName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-3-上下文限定"><a href="#11-3-上下文限定" class="headerlink" title="11.3 上下文限定"></a>11.3 上下文限定</h2><p>1）语法  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span></span>[<span class="type">A</span> : <span class="type">B</span>](a: <span class="type">A</span>) = println(a) <span class="comment">//等同于 def f[A](a:A)(implicit arg:B[A])=println(a)</span></span><br></pre></td></tr></table></figure>

<p>2）说明  </p>
<p>上下文限定是将泛型和隐式转换的结合产物，以下两者功能相同，使用上下文限定[A :Ordering]之后，方法内无法使用隐式参数名调用隐式参数，需要通过implicitly[Ordering[A]]获取隐式变量，如果此时无法查找到对应类型的隐式变量，会发生出错误。  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">implicit</span> <span class="keyword">val</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">val</span> y = implicitly[<span class="type">Int</span>]</span><br><span class="line"><span class="keyword">val</span> z = implicitly[<span class="type">Double</span>]</span><br></pre></td></tr></table></figure>

<p>3）实操  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span></span>[<span class="type">A</span>:<span class="type">Ordering</span>](a:<span class="type">A</span>,b:<span class="type">A</span>) =implicitly[<span class="type">Ordering</span>[<span class="type">A</span>]].compare(a,b)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span></span>[<span class="type">A</span>](a: <span class="type">A</span>, b: <span class="type">A</span>)(<span class="keyword">implicit</span> ord: <span class="type">Ordering</span>[<span class="type">A</span>]) = ord.compare(a, b)</span><br></pre></td></tr></table></figure>

<p>练习与测试</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> chapter09plus</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test03_Generics</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 1. 协变和逆变</span></span><br><span class="line">    <span class="keyword">val</span> child: <span class="type">Parent</span> = <span class="keyword">new</span> <span class="type">Child</span></span><br><span class="line">    <span class="keyword">val</span> childList: <span class="type">MyCollection</span>[<span class="type">Parent</span>] = <span class="keyword">new</span> <span class="type">MyCollection</span>[<span class="type">Child</span>]</span><br><span class="line">    <span class="keyword">val</span> childList1: <span class="type">MyCollection1</span>[<span class="type">SubChild</span>] = <span class="keyword">new</span> <span class="type">MyCollection1</span>[<span class="type">Child</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 上下限</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>[<span class="type">A</span> &lt;: <span class="type">Child</span>](a: <span class="type">A</span>): <span class="type">Unit</span> = println(a.getClass.getName)</span><br><span class="line">    <span class="comment">// test[Parent](new Child) // error</span></span><br><span class="line">    test[<span class="type">Child</span>](<span class="keyword">new</span> <span class="type">Child</span>)</span><br><span class="line">    test[<span class="type">Child</span>](<span class="keyword">new</span> <span class="type">SubChild</span>)</span><br><span class="line">    test[<span class="type">SubChild</span>](<span class="keyword">new</span> <span class="type">SubChild</span>)</span><br><span class="line">    <span class="comment">// test[SubChild](new Child) // error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义继承关系</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubChild</span> <span class="keyword">extends</span> <span class="title">Child</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义带泛型的集合类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCollection</span>[+<span class="type">E</span>] </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCollection1</span>[-<span class="type">E</span>] </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="第-12-章-总结"><a href="#第-12-章-总结" class="headerlink" title="第 12 章 总结"></a>第 12 章 总结</h1><h2 id="12-1-开发环境"><a href="#12-1-开发环境" class="headerlink" title="12.1 开发环境"></a>12.1 开发环境</h2><p>要求掌握必要的 Scala 开发环境搭建技能。  </p>
<h2 id="12-2-变量和数据类型"><a href="#12-2-变量和数据类型" class="headerlink" title="12.2 变量和数据类型"></a>12.2 变量和数据类型</h2><p>掌握 var 和 val 的区别  </p>
<p>掌握数值类型（Byte、 Short、 Int、 Long、 Float、 Double、 Char）之间的转换关系  </p>
<h2 id="12-3-流程控制"><a href="#12-3-流程控制" class="headerlink" title="12.3 流程控制"></a>12.3 流程控制</h2><p>掌握 if-else、 for、 while 等必要的流程控制结构，掌握如何实现 break、 continue 的功能。  </p>
<h2 id="12-4-函数式编程"><a href="#12-4-函数式编程" class="headerlink" title="12.4 函数式编程"></a>12.4 函数式编程</h2><p>掌握高阶函数、匿名函数、函数柯里化、闭包、函数参数以及函数至简原则。  </p>
<h2 id="12-5-面向对象"><a href="#12-5-面向对象" class="headerlink" title="12.5 面向对象"></a>12.5 面向对象</h2><p>掌握 Scala 与 Java 继承方面的区别、单例对象（伴生对象）、构造方法、特质的用法及功能。  </p>
<h2 id="12-6-集合"><a href="#12-6-集合" class="headerlink" title="12.6 集合"></a>12.6 集合</h2><p>掌握常用集合的使用、集合常用的计算函数。  </p>
<h2 id="12-7-模式匹配"><a href="#12-7-模式匹配" class="headerlink" title="12.7 模式匹配"></a>12.7 模式匹配</h2><p>掌握模式匹配的用法  </p>
<h2 id="12-8-下划线"><a href="#12-8-下划线" class="headerlink" title="12.8 下划线"></a>12.8 下划线</h2><p>掌握下划线不同场合的不同用法  </p>
<h2 id="12-9-异常"><a href="#12-9-异常" class="headerlink" title="12.9 异常"></a>12.9 异常</h2><p>掌握异常常用操作即可  </p>
<h2 id="12-10-隐式转换"><a href="#12-10-隐式转换" class="headerlink" title="12.10 隐式转换"></a>12.10 隐式转换</h2><p>掌握隐式方法、隐式参数、隐式类，以及隐式解析机制  </p>
<h2 id="12-11-泛型"><a href="#12-11-泛型" class="headerlink" title="12.11 泛型"></a>12.11 泛型</h2><p>掌握泛型语法  </p>
<h1 id="第-13-章-IDEA-快捷键"><a href="#第-13-章-IDEA-快捷键" class="headerlink" title="第 13 章 IDEA 快捷键"></a>第 13 章 IDEA 快捷键</h1><p>1）快速生成程序入口：main  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入 main-&gt;回车</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2）自动补全变量：.var  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入 1.var-&gt;回车</span></span><br><span class="line"><span class="keyword">val</span> i: <span class="type">Int</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>3）快速打印：.sout  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入 1.sout-&gt;回车</span></span><br><span class="line">println(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>4）快速生成 for 循环：遍历对象.for  </p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入 1 to 3.for</span></span><br><span class="line"><span class="keyword">for</span> (elem &lt;- <span class="number">1</span> to <span class="number">3</span>) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5）查看当前文件的结构：Ctrl + F12  </p>
<p>6）格式化当前代码：Ctrl + Shift + L  </p>
<p>7）自动为当前代码补全变量声明：Ctrl + Shift + V  </p>
<p>更多请查看截图： </p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616150912162.png" alt="image-20230616150912162"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616150942962.png" alt="image-20230616150942962"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616151016676.png" alt="image-20230616151016676"></p>
<p><img src="/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/image-20230616151116908.png" alt="image-20230616151116908"></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Rui Zhang
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yoursite.com/2022/08/12/Scala%E5%AD%A6%E4%B9%A0%E6%95%99%E7%A8%8B/" title="Scala学习教程">http://yoursite.com/2022/08/12/Scala学习教程/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Scala/" rel="tag"># Scala</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/08/11/Hadoop%E4%B9%8BHA%E9%AB%98%E5%8F%AF%E7%94%A8/" rel="prev" title="Hadoop之HA高可用">
      <i class="fa fa-chevron-left"></i> Hadoop之HA高可用
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/08/30/%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E3%80%81%E8%A1%A5%E7%A0%81%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/" rel="next" title="原码、反码、补码之间的关系">
      原码、反码、补码之间的关系 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#第-1-章-概述"><span class="nav-number">1.</span> <span class="nav-text">第 1 章 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-为什么学习Scala"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 为什么学习Scala</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Scala发展历史"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 Scala发展历史</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Scala和Java关系"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 Scala和Java关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-Scala语言特点"><span class="nav-number">1.4.</span> <span class="nav-text">1.4 Scala语言特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-环境搭建"><span class="nav-number">1.5.</span> <span class="nav-text">1.5 环境搭建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-HelloWord案例"><span class="nav-number">1.6.</span> <span class="nav-text">1.6 HelloWord案例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-7-class和object说明"><span class="nav-number">1.7.</span> <span class="nav-text">1.7 class和object说明</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-2-章-变量和数据类型"><span class="nav-number">2.</span> <span class="nav-text">第 2 章 变量和数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-注释"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-变量和常量（重点）"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 变量和常量（重点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-标识符的命名规范"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 标识符的命名规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-字符串输出"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 字符串输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-键盘输入"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 键盘输入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-读写文件"><span class="nav-number">2.6.</span> <span class="nav-text">2.6 读写文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-7-数据类型（重点）"><span class="nav-number">2.7.</span> <span class="nav-text">2.7 数据类型（重点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-8-整数类型（Byte、-Short、-Int、-Long）"><span class="nav-number">2.8.</span> <span class="nav-text">2.8 整数类型（Byte、 Short、 Int、 Long）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-9-浮点类型（Float、-Double）"><span class="nav-number">2.9.</span> <span class="nav-text">2.9 浮点类型（Float、 Double）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-10-字符类型（Char）"><span class="nav-number">2.10.</span> <span class="nav-text">2.10 字符类型（Char）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-11-Unit类型、Null类型和Nothing类型（重点）"><span class="nav-number">2.11.</span> <span class="nav-text">2.11 Unit类型、Null类型和Nothing类型（重点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-12-类型转换（重点）"><span class="nav-number">2.12.</span> <span class="nav-text">2.12 类型转换（重点）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-12-1-数值类型自动转换"><span class="nav-number">2.12.1.</span> <span class="nav-text">2.12.1 数值类型自动转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-12-2-强制类型转换"><span class="nav-number">2.12.2.</span> <span class="nav-text">2.12.2 强制类型转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-12-3-数值类型和-String-类型间转换"><span class="nav-number">2.12.3.</span> <span class="nav-text">2.12.3 数值类型和 String 类型间转换</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-3-章-运算符"><span class="nav-number">3.</span> <span class="nav-text">第 3 章 运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-算术运算符"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 算术运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-关系运算符（比较运算符）"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 关系运算符（比较运算符）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-逻辑运算符"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 逻辑运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-赋值运算符"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 赋值运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-位运算符"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 位运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-Scala-运算符本质"><span class="nav-number">3.6.</span> <span class="nav-text">3.6 Scala 运算符本质</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-4-章-流程控制"><span class="nav-number">4.</span> <span class="nav-text">第 4 章 流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-分支控制-if-else"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 分支控制 if-else</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1-单分支"><span class="nav-number">4.1.1.</span> <span class="nav-text">4.1.1 单分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2-双分支"><span class="nav-number">4.1.2.</span> <span class="nav-text">4.1.2 双分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3-多分支"><span class="nav-number">4.1.3.</span> <span class="nav-text">4.1.3 多分支</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-嵌套分支"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 嵌套分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Switch-分支结构"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 Switch 分支结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-For-循环控制"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 For 循环控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-1-范围数据循环（-To）"><span class="nav-number">4.4.1.</span> <span class="nav-text">4.4.1 范围数据循环（ To）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-2-范围数据循环（-Until）"><span class="nav-number">4.4.2.</span> <span class="nav-text">4.4.2 范围数据循环（ Until）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-3-循环守卫"><span class="nav-number">4.4.3.</span> <span class="nav-text">4.4.3 循环守卫</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-4-循环步长"><span class="nav-number">4.4.4.</span> <span class="nav-text">4.4.4 循环步长</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-5-嵌套循环"><span class="nav-number">4.4.5.</span> <span class="nav-text">4.4.5 嵌套循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-6-引入变量"><span class="nav-number">4.4.6.</span> <span class="nav-text">4.4.6 引入变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-7-循环返回值"><span class="nav-number">4.4.7.</span> <span class="nav-text">4.4.7 循环返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-8-倒序打印"><span class="nav-number">4.4.8.</span> <span class="nav-text">4.4.8 倒序打印</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-While-和-do-While-循环控制"><span class="nav-number">4.5.</span> <span class="nav-text">4.5 While 和 do..While 循环控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-1-While-循环控制"><span class="nav-number">4.5.1.</span> <span class="nav-text">4.5.1 While 循环控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-2-do-while-循环控制"><span class="nav-number">4.5.2.</span> <span class="nav-text">4.5.2 do..while 循环控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-6-循环中断"><span class="nav-number">4.6.</span> <span class="nav-text">4.6 循环中断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-7-多重循环"><span class="nav-number">4.7.</span> <span class="nav-text">4.7 多重循环</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-5-章-函数式编程"><span class="nav-number">5.</span> <span class="nav-text">第 5 章 函数式编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-函数基础"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 函数基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-1-函数基本语法"><span class="nav-number">5.1.1.</span> <span class="nav-text">5.1.1 函数基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-2-函数和方法的区别"><span class="nav-number">5.1.2.</span> <span class="nav-text">5.1.2 函数和方法的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-3-函数定义"><span class="nav-number">5.1.3.</span> <span class="nav-text">5.1.3 函数定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-4-函数参数"><span class="nav-number">5.1.4.</span> <span class="nav-text">5.1.4 函数参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-5-函数至简原则（重点）"><span class="nav-number">5.1.5.</span> <span class="nav-text">5.1.5 函数至简原则（重点）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-函数高级"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 函数高级</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-1-匿名函数"><span class="nav-number">5.2.1.</span> <span class="nav-text">5.2.1 匿名函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-2-高阶函数"><span class="nav-number">5.2.2.</span> <span class="nav-text">5.2.2 高阶函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-3-高阶函数案例"><span class="nav-number">5.2.3.</span> <span class="nav-text">5.2.3 高阶函数案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-4-函数柯里化-amp-闭包"><span class="nav-number">5.2.4.</span> <span class="nav-text">5.2.4 函数柯里化&amp;闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-5-递归"><span class="nav-number">5.2.5.</span> <span class="nav-text">5.2.5 递归</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-6-控制抽象"><span class="nav-number">5.2.6.</span> <span class="nav-text">5.2.6 控制抽象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-7-惰性加载"><span class="nav-number">5.2.7.</span> <span class="nav-text">5.2.7 惰性加载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-6-章-面向对象"><span class="nav-number">6.</span> <span class="nav-text">第 6 章 面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-Scala-包"><span class="nav-number">6.1.</span> <span class="nav-text">6.1 Scala 包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-1-包的命名"><span class="nav-number">6.1.1.</span> <span class="nav-text">6.1.1 包的命名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-2-包说明（包语句）"><span class="nav-number">6.1.2.</span> <span class="nav-text">6.1.2 包说明（包语句）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-3-包对象"><span class="nav-number">6.1.3.</span> <span class="nav-text">6.1.3 包对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-4-导包说明"><span class="nav-number">6.1.4.</span> <span class="nav-text">6.1.4 导包说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-5-封装"><span class="nav-number">6.1.5.</span> <span class="nav-text">6.1.5 封装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-6-访问权限"><span class="nav-number">6.1.6.</span> <span class="nav-text">6.1.6 访问权限</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-类和对象"><span class="nav-number">6.2.</span> <span class="nav-text">6.2 类和对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-1-定义类"><span class="nav-number">6.2.1.</span> <span class="nav-text">6.2.1 定义类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-2-属性"><span class="nav-number">6.2.2.</span> <span class="nav-text">6.2.2 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-3-方法"><span class="nav-number">6.2.3.</span> <span class="nav-text">6.2.3 方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-4-创建对象"><span class="nav-number">6.2.4.</span> <span class="nav-text">6.2.4 创建对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-5-构造器"><span class="nav-number">6.2.5.</span> <span class="nav-text">6.2.5 构造器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-6-构造器参数"><span class="nav-number">6.2.6.</span> <span class="nav-text">6.2.6 构造器参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-继承和多态"><span class="nav-number">6.3.</span> <span class="nav-text">6.3 继承和多态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-抽象类"><span class="nav-number">6.4.</span> <span class="nav-text">6.4 抽象类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-1-抽象属性和抽象方法"><span class="nav-number">6.4.1.</span> <span class="nav-text">6.4.1 抽象属性和抽象方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-2-匿名子类"><span class="nav-number">6.4.2.</span> <span class="nav-text">6.4.2 匿名子类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-单例对象（伴生对象）"><span class="nav-number">6.5.</span> <span class="nav-text">6.5 单例对象（伴生对象）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-5-1-单例对象语法"><span class="nav-number">6.5.1.</span> <span class="nav-text">6.5.1 单例对象语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-5-2-apply-方法"><span class="nav-number">6.5.2.</span> <span class="nav-text">6.5.2 apply 方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-特质（Trait）"><span class="nav-number">6.6.</span> <span class="nav-text">6.6 特质（Trait）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-1-特质声明"><span class="nav-number">6.6.1.</span> <span class="nav-text">6.6.1 特质声明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-2-特质基本语法"><span class="nav-number">6.6.2.</span> <span class="nav-text">6.6.2 特质基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-3-特质叠加"><span class="nav-number">6.6.3.</span> <span class="nav-text">6.6.3 特质叠加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-4-特质叠加执行顺序"><span class="nav-number">6.6.4.</span> <span class="nav-text">6.6.4 特质叠加执行顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-5-特质自身类型"><span class="nav-number">6.6.5.</span> <span class="nav-text">6.6.5 特质自身类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-6-特质和抽象类的区别"><span class="nav-number">6.6.6.</span> <span class="nav-text">6.6.6 特质和抽象类的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-扩展"><span class="nav-number">6.7.</span> <span class="nav-text">6.7 扩展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-1-类型检查和转换"><span class="nav-number">6.7.1.</span> <span class="nav-text">6.7.1 类型检查和转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-2-枚举类和应用类"><span class="nav-number">6.7.2.</span> <span class="nav-text">6.7.2 枚举类和应用类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-3-Type-定义新类型"><span class="nav-number">6.7.3.</span> <span class="nav-text">6.7.3 Type 定义新类型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-7-章-集合"><span class="nav-number">7.</span> <span class="nav-text">第 7 章 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-集合简介"><span class="nav-number">7.1.</span> <span class="nav-text">7.1 集合简介</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-1-不可变集合继承图"><span class="nav-number">7.1.1.</span> <span class="nav-text">7.1.1 不可变集合继承图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-2-可变集合继承图"><span class="nav-number">7.1.2.</span> <span class="nav-text">7.1.2 可变集合继承图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-数组"><span class="nav-number">7.2.</span> <span class="nav-text">7.2 数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-1-不可变数组"><span class="nav-number">7.2.1.</span> <span class="nav-text">7.2.1 不可变数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-2-可变数组"><span class="nav-number">7.2.2.</span> <span class="nav-text">7.2.2 可变数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-3-不可变数组与可变数组的转换"><span class="nav-number">7.2.3.</span> <span class="nav-text">7.2.3 不可变数组与可变数组的转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-4-多维数组"><span class="nav-number">7.2.4.</span> <span class="nav-text">7.2.4 多维数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-列表-List"><span class="nav-number">7.3.</span> <span class="nav-text">7.3 列表 List</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-1-不可变-List"><span class="nav-number">7.3.1.</span> <span class="nav-text">7.3.1 不可变 List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-2-可变-ListBuffer"><span class="nav-number">7.3.2.</span> <span class="nav-text">7.3.2 可变 ListBuffer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-Set-集合"><span class="nav-number">7.4.</span> <span class="nav-text">7.4 Set 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-1-不可变-Set"><span class="nav-number">7.4.1.</span> <span class="nav-text">7.4.1 不可变 Set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-2-可变-mutable-Set"><span class="nav-number">7.4.2.</span> <span class="nav-text">7.4.2 可变 mutable.Set</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-5-Map-集合"><span class="nav-number">7.5.</span> <span class="nav-text">7.5 Map 集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-1-不可变-Map"><span class="nav-number">7.5.1.</span> <span class="nav-text">7.5.1 不可变 Map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-2-可变-Map"><span class="nav-number">7.5.2.</span> <span class="nav-text">7.5.2 可变 Map</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-6-元组"><span class="nav-number">7.6.</span> <span class="nav-text">7.6 元组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-7-集合常用函数"><span class="nav-number">7.7.</span> <span class="nav-text">7.7 集合常用函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-1-基本属性和常用操作"><span class="nav-number">7.7.1.</span> <span class="nav-text">7.7.1 基本属性和常用操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-2-衍生集合"><span class="nav-number">7.7.2.</span> <span class="nav-text">7.7.2 衍生集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-3-集合计算简单函数"><span class="nav-number">7.7.3.</span> <span class="nav-text">7.7.3 集合计算简单函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-4-集合计算高级函数"><span class="nav-number">7.7.4.</span> <span class="nav-text">7.7.4 集合计算高级函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-5-普通-WordCount-案例"><span class="nav-number">7.7.5.</span> <span class="nav-text">7.7.5 普通 WordCount 案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-6-复杂-WordCount-案例"><span class="nav-number">7.7.6.</span> <span class="nav-text">7.7.6 复杂 WordCount 案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-8-队列"><span class="nav-number">7.8.</span> <span class="nav-text">7.8 队列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-9-并行集合"><span class="nav-number">7.9.</span> <span class="nav-text">7.9 并行集合</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-8-章-模式匹配"><span class="nav-number">8.</span> <span class="nav-text">第 8 章 模式匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-基本语法"><span class="nav-number">8.1.</span> <span class="nav-text">8.1 基本语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-模式守卫"><span class="nav-number">8.2.</span> <span class="nav-text">8.2 模式守卫</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3-模式匹配类型"><span class="nav-number">8.3.</span> <span class="nav-text">8.3 模式匹配类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-1-匹配常量"><span class="nav-number">8.3.1.</span> <span class="nav-text">8.3.1 匹配常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-2-匹配类型"><span class="nav-number">8.3.2.</span> <span class="nav-text">8.3.2 匹配类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-3-匹配数组"><span class="nav-number">8.3.3.</span> <span class="nav-text">8.3.3 匹配数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-4-匹配列表"><span class="nav-number">8.3.4.</span> <span class="nav-text">8.3.4 匹配列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-5-匹配元组"><span class="nav-number">8.3.5.</span> <span class="nav-text">8.3.5 匹配元组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-6-匹配对象及样例类"><span class="nav-number">8.3.6.</span> <span class="nav-text">8.3.6 匹配对象及样例类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4-变量声明中的模式匹配"><span class="nav-number">8.4.</span> <span class="nav-text">8.4 变量声明中的模式匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-for-表达式中的模式匹配"><span class="nav-number">8.5.</span> <span class="nav-text">8.5 for 表达式中的模式匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-6-偏函数中的模式匹配-了解"><span class="nav-number">8.6.</span> <span class="nav-text">8.6 偏函数中的模式匹配(了解)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-9-章-异常"><span class="nav-number">9.</span> <span class="nav-text">第 9 章 异常</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-Java-异常处理"><span class="nav-number">9.1.</span> <span class="nav-text">9.1 Java 异常处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-Scala-异常处理"><span class="nav-number">9.2.</span> <span class="nav-text">9.2 Scala 异常处理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-10-章-隐式转换"><span class="nav-number">10.</span> <span class="nav-text">第 10 章 隐式转换</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1-隐式函数"><span class="nav-number">10.1.</span> <span class="nav-text">10.1 隐式函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-2-隐式参数"><span class="nav-number">10.2.</span> <span class="nav-text">10.2 隐式参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-3-隐式类"><span class="nav-number">10.3.</span> <span class="nav-text">10.3 隐式类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-4-隐式解析机制"><span class="nav-number">10.4.</span> <span class="nav-text">10.4 隐式解析机制</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-11-章-泛型"><span class="nav-number">11.</span> <span class="nav-text">第 11 章 泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-1-协变和逆变"><span class="nav-number">11.1.</span> <span class="nav-text">11.1 协变和逆变</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2-泛型上下限"><span class="nav-number">11.2.</span> <span class="nav-text">11.2 泛型上下限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-3-上下文限定"><span class="nav-number">11.3.</span> <span class="nav-text">11.3 上下文限定</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-12-章-总结"><span class="nav-number">12.</span> <span class="nav-text">第 12 章 总结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-开发环境"><span class="nav-number">12.1.</span> <span class="nav-text">12.1 开发环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2-变量和数据类型"><span class="nav-number">12.2.</span> <span class="nav-text">12.2 变量和数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-3-流程控制"><span class="nav-number">12.3.</span> <span class="nav-text">12.3 流程控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-4-函数式编程"><span class="nav-number">12.4.</span> <span class="nav-text">12.4 函数式编程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-5-面向对象"><span class="nav-number">12.5.</span> <span class="nav-text">12.5 面向对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-6-集合"><span class="nav-number">12.6.</span> <span class="nav-text">12.6 集合</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-7-模式匹配"><span class="nav-number">12.7.</span> <span class="nav-text">12.7 模式匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-8-下划线"><span class="nav-number">12.8.</span> <span class="nav-text">12.8 下划线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-9-异常"><span class="nav-number">12.9.</span> <span class="nav-text">12.9 异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-10-隐式转换"><span class="nav-number">12.10.</span> <span class="nav-text">12.10 隐式转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-11-泛型"><span class="nav-number">12.11.</span> <span class="nav-text">12.11 泛型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#第-13-章-IDEA-快捷键"><span class="nav-number">13.</span> <span class="nav-text">第 13 章 IDEA 快捷键</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Rui Zhang"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">Rui Zhang</p>
  <div class="site-description" itemprop="description">不在沉默中爆发，就在沉默中灭亡</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2021 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Rui Zhang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">25:10</span>
</div>




        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":120,"height":230},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
